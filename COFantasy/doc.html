<html lang="fr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Documentation du script COFantasy sous Roll20">
    <meta name="author" content="Ulti & Kamille">
    <title>Scripts pour Chroniques Oubliées Fantasy sous Roll20</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>

  </head>
  <body data-target="#list" data-spy="scroll" data-offset="10">
    <style>
body{position: relative;}
img{margin: 0 auto; display: block; border-radius: 3px; -webkit-box-shadow: 0px 3px 8px 1px rgba(61, 61, 61,0.40); -moz-box-shadow: 0px 3px 8px 1px rgba(61, 61, 61,0.40); box-shadow: 0px 3px 8px 1px rgba(61, 61, 61,0.4);}
.card, img:hover{-webkit-box-shadow: 0px 3px 8px 1px rgba(61, 61, 61,0.60); -moz-box-shadow: 0px 3px 8px 1px rgba(61, 61, 61,0.60); box-shadow: 0px 3px 8px 1px rgba(61, 61, 61,0.60);}
.card {margin-bottom: 20px;}
.card > img {-webkit-box-shadow: none; -moz-box-shadow: none; box-shadow: none;}
.card.added > img {-webkit-filter: grayscale(100%); -moz-filter: grayscale(100%); -o-filter: grayscale(100%); -ms-filter: grayscale(100%); filter: grayscale(100%); }
.card .card-title {height: 52px; overflow: hidden}
figcaption {font-size: 0.7em; text-align: center; margin-top: -0.7rem; margin-bottom: 0.7rem;}
div.decalage {margin-left: 10px;}
h3.text-info {margin-top: 30px;}
h4.text-secondary {margin-top: 30px;}
.content li {margin-top: 10px}
div.decalage > h3.text-info:first-child, div.decalage > h4.text-secondary:first-child, .content li:first-child {margin-top: 0px;}
div.alert > p:last-child {margin-bottom: 0}
#json_data textarea {margin-bottom: 10px;}
#json_data button {margin-bottom: 10px; margin-right: 5px; float: right;}
#json_data button::after {clear: both;}
table {border-collapse: collapse;}
th, td {padding: 5px;}
tr {line-height: 25px;}
    </style>
    <script>
      $('document').ready(function() {      
        $(document).on('click', '[data-href]', function(){
          window.open($(this).data('href'));
        });

        $('a[href^="http://"], a[href^="https://"]').attr('target','_blank');

        $('div.sticky-top ul.collapse').on('show.bs.collapse', function () {
          $('div.sticky-top ul.collapse').collapse('hide');
        });
      });
    </script>
    <div class="container-fluid">
      <div class="row">
        <div class="col-md-3 col-sm-4 d-none d-sm-block d-md-block d-lg-block d-xl-block">
          <div class="sticky-top">
            <h1>Sommaire</h1>
            <ol>
              <li data-toggle="collapse" data-target="#how_to_use"><a href="#comment_utiliser_script">Comment utiliser Le script</a></li>
              <ul id="how_to_use" class="collapse">
                <li><a class="text-info" href="#token_personnages">Tokens et personnages</a></li>
                <li><a class="text-info" href="#macros_abilities">Macros et Abilities</a></li>
                <li><a class="text-info" href="#predicats">Prédicats</a></li>
                <li><a class="text-info" href="#methode_selection_groupes">Méthodes de sélection de groupes</a></li>
                <li><a class="text-info" href="#options_mana">Options de Mana</a></li>
                <li><a class="text-info" href="#regles_optionnelles">Règles optionnelles utilisées</a></li>
              </ul>
              <li data-toggle="collapse" data-target="#main_action"><a href="#action_principales">Actions principales</a></li>
              <ul id="main_action" class="collapse">
                <li><a class="text-info" href="#le_combat">Le combat</a></li>
                <li><a class="text-info" href="#soins">Soins</a></li>
                <li><a class="text-info" href="#repos">Repos</a></li>
                <li><a class="text-info" href="#statut_etats">Statut et états</a></li>
                <li><a class="text-info" href="#sorts">Sorts</a></li>
                <li><a class="text-info" href="#consommables">Consommables</a></li>
                <li><a class="text-info" href="#deplacements">Déplacements</a></li>
                <li><a class="text-info" href="#lumiere">Lumière</a></li>
                <li><a class="text-info" href="#jet_caracteristiques">Jet de caractéristiques</a></li>
                <li><a class="text-info" href="#anonymat">Anonymat et fausses identités</a></li>
                <li><a class="text-info" href="#autre">Autres aspects du jeu</a></li>
              </ul>
              <li data-toggle="collapse" data-target="#abilities"><a href="#CapacitesClasse">Capacités par Classe</a></li>
              <ul id="abilities" class="collapse">
                <li><a class="text-info" href="#Arquebusier">Arquebusier</a></li>
                <li><a class="text-info" href="#Barbare">Barbare</a></li>
                <li><a class="text-info" href="#Barde">Barde</a></li>
                <li><a class="text-info" href="#Chevalier">Chevalier</a></li>
                <li><a class="text-info" href="#Druide">Druide</a></li>
                <li><a class="text-info" href="#Ensorceleur">Ensorceleur</a></li>
                <li><a class="text-info" href="#Forgesort">Forgesort</a></li>
                <li><a class="text-info" href="#Guerrier">Guerrier</a></li>
                <li><a class="text-info" href="#Invocateur">Invocateur</a></li>
                <li><a class="text-info" href="#Magicien">Magicien</a></li>
                <li><a class="text-info" href="#Moine">Moine</a></li>
                <li><a class="text-info" href="#Necromancien">Nécromancien</a></li>
                <li><a class="text-info" href="#Pretre">Prêtre</a></li>
                <li><a class="text-info" href="#Psionique">Psionique</a></li>
                <li><a class="text-info" href="#Rôdeur">Rôdeur</a></li>
                <li><a class="text-info" href="#Samouraï">Samouraï</a></li>
                <li><a class="text-info" href="#Voleur">Voleur</a></li>
              </ul>
              <li data-toggle="collapse" data-target="#autres_capacites"><a href="#Autres_capacités">Autres capacités</a></li>
              <ul id="autres_capacites" class="collapse">
                <li><a class="text-info" href="#Capacites_raciales">Voies et capacités raciales</a></li>
                <li><a class="text-info" href="#Prestige">Voies de prestige et capacités épiques</a></li>
                <li><a class="text-info" href="#Créatures">Voies de créature</a></li>
                <li><a class="text-info" href="#Sorts">Autres sorts</a></li>
                <li><a class="text-info" href="#Capacites_diverses">Capacités diverses</a></li>
              </ul>
              <li data-toggle="collapse" data-target="#terres_d_arran"><a href="#Terres_d_Arran">Terres d'Arran</a></li>
              <ul id="terres_d_arran" class="collapse">
                <li><a class="text-info" href="#Peuples_d_Arran">Les peuples</a></li>
                <li><a class="text-info" href="#Voies_de_la_famille_des_combattants">Les combattants</a></li>
                <li><a class="text-info" href="#Voies_de_la_famille_des_aventuriers">Les aventuriers</a></li>
                <li><a class="text-info" href="#Voies_de_la_famille_des_mystiques">Les mystiques</a></li>
                <li><a class="text-info" href="#Voies_de_prestige_Arran">Voies de prestige</a></li>
              </ul>
              <li data-toggle="collapse" data-target="#markers_personnalises"><a href="#Markers_personnalisés">Markers personnalisés</a></li>
              <ul id="markers_personnalises" class="collapse">
                <li><a class="text-info" href="#Markers_presentation">Présentation</a></li>
                <li><a class="text-info" href="#Markers_COF">Markers COF</a></li>
                <li><a class="text-info" href="#Markers_Import">Importation dans Roll20</a></li>
                <li><a class="text-info" href="#Markers_Check">Activation et Vérification</a></li>
              </ul>
              <li data-toggle="collapse" data-target="#console"><a href="#Console">Console API</a></li>
              <li><a href="#pathfinder">Conversion depuis Pathfinder</a></li>
              <ul id="console" class="collapse">
                <li><a class="text-info" href="#Generalites_Console">Généralités sur la Console API</a></li>
                <li><a class="text-info" href="#Erreurs_Console">Principaux messages d'erreur</a></li>
                <li><a class="text-info" href="#Infos_Console">Principaux messages d'information</a></li>
              </ul>
            </ol>
          </div>
        </div>
        <div class="col-md-9 col-sm-8 content">
          <h1>Documentation pour la version 3.10 de COFantasy</h1>
          <h2 class="text-primary" id="comment_utiliser_script">1. Comment utiliser Le script</h2>
          <div class="decalage">
            <h3 class="text-info" id="token_personnages">1.1 Tokens et personnages</h3>
            <div class="decalage">
              <p>Ces scripts ont été écrits pour fonctionner avec les fiches de personnages développées par <a href="https://github.com/Roll20/roll20-character-sheets/tree/master/ChroniquesOubliees">Natha</a>.</p>
              <p><img class="img-fluid" src="https://i.imgur.com/rF0Qxht.png" data-href="https://i.imgur.com/rF0Qxht.png"></p>
              <figcaption>A choisir pendant la création de la partie sur Roll20.</figcaption>
            </div>
            <p>Chaque token avec lequel vous souhaitez interagir doit représenter un personnage.</p>
            <p>La barre 1 représente toujours les points de vie du token.<br />
            La barre 2 est soit la mana, pour les personnages qui ont des points de mana, soit les dégâts temporaires pour les personnages qui n’ont pas de points de mana<br />
            La barre 3 est utilisée pour donner un modificateur temporaire à l’attaque du token.
            </p>
            <p>Les statuts des tokens sont en partie utilisés pour représenter des états. Voir plus loin pour la <a href="#etats">liste des statuts</a> utilisés par les scripts.<br />
            Pour tenir compte d'autre états non visibles sur les tokens, les scripts utilisent des attributs supplémentaires (hors fiche). Parfois, le MJ devra créer et remplir lui-même certains attributs, d'autres fois cela sera géré par les scripts.
            </p>
            <p>Il est important de noter la différence entre les tokens liés à un personnage (la barre 1 est liée aux points de vie du personnage, tout changement sur la fiche se répercute sur le token), et les tokens non liés (dans ce cas, la fiche de personnage est générique, et chaque token est une instance différente, avec des PV indépendants).</p>
            <p>Pour gérer les états spécifiques à un token non lié, les scripts utilisent des conventions de nom d'attribut utilisant le nom du token. Pour que cela fonctionne correctement, <b>il est important que deux tokens indépendants ne portent pas le même nom</b>, même si ils représentent le même personnage. Pour cette raison, le script va automatiquement renommer les tokens indépendants, en leur associant un numéro. Il est toujours possible de remodifier le nom après la création du token, mais dans ce cas, c'est vous qui gérez...</p>
            <p>Certains messages tiennent compte du genre (masculin ou féminin) des personnages. Ils utilisent le champ <code>Sexe</code> de la fiche de personnage. Un personnage est reconnu comme féminin si ce champ commence par la lettre <code>F</code>.
            </p>
            <h3 class="text-info" id="macros_abilities">1.2 Macros et Abilities</h3>
            <div class="decalage">
              <p>Comme tous les scripts, ces scripts sont utilisables tels quels dans le chat, mais ils sont pensés pour être utilisés par des macros qui permettent un autre niveau d'automatisation parfois difficile d'accès au sein des scripts. le script génère d'ailleurs la plupart des macros utiles à la première utilisation, et il met automatiquement les macros à jour à chaque changement de version. Il est possible de demander des les re-créer en tapant la commande <code>!cof-set-macros</code> dans le chat.</p>
              <p>
              Le script ne peut pas mettre les macros dans la barre de raccourci. Je recommande que chaque joueur se crée sa macro <code>Centrer</code>, contenant le code <code>!cof-centrer-sur-token <i>nom_de_leur_token_principal</i></code>, qui leur permettra en un click de centrer la vue de la carte sur leur token. Pour le MJ, le script suggère de mettre un certain nombre des macros qu'il crée, au moment de la première utilisation.</p>
              <p>Une partie des capacités et attaques des personnages devraient être utilisées au sein d'abilities de personnages, accessibles comme "Token action". Si ces abilities utilisent des macros, ne pas oublier de rendre ces macros accessibles aux joueurs.</p>
            </div>
            <h3 class="text-info" id="predicats">1.3 Prédicats</h3>
            <div class="decalage">
              <p>Une façon courante d'informer le script qu'un personnage dispose d'une capacité particulière (que ce soit dû à son entraînement ou à un objet porté) consiste à utiliser des prédicats. Il s'agit de mots clés à rentrer dans la zone de texte <code>Prédicats</code>, visible depuis l'onglet <code>Script</code> de la fiche. Ces mots clés peuvent être séparés de blancs ou de retours à la ligne.</p>
              <p>On peut associer une valeur à un prédicat (le plus souvent un nombre, mais en fait n'importe quel mot qui ne contienne ni virgule, ni blanc, ni <code>:</code>). Pour cela, faire suivre le prédicat de <code>:</code> puis de la valeur.</p>
              <p>Dans chaque ligne de la zone de prédicats, tout ce qui vient après <code>//</code> est considéré comme du commentaire et ignoré.</p>
              <p><img class="img-fluid" src="images/predicats_barbare.jpg"></p>
              <figcaption>Exemple de prédicats.</figcaption>
            </div>
            <h3 class="text-info" id="methode_selection_groupes">1.4 Méthodes de sélection de groupes</h3>
            <div class="decalage">
              <p>Comme les joueurs ne peuvent pas sélectionner un nombre arbitraire d'ennemis, 7 méthodes sont disponibles&nbsp;:</p>
              <ul>
                <li>Le MJ lance la macro en sélectionnant les cibles</li>
                <li id="allie">option <code>--allies</code> : cela fait chercher tous les <i>handout</i> dont le nom est Equipe suivi d'un nom, et tels que le <i>handout</i> contienne une liste de noms (un par ligne), parmis lesquels, celui du personnage qui agit. Le personnage qui agit est celui qui est sélectionné. Les cibles sont tous les alliés du personnage sélectionné, mais pas le personnage lui-même. Attention, les noms de personnages ne doivent pas contenir de balise XML (texte encadré par des &lt; et &gt;). Optionellement, on peut préciser une distance maximale entre le personnage sélectionné et ses allies.</li>
                <li>option <code>--alliesEnVue</code> : comme <code>--allies</code>, mais ne garde que les alliés en vue (en fonction des murs sur le layer lumière).</li>
                <li>option <code>--equipe <i>nom</i></code> : agit sur tous les personnages mentionnés dans le <i>handout</i> s'appelant Equipe <i>nom</i>.</li>
                <li>option <code>--self</code> : pour rajouter le personnage sélectionné. Utile si on veut le personnage et ses alliés, par exemple.</li>
                <li>option <code>--target</code> : pour ajouter une seule cible, avec une id de token. Le personnage qui agit est celui qui est sélectionné.</li>
                <li>option <code>--disque</code> : le premier argument, optionnel, est l'id ou le nom d'un token qui représente un personnage, le deuxième argument un rayon. Cela sélectionne tous les tokens à une distance de moins que le rayon du premier argument (ou du personnage à l'origine de l'effet, si le premier argument est absent). Si un troisième argument est donné, il est interprété comme la portée maximum entre le centre du disque et le token du personnage à l'origine de l'effet. Si le premier argument représente un personnage avec un max de PV à 0, il est compris comme un personnage fictif créé juste pour définir le disque, et il sera supprimé après la sélection. À noter que le script crée par défaut un tel personnage, utilisable par tous, et appelé Cible.</li>
                <li>option <code>--disquePasseMur</code> : comme <code>--disque</code>, mais l'effet traverse les murs.</li>
                <li>option <code>--enVue</code> : sélectionne tous les tokens en vue du personnage qui lance l'effet. Accepte aussi un argument d'id de token, dans ce cas on garde les token en vue de celui avec cette id.</li>
                <li>option <code>--saufAllies</code> permet d'exclure les alliés de la sélection (voir plus haut pour la définition des alliés).</li>
              </ul>
              <p id="exemple_equipe"><img class="img-fluid" src="https://i.imgur.com/WHfwsKo.png" data-href="https://i.imgur.com/WHfwsKo.png"></p>
              <figcaption>Exemple d'<i>handout</i> avec différentes équipes.</figcaption>
            </div>
            <h3 class="text-info" id="options_mana">1.5 Options de mana</h3>
            <div class="decalage">
              <p>COF sous ses différentes formes est une boîte à outils et nombreuses sont les variantes de système de magie qui peuvent être utilisées. Le script propose un support pour les plus populaires d'entre elles. Voici quelques consignes pour les implémenter.</p>
              <h4>Spécifier un coût en mana</h4>
              <ul>
                <li>Les points de mana sont dépensés en ajoutant l'option <code>--mana X</code> à une action ou dans les options d'une attaque. Toutes les capacités implémentées dans la documentation donnent par défaut le coût en mana selon les règles de base.</li>
                <li>Même un sort qui ne coûte pas de mana devrait utiliser <code>--mana 0</code>. Cela permet au script de dissiper automatiquement un effet généré par un lanceur de sort mis hors de combat.</li>
                <li>Une option d'affichage disponible via <code>!cof-options</code> permet de demander au script d'afficher explicitement dans le chat toute dépense de PM effectuée par un personnage.</li>
              </ul>
              <h4>Système de base (COF p. 79)</h4>
              <p>Le support des effets supplémentaires à disposition du lanceur de sort sont gérées via l'utilisation d'options sur les commandes utilisées.</p>
              <ul>
                <li><b>Magie rapide :</b> pas de support particulier</li>
                <li><b>Magie puissante (dés) :</b> utiliser l'option <code>--puissant</code> dans vos abilities ou attaques</li>
                <li><b>Magie puissante (portée) :</b> utiliser l'option <code>--puissant portee</code> dans vos abilities ou attaques</li>
                <li><b>Magie puissante (durée) :</b> utiliser l'option <code>--puissant duree</code> dans vos abilities ou attaques</li>
              </ul>
              <p>On peut facilement combiner ces options avec un input de choix roll20 qui permettra au joueur de choisir le type d'incantation lorsqu'il lance le sort, tout en spécifiant la dépense de Mana.</p>
              <p><code>--mana <i>X</i> ?{Incantation ?|Rapide,&#32;|Puissante (L),--puissant|Portée étendue (L),--puissant portee|Durée étendue (L),--puissant duree}</code></p>
              <h4>Mana Totale (COF p. 180)</h4>
              <p>La première chose à faire est d'activer l'option Mana totale via <code>!cof-options</code>. Pour le reste, vous pouvez réutiliser le principe du système de base ci-dessus.</p>
              <h5>Coût aléatoire</h5>
              <p>Vous pouvez utiliser des lancers de dés dans vos options <code>--mana</code>. Par exemple pour un sort de rang 1, on peut renseigner <code>--mana [[1d3]]</code>. L'option d'affichage de la dépense de mana prend ici tout son sens, activable via <code>!cof-options</code>.</p>
              <h5>Contrecoup</h5>
              <p>Vous pouvez activer la règle spécifique de Contrecoup via <code>!cof-options</code>.</p>
              <h4>Tempête de Mana (COF Compagnon p. 105)</h4>
              <p>Le script implémente un support complet des règles de Tempête de Mana. Pour ce faire, il faut ajouter les options <code>--tempeteDeMana --rang <i>X</i></code> sur les sorts combinables avec Tempête de Mana. L'option <code>rang</code> permet d'indiquer le rang du sort afin que le script puisse calculer le maximum de PM qu'on peut dépenser lors du lancement du sort. Pour mettre ça de manière générique sur une action ou une attaque et permettre au joueur de choisir de faire appel à Tempête de Mana ou pas, on peut utiliser :</p>
              <p><code>--mana <i>X</i> --rang <i>Y</i> ?{Tempête de Mana ?|Non,&amp;#32;|Oui,--tempeteDeMana}</code></p>
              <p>Tempête de Mana est compatible avec Mana Totale et Brûlure de Magie.</p>
              <h5>Option altruiste</h5>
              <p>Si vous désirez jouer avec l'option de Magie altruiste, il suffit de changer l'option en <code>--tempeteDeMana altruiste</code> sur les sorts où c'est utile.</p>
              <h4>Terres d'Arran (COTA p. 112)</h4>
              <p>Première chose à faire, activer l'option Brûlure de Magie via <code>!cof-options</code>. <i>Note : si vous utilisez l'option de Brûlure de Magie avec l'option Mana Totale, vous pouvez utiliser un <a href=#predicats>prédicat</a> <code>coefPVMana</code> qui va diviser le nombre de PVs dépensé par point de mana.</i></p>
              <p>Vous pouvez ensuite réutiliser le même principe que le système de base en combinant dépense de Mana et effets supplémentaires. Voici un exemple pour une Boule de Feu (Voie de l'élémentaliste, rang 4) :</p>
              <p><code>?{Incantation ?|Normale,--mana 4|Econome (L),--mana 2|Puissante (L),--mana 4 --puissant|Portée étendue (L),--mana 4 --puissant portee}</code></p>
            </div>
            <h3 class="text-info" id="regles_optionnelles">1.6 Règles optionnelles utilisées</h3>
            <div class="decalage">
              <p>Le script supporte l'utilisation de la règle des points de chance et des points de récupération.</p>
              <p>J'ai aussi choisi, comme proposé par Kegron, de diminuer la DEF de tous les protagonistes après un certain nombre de tours de combat (-2 tous les 5 tours, peut être désactivé pendant un combat par la commande <code>!cof-usure-off</code>, ou bien dans les options de jeu).</p>
              <p>Le script utilise aussi par défaut une règle de <strong>blessure grave</strong> : chaque fois qu'un personnage tombe à 0 PV, il encaisse une perte d'un point de récupération. S'il était à 0 points de récupération, il devient gravement blessé, ce qui le rend <i>affaibli</i>. Si le personnage était déjà gravement blessé, il meurt. Pour récupérer d'une blessure grave, le personnage doit se reposer une nuit, et réussir un test de CON difficulté 8 (avec le d12). Il est impossible de régénérer les points de récupération quand on est gravement blessé.</p>
              <p>Le script utilise également une règle de <strong>dommages importants</strong> : chaque fois qu'un PJ reçoit plus de dommages en une fois que la somme de sa valeur de constitution et de son niveau, il perd 1PR et la règle de blessure grave s'applique. S'il était déjà blessé mais qu'il lui reste des PV, il tombe inconscient. Les deux règles sont désactivables séparément via <code>!cof-options</code>, dans la section dommages.</p>
              <p>Le script propose également quelques autres options qui sont activables et/ou modifiables via la commande <code>!cof-options</code>. Quelques exemples :</p>
              <ul>
                <li>Initiative variable (individuelle / de groupe)</li>
                <li>Versions alternatives de capacités (interchangeable, forme d'arbre, rune de protection)</li>
                <li>Critiques étendus</li>
                <li>Dommages minimums</li>
                <li>Attaques de groupe</li>
              </ul>
            </div>
          </div>
          <h2 class="text-primary" id="action_principales">2. Actions principales</h2>
          <p>Pour la plupart des actions ci-dessous, il est généralement utile de créer des macros facilitant leur utilisation. Pour mettre en place un jeu de macros par défaut, vous pouvez taper <code>!cof-set-macros</code> dans le chat. Si vous souhaitez redéfinir des macros existantes, vous pouvez taper <code>!cof-set-macros --force</code>.</p>
          <div class="decalage">
            <h3 class="text-info" id="le_combat">2.1 Le combat</h3>
            <div class="decalage">
              <h4 class="text-secondary">Initiative : <code>!cof-init</code></h4>
              <div class="decalage">
                <p>Les tokens sélectionnés sont ajouté au tracker de tour. Si celui-ci n'existe pas, un nouveau est créé, avec compteur de tour à 1, et on rentre en combat. Les tokens ayant un <a href=#predicats>prédicat</a> <code>aucuneActionCombat</code> ne sont jamais ajoutés au turn tracker.</p>
                <p>Une option du script (ajustable en utilisant <code>!cof-options</code>) permet d'utiliser la règle de l'initiative variable (ajout d'un d6 explosif à l'initiative). Il est alors possible de faire lancer les dés d'initiative par les joueurs.</p>
                <p>Les règles de tri suivent ce qui est donné p 70 : priorité aux PJs. Pour l'instant, on distingue un PJ d'un PNJ au dé de vie : si le personnage d'a pas de dé de vie, c'est un PNJ. Ensuite, entre PJs, priorité à la plus haute sagesse. Pour les PNJ, c'est aléatoire.</p>
                <p>À chaque instant, le token dont c'est le tour d'agir est signalé par une aura qui bouge lentement. L'image de cette aura peut être modifiée dans les options (<code>!cof-options images</code>), et il est possible de spécifier une aura pour chaque token, en ajoutant une ligne dans le champ <code>GM Notes</code> du token (en bas de la partie basique de l'édition du token). Cette ligne doit commencer par <code>init_aura:</code>, et contenir une <a href=https://wiki.roll20.net/API:Objects#imgsrc_and_avatar_property_restrictions>url valide pour un token</a>. N'oubliez pas de sauvegarder le token comme token par défaut our un personnage si vous voulez que ce personnage ait toujours cette aura.</p>
                <p>Il est possible de laisser les joueurs passer leur tour, en utilisant la commande <code>!cof-tour-suivant</code>. Une utilisation possible est de le mettre en macro dans les actions du tour (voir <a href="#actions_du_tour">Actions du tour</a> ci-dessous).</p>
                <div class="alert alert-primary">
                  <h5>Astuces :</h5>
                  <ul>
                    <li><p><code>!cof-attendre ?{Nouvelle initiative}</code> : Permet d'attendre avant d'agir en réduisant temporairement son initiative.</p></li>
                    <li> Il est possible de se passer de l'aura qui bouge, et d'utiliser à la place une icône de drapeau ou avec la syntaxe
                      <code>!cof-init --aura</code> une aura autour du Token de couleur verte (ou rouge si le personnage n'est pas contrôlé par un joueur ou dans une <a href="#exemple_equipe">équipe</a> contenant un personnage contrôlé par un joueur). Pour cela, désactiver l'initiative dynamique dans les options d'affichage (<code>!cof-options affichage</code>).
                    </li>
                    </li>
                  </ul>
                </div>
              </div>
              <h4 class="text-secondary" id="actions_du_tour" >Liste d'actions pour le personnage dont c'est le tour</h4>
              <div class="decalage">
                <p>Le script affiche, pour le personnage dont c'est le tour, une liste d'actions. Cette liste est chuchotée au joueur qui contrôle le personnage, ou si aucun joueur le contrôlant n'est connecté, au MJ. Elle se compose par défaut des attaques du personnage et des actions d'attendre, se défendre et faire une manoeuvre. 
                Pour voir ce message en dehors du changement d'initiative, ou pour le MJ, on peut utiliser <code>!cof-liste-actions</code> en sélectionnant le token (un bon candidat pour une macro de type token action, d'ailleurs généré par la commande <code>!cof-set-macros</code>).
                Pour contrôler ce qui est affiché dans cette liste, vous pouvez principalement utiliser la liste des attaques du personnage et surtout la partie <code>script</code> de la fiche.</p>
                <h5> Les attaques affichées </h5>
                <p>Il est possible de ne pas afficher une attaque en décochant la case sous le dé dans les options d'attaque. Les attaques sont affichées dans l'ordre des labels d'attaques. les attaques avec des conditions impossibles (du genre limite par jour épuisée, etc.) ne sont pas affichées.</p>
                <p>À cela se rajoute éventuellement l'attaque avec l'arme en main. À côté de cette attaque, le script propose un bouton pour rengainer l'arme ou en dégainer une autre (parmis les armes de la fiche cochées). On peut modifier cette liste des armes à dégainer en utilisant des prédicats <code>actionDegainer<i>n</i></code>, de valeur le label de l'arme à afficher en position <i>n</i> dans la liste (seulement pour les premières armes, il n'est pas possible de ne spécifier que la 2<sup>nde</sup> arme ou la 1<sup>ère</sup> et le 3<sup>ème</sup>). On peut ainsi faire afficher 2 armes à dégainer en même temps en séparant les labels d'un <code>-</code> (par exemple pour faire dégainer l'arme 1 en main droite et l'arme 4 en main gauche, en première position dans la liste, on écrira <code>actionDegainer1:1-4</code>. À noter que si aucune arme n'est en main, et qu'aucune attaque naturelle n'est cochée, le script va tout de même afficher une des attaques naturelles non cochées à la place de l'arme en main. Cela permet d'avoir une attaque que l'on n'affiche que quand on n'a pas d'arme en main.</p>
                <p>Notez qu'il est possible d'avoir une arme par défaut en main, en ajoutant un prédicat <code>armeParDefaut</code>, de valeur le label de l'attaque correspondante. C'est parfois bien pratique pour ne pas avoir à dégainer les armes de chacun des orques en embuscade, par exemple.</p>
                <h5>Choisir les actions à afficher</h5>
                <p>Pour changer les attaques affichées par défaut, rajouter des actions à la liste d'actions du tour, ou utiliser de nouvelles listes, il faut aller dans l'onglet <code>Script</code> de la fiche de personnage.</p>
                <p><img class="img-fluid" src="images/liste_actions_magicien.jpg"></p>
                <figcaption>Exemple d'une liste d'actions pour un magicien</figcaption>
                <p>Pour rajouter des actions à montrer, il faut ajouter des lignes en-dessous de <code>Montrer l'arme en main et dégainer</code>. La case cochée devant chaque action peut être décochée pour ne pas afficher l'action.  Les actions seront affichée dans l'ordre des numéros d'action. Attention, si deux actions ont le même numéro, une des deux ne sera pas affichée. Le titre de l'action peut soit être directement une commande (commençant par <code>%</code>, <code>#</code> ou <code>!</code>), et dans ce cas l'action affichée sera déterminée par le script, soit du texte qui sera affiché tel quel. Dans ce cas, il sera souvent nécessaire de préciser le code de l'action : cliquer sur la roue au bout à droite de la ligne de l'action pour faire apparaître les lignes de condition et de code. La ligne de conditions n'est pas encore utilisée par le script.</p>
                <p>Il existe un certain nombre de commandes spéciales, qui peuvent être rentrée dans le titre ou le code : 
                <ul>
                  <li><code>!attaques</code> fera afficher toutes les attaques cochées de la fiche</li>
                  <li><code>!arme-en-main</code> affichera l'attaque correspondant à l'arme en main, ou si aucune arme n'est en main, une attaque naturelle non cochée, et si il n'y en a pas non plus, une attaque à mains nues. Vous pouvez faire suivre cette commandes d'options d'attaque, comme <code>--m2d20</code>.</li>
                  <li><code>!options</code> passera en option à toutes les actions suivantes tout ce que vous écrirez dans la même ligne (par exemple <code>!options --traquenard</code> passe l'option <code>--traquenard</code> à toutes les actions suivantes).</li>
                </ul>
                </p>

                <h5>Autres listes d'action</h5>
                <p>Il est possible d'ouvrir d'autre listes d'actions, à partir des commandes ou même d'une liste d'actions. La fiche propose 4 emplacements pour ces listes d'action, mais si cela ne suffit pas, vous pouvez utiliser des abilities dont le nom commence et termine par <code>#</code>. Pour faire référence à une liste dans une action, inscrivez simplement le nom de la liste dans le titre de l'action et sélectionnez <code>Liste d'actions</code> dans le menu déroulant à côté. Les listes d'action sur la fiche fonctionnent de la même façon que la liste des actions du tour, sauf qu'il n'y a pas d'affichage par défaut des attaques ou de l'arme en main (pour cela, une simple ligne avec en titre <code>#Attaque -1</code> permet d'y remédier), et que la liste peut avoir une liste d'options globales (cliquer sur la roue à droite du nom de la liste).</p>
                <p>Pour les listes d'actions supplémentaires, dans les abilities, il faut respecter la syntaxe suivante :
                <ul>
                  <li>une action par ligne</li>
                  <li>chaque ligne est donc soit un commentaire, soit une macro (qui commence par <code>#</code>), soit une ability (qui commence par <code>%</code>), soit une commande qui commence par <code>!</code></li>
                  <li>l'action affichée sera le nom de la macro ou de l'ability (sauf pour les attaques, pour lesquelles le nom de l'arme sera affichée)</li>
                  <li>les commandes disponibles sont <code>!options</code> et <code>!attaques</code>.</li>
                  <li>pour les listes d'actions, il suffit de mettre <code>%#</code> suivi du nom de la liste et terminé par <code>#</code>.</li>
                </ul>
                <p>Il est aussi possible de faire afficher une liste quelconque avec une commande, avec <code>!cof-liste-actions <i>nom</i></code> (où le nom est celui de la liste, ou bien de l'ability sans les <code>#</code>). Par exemple, si on ne souhaite pas afficher la liste complète des sorts d'un personnage à son tour, on peut faire une liste <code>Sorts</code>, puis faire une macro qui lance <code>!cof-liste-actions Sorts</code> pour que le joueur puisse afficher la liste quand il le souhaite.</p>
              </div>
              <h4 class="text-secondary">Attaquer une (ou plusieurs) cible : <code>!cof-attack @{selected|token_id} @{target|token_id} <i>n</i></code></h4>
              <div class="decalage">
                <p>où <i>n</i> est un argument optionnel qui peut soit correspondre au label de l'attaque sur la fiche du personnage (ce label est automatiquement généré par la fiche et affiché juste devant le nom), soit être le nom de l'attaque. Si cet argument est <code>-1</code>, le script cherchera si le personnage a une arme en main et utilisera cette arme. Si c'est <code>-2</code>, il va chercher l'arme en main gauche. Si cet argument est absent ou qu'il ne correspond pas à un label de la fiche du personnage, l'attaque aura les valeurs par défaut d'une attaque au contact infligeant 1d4 DM. Pour plus de facilité, vous pouvez utiliser la macro <code>Attaque</code> qui fait <code>!cof-attack @{selected|token_id} @{target|token_id}</code></p>
                <div class="alert alert-success" role="alert">
                  <p>Exemple avec label :</p>
                  <div class="decalage">
                    <code>!cof-attack @{selected|token_id} @{target|token_id} 1</code>
                  </div>
                </div>
                <p>L'attaque tient alors compte de toutes les informations de l'attaque, y compris chances de critique, portée, type d'attaque, type de dégâs et autres options spécifiées sur la fiche. Par défaut, l'attaque montre le label, le nom de l'attaque, le calcul du bonus d'attaque, le calcul des dégâts, la portée et un champ <code>SPÉCIAL</code> (ou encore appelé <code>divers</code>), qui contient des prédicats pour l'arme, à la façon des <a href=#predicats>prédicats</a> valables pour le personnage. En cliquant sur la roue au bout à droite de cette ligne, on affiche une deuxième ligne, avec un case à décocher pour ne pas faire apparaître l'attaque à chaque tour, un choix de type d'attaque, des modificateurs, un choix de type de degâts et un champ d'options. Les modificateurs sont constitués d'options sans argument, séparée par une espace. Les options sont reprises telles quels comme un argument à l'attaque (voir plus bas pour le liste de ces options). Attention, pour l'instant ne traite correctment les jets (parties entre crochets) et les demandes au joueur (de type <code>?{question?}</code>) que si on passe par une liste d'actions (donc pas directement en faisant <code>#Attaque 1</code> dans le chat).</p>
                <img class="img-fluid" src="images/armes.jpg">
                <figcaption>Exemple d'attaques.</figcaption>
                <p> En l'absence de label, on peut spécifier ces informations sous forme d'options d'attaque</p>
                <div class="alert alert-success" role="alert">
                  <p>Exemple pour le sort "<i>Flèche enflammée</i>" :</p>
                  <div class="decalage"><code>!cof-attack @{selected|token_id} @{target|token_id} Flèche Enflammée --toucher [[@{selected|ATKMAG}]] --dm 1d6 + [[@{selected|INT}]] --portee 30 --fx beam-fire --feu --sortilege --enflamme</code></div>
                </div>
                <p>Malus ou bonus temporaire à une attaque : utiliser la barre 3.</p>
                <p>Toutes les attaques ayant une portée non nulles sont considérées par le script comme des attaques à distance.</p>
                <p>Le test d'attaque à distance tient compte de la portée (malus de -1 à -5 si distance entre portée et deux fois cette valeur), ainsi que des tokens sur le trajet de l'attaque. Une attaque de trop loin ne porte jamais.</p>
                <p>Utiliser une attaque fait rentrer l'attaquant en combat (et le rajoute au turn tracker).</p>
                <p>Il existe une version spécialisée permettant de faire des dégâts dans un disque centré sur un token, <code>!cof-explosion</code>, dont le premier argument doit être le label d'une attaque.</p>
              </div>
              <h4 class="text-secondary">Options pour l'attaque&nbsp;:</h4>
              <div class="decalage">
                Toutes les options sans arguments peuvent être directement utilisées comme modificateurs dans le liste des modifcateurs d'une attaque.
                <ul>
                  <li><code>--nom <i>txt</i></code> : nom de l'attaque à afficher. Remplace le nom dans la ligne d'attaque si on a donné un label en argument. Le nom ne doit pas comporte de blanc usivi de 2 tirets (<code> --</code>).</li>
                  <li><code>--toucher <i>n</i></code> : bonus de base de l'attaque. Remplace les valeurs dans la ligne d'attaque si on a donné un label en argument. Pour référence, sur les fiches de PJ, l'attaque au contact est <code>[[@{selected|ATKCAC}]]</code>, l'attaque à distance <code>[[@{selected|ATKTIR}]]</code>, et l'attaque magique <code>[[@{selected|ATKMAG}]]</code>.</li>
                  <li><code>--crit <i>n</i></code> : valeur à partir de laquelle le jet de dé est un critique. Remplace les valeurs dans la ligne d'attaque si on a donné un label en argument.</li>
                  <li><code>--dm <i>expr</i></code> : Dégâts de base de l'attaque. Remplace les valeurs dans la ligne d'attaque si on a donné un label en argument. <i>expr</i> peut être un entier ou bien une expression du type <code><i>a</i>d<i>b</i>+<i>c</i></code>. La partie constante de cette expression est optionnelle et peut être négative.</li>
                  <li><code>--portee <i>n</i></code> : la portée de l'attaque exprimée en mètres. Remplace les valeurs dans la ligne d'attaque si on a donné un label en argument.</li>
                  <li><code>--special <i>txt</i></code> : remplace le champ spécial de l'attaque sur la fiche.</li>
                  <li><code>--tempDmg</code> : l'attaque fait des dégâts temporaires (tient compte de la force de l'adversaire, utilise la barre 2 pour les dmg temp, sauf si le token a des PM, auquel cas on utilisera un attribut temporaire).</li>
                  <li><code>--pasDeDmg</code> : l'attaque ne fait pas de DM.</li>
                  <li><code>--poudre</code> : l'arme est une arme à poudre, utilisation d'un dé de poudre. Une arme est aussi considérée comme une arme à poudre si elle contient <code>poudre</code> dans le nom de l'arme ou dans le champ divers.</li>
                  <li><code>--epieu</code> : l'arme est un épieu. À noter que l'arme est aussi considérée comme un épieu si elle contient <code>épieu</code> dans son nom ou <code>epieu</code> dans son champs divers. Cette option augmente de 1 le nombre de dés contre un adversaire sans armure.</li>
                  <li><code>--hache</code> : l'arme est une hache. À noter que l'arme est aussi considérée comme une hache si elle contient <code>hache</code> dans son nom ou dans son champs divers. Cette option permet de passer la RD/hache (pour les sylvaniens, par exemple).</li>
                  <li><code>--marteau</code> : l'arme est un marteau. À noter que l'arme est aussi considérée comme un marteau si elle contient <code>marteau</code> dans son nom ou dans son champs divers.</li>
                  <li><code>--auto</code> : l'attaque réussit automatiquement</li>
                  <li><code>--bonusAttaque <i>n</i></code> : ajoute <i>n</i> au jet d'attaque</li>
                  <li><code>--bonusCritique <i>n</i></code> : augmente <i>n</i> à la plage de coups critiques</li>
                  <li><code>--modifiePortee <i>n</i></code> : ajoute <i>n</i> à la portée de l'attaque.</li>
                  <li><code>--divisePortee <i>n</i></code> : divise la portée de base par <i>n</i>. C'est appliqué avant toute modification de portée.</li>
                  <li><code>--bonusContreBouclier <i>n</i></code> : ajoute <i>n</i> au jet d'attaque si le défenseur porte un bouclier. Utile par exemple pour le fléau d'arme.</li>
                  <li><code>--bonusContreArmure <i>n</i></code> : ajoute <i>n</i> au jet d'attaque si le défenseur porte une armure.</li>
                  <li><code>--psave <i>carac seuil</i></code> : jet de <i>carac</i>, si le jet est supérieur à <i>seuil</i>, les dégâts sont divisés par 2. <i>carac</i> est l'abbréviation de caractéristiques de 3 lettres standard (FOR, DEX, ...). Il est possible de prendre la meilleure de 2 caractéristiques pour le save&nbsp;: pour cela indiquer les 2 caractéristiques collées (donc 6 caractères, par exemple FORDEX, pour le meilleur de FOR et de DEX). Le script choisira automatiquement la caractéristique qui donne les meilleures chances de réussite (en tenant compte de la difficulté et des caractéristiques supérieures).</li> Enfin on peut encore ajouter un ou des arguments optionnels. Si vous avez besoin de plus d'un argument optionnel, séparez-les par <code> +</code>:
                  <ul>
                    <li> Si on souhaite que le jet ne permette de réduire qu'une partie des dommages (la dernière ajoutée avec <code>--plus</code>), on peut ajouter <code>local</code>. La syntaxe complète est alors <code>--psave <i>carac seuil</i> local</code>.</li>
                    <li> Si on souhaite que la difficulté soit augmentée en cas de tempête de mana, on peut utiliser le mot clé <code>tempete</code> suivi si besoin de l'incrément en fonction de la mana (par defaut 1 mana augmente de 1 la difficulté). </li>
                    <li> Si on souhaite indiquer une difficulté alternative pour les cibles au contact, ajouter <code>contact <i>n</i></code>, où <i>n</i> est la difficulté en question.</li>
                  </ul>
                  </li>

                  <li><code>--demiAuto</code> : si l'attaque rate, on considère juste que les saves partiels sont automatiquemet réussi. Ça signifie en général que la cible prend au moins la moitié des dégâts.</li>
                  <li><code>--dmSiRate <i>dmg</i></code> : si l'attaque rate, la cible est quand même touchée et se voit infliger <i>dmg</i> dégâts</li>
                  <li><code>--save <i>carac seuil</i></code> : même effet que <code>--psave</code>, mais pour annuler le dernier <code>--effet</code> ou <code>etat</code> (aucun effet sur les DM). Si on rajoute un argument <code>demiDuree</code> au save, alors la réussite du save ne fait que diviser par 2 sa durée.</li>
                  <li><code>--saveDM <i>carac seuil</i></code> : même effet que <code>--psave</code>, mais pour annuler l'ensemble des dégâts.</li>
                  <li><code>--saveParTour <i>carac seuil</i></code> : même effet que <code>--save</code>, mais donne droit à un jet à la fin de chaque tour au lieu d'un jet au moment de l'attaque.</li>
                  <li><code>--saveActifParTour <i>carac seuil</i></code> : même effet que <code>--save</code>, mais affiche un bouton pour faire le save dans la liste d'actions à chaque tour. Utile si les joueurs préfèrent jeter "eux-mêmes" le dé, ou si le save est sensé arriver au tour du joueur.</li>
                  <li><code>--saveParJour <i>carac seuil</i></code> : même effet que <code>--save</code>, mais donne droit à un jet à la fin de chaque jour au lieu d'un jet au moment de l'attaque.</li>
                  <li><code>--fx <i>effet</i></code> : ajoute un <a href="https://wiki.roll20.net/Custom_FX">effet</a> qui part de l'attaquant à la cible. Si l'attaque rate, l'effet rate aussi, d'autant plus que le jet d'attaque est loin de la défense. Il est possible d'utiliser un effet que vous avez défini vous-même en utilisant l'option <code>--fx custom <i>nom</i></code>, où <i>nom</i> est le nom de votre effet.</li>
                  <li><code>--targetFx <i>effet</i></code> : ajoute un <a href="https://wiki.roll20.net/Custom_FX">effet</a> au niveau de la cible (l'effet ne doit pas être directionnel). Comme avec <code>--fx</code>, on peut utiliser un effet qu'on a créé.</li>
                  <li>
                    <code>--si <i>condition</i></code> : l'attaque n'est possible que si <i>condition</i> est validée. Une condition peut être
                    <ul id="conditions">
                      <li><code>moins</code> <i>attribut</i> : vrai si l'attribut <i>attribut</i> de la cible est moins haute que celle de l'attaquant</li>
                      <li><code>etat</code> <i>e</i> : vrai si l'état <i>e</i> est actif sur l'attaquant. Cet état peut être un des états définis plus bas, ou un attribut quelconque.</li>
                      <li><code>etatCible</code> <i>e</i> : vrai si l'état <i>e</i> est actif sur toutes la cible. Cet état peut être un des états définis plus bas, ou un attribut quelconque.</li>
                      <li><code>attributCible</code> <i>attr</i> <i>val</i>: vrai si la cible possède un attribut <i>attr</i>, de valeur <i>val</i>, aux majuscules près. On peut optionnellement préciser qu'il s'agit d'un attribut par token en rajoutant le mot clé <code>local</code>, ou encore qu'il sagit d'un attribut de la fiche, avec éventuellement sa valeur par défaut, en ajoutant le mot clé <code>fiche <i>defaut</i></code>.</li>
                      <li><code>predicatCible</code> <i>predicat</i>: vrai si la cible possède un prédicat <i>predicat</i>. On peut aussi spécifier une valeur auquel le prédicat doit être égal.</li>
                      <li><code>typeCible</code> <i>type</i>: vrai si la cible est du type spécifié. Les types reconnus sont <code>animal</code>, <code>démon</code>, <code>dragon</code>, <code>fée</code>, <code>insecte</code>, <code>mauvais</code>, <code>mort-vivant</code>, <code>géant</code>, <code>gobelin</code>, et si le type n'est pas reconnu, va chercher si la race ou un prédicat correspondant.</li>
                      <li><code>deAttaque</code> <i>n</i> : vrai si le jet de dé d'attaque est supérieur ou égal à <i>n</i>.</li>
                      <li><code>touche</code> : vrai si l'attaque touche.</li>
                      <li><code>critique</code> : vrai si l'attaque est un critique.</li>
                      <li><code>echecCritique</code> : vrai si l'attaque est un échec critique.</li>
                    </ul>
                  </li>
                  <li><code>--if <i>condition</i></code> <i>options</i> <code>--endif</code>: permet de ne prendre en compte des options que si certaines conditions sont réalisées. Il est possible d'utiliser un <code>--else</code> pour activer des options quand les conditions ne sont pas réalisées. Attention, les options qui modifient une option précédente (comme <code>--valeur</code>) doivent apparaître au même niveau que l'option qu'elles modifient. Comme les conditions peuvent dépendre du dé d'attaque, un certain nombre d'options ne sont pas affectées par cette conditionnelle : tempeteDeMana, les options d'aoe (ligne, cone, disque, target), avecd12, avantage, auto, demiAuto, test, rate, touche, critique, echecCritique, pointsVitaux, tempsRecharge, sortilege, bonusCritique, disparition, affute, munition, tirDouble, semonce, tirDeBarrage, poudre, traquenard, feinte, asDeLaGachette, magique, tranchant, percant, contondant, pasDeDmg. Ne pas hésiter à me demander si vous aviez besoin que l'une de ces options puissent être conditionnelle.</li>
                  <li><code>--ifSaveFails <i>carac seuil</i></code> <i>options</i> <code> --endif</code> : comme <code>--if</code>, mais fait réaliser une jet de sauvegarde à la cible (comme avec <code>--save</code>), et si le test est raté, applique les options qui suivent. Un <code>--else</code> permet de choisir des options à appliquer quand le test est réussi. À utiliser seulement si on ne peut pas se contenter d'un <code>--save</code>, car ça marche moins bien.</li>
                  <li><code>--decrAttribute <i>nom</i></code> : l'attaque n'est possible que si l'attribut existe et si sa valeur est strictement positive. L'attaque diminue cette valeur de 1. Si cette option est utilisée à l'intérieur d'un <code>--if</code>, alors l'option se contente de diminuer l'attribut (on peut savoir si la valeur est positive grâce à <code>--if etat <i>nom</i></code>).</li>
                  <li><code>--decrLimitePredicatParTour <i>nom</i></code> : l'attaque n'est possible que si un prédicat <i>nom</i> existe et si elle n'a pas été utilisée plus de fois dans le tour que la valeur de ce prédicat. L'attaque augmente ce nombre de 1.</li>
                  <li><code>--tempsRecharge <i>effet</i> <i>duree</i></code> : l'attaque n'est possible que si l'effet est inactif sur l'attaquant, et de plus active l'effet sur l'attaquant pour la durée indiquée si l'attaque est possible. Il existe un effet temporaire générique, <code>rechargeGen(<i>desc</i>)</code> que vous pouvez utiliser si aucun effet existant ne correspond pour votre attaque.</li>
                  <li><code>--etat <i>e</i></code>: si l'attaque touche, la cible passe dans l'état <i>e</i>. Il est aussi possible de spécifier une caractéristique et un seuil (comme pour <code>!cof-set-state</code>) pour faire afficher à chaque tour une action permettant de se libérer de l'état.</li>
                  <li><code>--effet <i>e duree</i></code> : ajoute à la cible l'effet temporaire <i>e</i> pour la duree spécifiée. Pour que cela soit automatiquement mis à jour, il faut utiliser le turn tracker. Noter que l'argument de durée peut être omis pour certains effets, comme ceux qui par définition durent tout le combat.</li>
                  <li><code>--valeur <i>v</i></code> : spécifie une valeur au dernier effet mentionné.</li>
                  <li><code>--optionEffet <i>opt arg1 arg2 ...</i></code> : spécifie une option au dernier effet mentionné. L'option <i>opt</i> doit être donnée sans le <code>--</code> et sera passée telle quelle à l'effet, par exemple pour les dégâts périodiques.</li>
                  <li><code>--peur <i>seuil duree</i></code> : fait un effet de peur si l'attaque touche. Le <i>seuil</i> sert pour le test de sagesse de résistance à la peur (tient compte de la capacité <b>sans peur</b> du chevalier).</li>
                  <li><code>--affaiblirCarac <i>carac n</i></code> : l'attaque diminue la caractéristique <i>carac</i> de <i>n</i>. Si <i>carac</i> est <code>random</code>, le script tire une caractéristique au hasard.</li>
                  <li><code>--plus <i>dmg</i></code> : ajoute <i>dmg</i> dégâts. Attention, si <i>dmg</i> est un simple nombre, ces dégâts sont multipliés par les critiques (sauf si de type différent de l'attaque principale). Ainsi, <code>--plus [[1d6]]</code> donnera des dégâts multipliés par les critiques (car la fonction ne voit que le résultat du jet), alors que <code>--plus 1d6</code> ne le sera pas. </li>
                  <li><code>--plusCrit <i>dmg</i></code> : ajoute <i>dmg</i> dégâts en cas de réussite critique</li>
                  <li><code>--test</code> pour voir le résultat du jet d'attaque. On n'applique pas les résultats d'un touché.</li>
                  <li><code>--sournoise <i>n</i></code> : ajoute <i>n</i>d6 de dégâts d'attaque sournoise ou par surprise. Si l'option n'a pas d'argument, le nombre de dés rajoutés sera celui associé à un prédicat <code>attaqueSournoise</code>, et si l'attaquant n'a pas de prédicat <code>attaqueSournoise</code>, l'attaque ajoute juste 1d6. Le script limite le nombre d'attaque sournoise par personnage à 1 par tour. On peut augmenter ce nombre en utilisant un prédicat <code>sournoisesParTour</code>, de valeur la limite au nombre de sournoises pour ce personnage.</li>
                  <li><code>--magique</code> : les dégâts sont magiques. On peut passer en argument le niveau de magie. Il est utilisé contre les créatures immunisées aux armes. Le niveau par défaut est 1.</li>
                  <li><code>--+<i>k</i></code> : l'attaque utilise une arme magique +<i>k</i>. Pratique à mettre dans les modificateurs de l'attaque (dans ce cas, on n'a pas les <code>--</code>), cela rajoute les bonus au toucher et aux dégâts, et indique que les dégâts sont magiques. Si un niveau de magie est spécifié, rajoute <i>k</i> à ce niveau.</li>
                  <li><code>--feu</code>, <code>--acide</code>, <code>--electrique</code>, <code>--froid</code>, <code>--sonique</code>, --<code>poison</code>, --<code>maladie</code>, <code>--argent</code>, <code>--drain</code>, <code>--energie</code>&nbsp;: les dégâts sont de type feu, acide, électrique, froid, sonique, poison, maladie, argent, drain ou énergie. Le type spécifie uniquement le dernier <code>--plus</code> précédent cette option, ou si il n'y en a pas, celui des dégâts principaux. Seul le dernier type spécifié est pris en compte (pas de type multiple pour l'instant). Le type affecte différents attributs, et aussi la couleur d'affichage des dégâts.</li>
                  <li><code>--beni</code> : les dégâts sont d'une source sainte ou bénie. Sert principalement à signaler pour les résistances aux dégâts qui peuvent dépendre de cela (genre RD 5/beni).</li>
                  <li><code>--tranchant</code>, <code>--percant</code>, <code>--contondant</code> : précise le type d'arme (si pertinent), pour pouvoir utiliser les RD spécifiques à un type d'arme.</li>
                  <li><code>--ignoreRD</code> : l'attaque ignore les RD et division de DMs. Il est possible de donner en argument une valeur de RD ignorée, de sorte que l'attaque ignore les RD jusqu'à cette valeur. Par exemple, pour une arme en adamantium, on pourra écrire <code>--ignoreRD 5</code>.</li>
                  <li><code>--ignoreMoitieRD</code> : l'attaque ignore la moitié de la RD.</li>
                  <li><code>--sortilege</code> pour indiquer qu'il s'agit d'un sortilège, de façons à pouvoir appliquer tous les effets spécifiques aux sorts. Cette options devrait être passées pour toutes les capacités suivies d'une étoile dans le livre des règles. En particulier, tout sortilege ignore les malus d'obstacles.</li>
                  <li><code>--reroll1</code> : relance les 1 aux dés de dégats. À noter que cela ne concerne que les dés de base de l'attaque, pas les DM supplémentaire. </li>
                  <li><code>--explodeMax</code> : relance les valeurs maximum aux dés de DM de base, et rajoute le nouveau résultat (qui lui-même explose).</li>
                  <li><code>--mana <i>n</i></code> : l'attaque coûte <i>n</i> points de mana. Si l'attaque provoque un effet temporaire, le script essaiera de le supprimer à la mort du lanceur (même avec un coût nul).</li>
                  <li><code>--rang <i>n</i></code> : indique le rang de la capacité utilisée, si besoin. Utilisé par l'option <code>--tempeteDeMana</code>.</li>
                  <li><code>--tempeteDeMana <i>liste</i></code> : indique des effets de tempête de mana. La liste peut contenir un nombre (pour l'effet intense), <code>duree</code>, <code>rapide</code>, <code>portee</code> et <code>altruiste <i>id</i></code>. Si le rang du sort est spécifié (par l'option <code>--rang</code>, un message est affichée si le coût en mana est supérieur au rang. Si la liste d'options est vide ou ne contient que <code>altruiste</code>, le script affiche un menu dans le chat pour spécifier les options de tempête de mana. Il est possible d'utiliser les règles de mana totale pour les coûts de tempête de mana (à activer avec <code>!cof-options</code>).</li>
                  <li><code>--magieEnArmure</code> : applique un malus à l'attaque égale au rang du sort + le malus d'armure de l'attaquant. On peut ajouter un argument optionnel : soit un nombre qui va remplacer le rang dans cette formule, soit <code>mana</code> qui va augmenter le coût en mana de l'attaque en fonction de l'armure portée.</li>
                  <li><code>--limiteParJour <i>l</i></code> : limite le nombre d'utilisations de cette attaque à <i>l</i> fois par jour. On peut préciser un nom après <i>l</i>, qui va correspondre à une ressource pouvant être partagée avec d'autres attaques ou d'autres effets (voir <code>!cof-effet-temp</code>). Par défaut, le nom de cette ressource est le label de l'attaque.</li>
                  <li><code>--limiteParCombat</code> : même effet que la limite par jour. Si aucun argument n'est donné, la limite est de une fois par combat.</li>
                  <li><code>--munition <i>nom</i> <i>taux</i></code> : l'attaque utilise des munitions dont on garde le compte. Le nombre de munitions doit être inscrit dans un attribut <code>munition_<i>nom</i></code>. <i>nom</i> ne doit pas contenir de blanc, mais à l'affichage les <code>_</code> seront remplacés par des blancs. La valeur courante de l'attribut est le nombre qu'il reste sur le personnage, alors que le maximum contient ce qu'il a plus ce qu'il peut récupérer après le combat. À chaque attaque portée, une munition est utilisée, et il y a <i>taux</i> chances (sur 100) que la munition ne soit pas récupérable. En fin de combat, on considère que le personnage récupère toutes les munitions récupérables. Par défaut, le taux de pertes est de 100&nbsp;%. À noter que cette option devrait être inutile pour les armes de jet qui ont déjà leur propre cases sur la fiche.</li>
                  <li><code>--aussiArmeDeJet <i>L</i></code> : permet d'indiquer que l'arme peut aussi être employée comme arme de jet. <i>L</i> doit être le label de l'attaque avec cette arme en tant qu'arme de jet. Cela permet de tenir compte des cas où l'arme a été lancée et ne peut donc plus être utilisée au corps à corps. Si l'arme est utilisée à distance, le script va automatiquement utiliser l'attaque <i>L</i>.</li>
                  <li><code>--arcComposite <i>n</i></code> : augmente les DM du modificateur de force, (qui peut être négatif), mais sans dépasser <i>n</i>. Si le modificateur est strictement inférieur à <i>n</i>, l'attaque se fait avec un malus de -2.</li>
                  <li><code>--seulementDistance</code> : l'attaque ne peut être réalisée que contre un adversaire à distance.</li>
                  <li><code>--vampirise</code> : soigne de tous les DM infligés, quel que soit leur type. Il est possible de soigner un pourcentage des dégâts : pour cela, préciser le pourcentage entier après l'option. Par exemple, pour une attaque qui soigne de la moitié des dégâts infligés, on pourra mettre <code>--vampirise 50</code>. À noter que les soins se cumulent avec les dégâts de type drain.</li>
                  <li><code>--seulementVivant</code> : n'affecte que les cibles vivantes</li>
                  <li><code>--forceMinimum <i>n</i></code> : l'attaque n'est possible que si l'attaquant a au moins <i>n</i> en force.</li>
                  <li><code>--necromancie</code> : l'attaque est de la nécromancie</li>
                  <li><code>--ferFroid</code> : multiplie par 2 les dégâts contre les fées et les démons (le script reconnaît certaines races et les prédicats <code>démon</code> et <code>fée</code>).</li>
                  <li><code>--tueurDe <i>categorie</i></code> : bonus de +2 en attaque et +2d6 DM contre les espèces appartenant à la catégorie (voir la condition <code>typeCible</code>.</li>
                  <li><code>--tueurDeGrands</code> : bonus de +1d6 DM contre les créatures de taille grande et +2d6 DM contre les créatures de taille énorme ou plus.</li>
                  <li><code>--ignoreObstacles</code> : ignore les tokens sur le trajet. Ça semble nécessaire pour les attaques magiques d'après Kegron.</li>
                  <li><code>--retourneEnMain</code> : L'arme de jet revient en main après l'attaque.</li>
                  <li><code>--puissant</code> : augmente la valeur max des dés de dégâts de 2. Si <code>--puissant</code> est suivi d'un argument <i>effet</i>, on teste la présence d'un attribut <i>effet</i><code>Puissant</code> pour décider si l'attaque est puissante ou non. Il est aussi possible de donner <code>oui</code> ou <code>non</code> en argument (ce n'est alors pas considéré comme un effet). <code>--puissant portee</code> permet de doubler la portée de l'attaque (utile pour l'option de Magie Puissante)</li>
                  <li><code>--attaqueAssuree</code> : implémente une attaque assurée (+5 à l'attaque, dégâts divisés par 2, critique impossible).</li>
                  <li><code>--attaqueRisquee</code> : implémente une attaque risquée (+2 à l'attaque au contact, -4 en DEF pendant un tour).</li>
                  <li><code>--attaqueDeGroupe <i>n</i></code> : <i>n</i> est le nombre de créatures qui attaquent ; implémente une attaque de groupe (+2 à l'attaque par attaquant au-delà du premier, x2 DMG si l'attaque dépasse la DEF de 5 ou plus, x3 DMG si critique).</li>
                  <li><code>--attaqueAcrobatique</code> : l'attaquant effectue un test d'acrobatie difficulté 15, et s'il réussit, l'attaque bénéficie des effets d'une sournoise. On peut en option préciser le nombre de dés de cette attaque sournoise.</li>
                  <li><code>--strigeSuce</code> : option spécifique aux striges. Donne le malus de -3 en DEF et compte la quantite sucée. Quand cette quantité arrive à 6, enlève le malus de DEF et rend la cible affaiblie.</li>
                  <li><code>--mainsDEnergie</code> : +2 à +5 à l'attaque, selon l'armure de la cible</li>
                  <li><code>--semonce</code> : +5 au touché et +1d6 aux DM (ne change pas les charges de l'arme).</li>
                  <li><code>--avantage</code> : lance un dé de plus en attaque et garde le meilleur. plusieurs arguments avantage se cumulent et sont annulés par les désavantages (syntaxe alertnative: (<code>--m2d20</code>)</li>
                  <li><code>--desavantage</code> : lance un dé de plus en attaque et garde le moins bon. plusieurs arguments désavantage se cumulent et sont annulés par les avantages.</li>
                  <li><code>--avecd12</code> : lance un d12 au lieu du d20 pour le jet d'attaque. L'attaque est impossible si l'attaquant est déjà affaibli.</li>
                  <li><code>--avecd12crit</code> : comme <code>--avecd12</code>, mais le jet peut faire un critique. La plage de critique est divisée par 2, arrondie à l'inférieur. Ainsi si le d20 sevait critiquer sur un 20 seulement, le d12 ne fait pas de critique. Il fait un critique sur un 12 si le d20 devait faire un critique sur un 19 ou un 18, et ainsi de suite.</li>
                  <li><code>--incrDmgCoef <i>n</i></code> : augmente le coefficient des dégâts de base de 1. Les dégâts de base comprennent les dés de dommage de l'arme (ou du sort), plus tous les bonus constants. Le coefficient par défaut est de 1, et une réussite critique augmente ce coefficient de 1.</li>
                  <li><code>--incrCritCoef <i>n</i></code> : augmente le coefficient des dégâts critiques de <i>n</i> (1 si on ne donne pas d'argument).</li>
                  <li><code>--diviseDmg <i>n</i></code> : divise les dégâts de base par <i>n</i>.</li>
                  <li><code>--maxDmg</code> : l'attaque inflige le maximum de DM permis par les dés de base.</li>
                  <li><code>--runeDePuissance</code> : l'arme est enchantée avec une rune de puissance permanente.</li>
                  <li><code>--difficultePVmax</code> : la difficulté du jet d'attaque est le maximum de PVs au lieu de la défense.</li>
                  <li><code>--difficultePV</code> : la difficulté du jet d'attaque est la valeur courante des PVs au lieu de la défense.</li>
                  <li><code>--difficulteCarac <i>carac</i></code> : la difficulté du jet d'attaque est une des caractéristiques de la cible (sous forme de code à 3 lettres, <code>FOR</code>, <code>DEX</code>, etc). Il est possible de prendre le meilleur de 2 caractéristiques en écrivant les 2 noms collés. Par exemple, pour viser le meilleur de l'intelligence et du charisme, on écrira <code>--difficuletCarac INTCHA</code>.</li>
                  <li><code>--affute</code> : augmente de 1 les chances de crit et +1d6 aux DM des crit.</li>
                  <li><code>--tirDeBarrage</code> : ignore la charge, multiplie les DM par 2 et message pour undo si la cible bouge.</li>
                  <li><code>--tirAveugle</code> : ignore le malus de tir sur une cible invisible.</li>
                  <li><code>--enflamme</code> : enflamme la cible, lui infligeant 1d6 DM par tour. Les flammes s'éteindent sur un 1 ou 2. Si l'option <code>--puissant</code> est donnée en conjonction, les DM augmentent de 1.</li>
                  <li><code>--malediction</code> : maudit la cible pour 3 jets.</li>
                  <li><code>--asDeLaGachette</code> : ajoute 1d6 DM si le jet d'attaque dépasse une DEF de 25.</li>
                  <li><code>--armeDArgent</code> : bonus de +2 en attaque et 1d6 aux DM si la cible est un mort-vivant ou un démon (utilise le champ <code>Race</code> de la fiche ou si présent un prédicat <code>mortVivant</code>).</li>
                  <li><code>--pietine</code> : si l'attaquant est de taille au moins égale à celle de la cible (ou si la taille de l'un des deux n'est pas connue), fait un test opposé de FOR. En cas d'échec de la cible, elle est renversée et les DM sont doublés.</li>
                  <li><code>--percute</code> : comme <code>--pietine</code>, mais la cible est en plus projetée à 1d6+1 mètres et étourdie si elle rate un test de CON difficulté 15, renouvelable chaque tour.</li>
                  <li><code>--feinte</code> : L'attaque ne fait pas de dégât, mais un bonus de +5 en attaque est donné sur les attaques du tour suivant sur cette cible (par celui qui a fait la feinte), et +2d6 DM si l'attaque fictive était un succès. Si l'attaquant possède un <a href=#predicats>prédicat</a> <code>bonusFeinte</code>, c'est la valeur de ce prédicat qui est donné en bonus aux attaques, à la place de +5.</li>
                  <li><code>--enveloppe <i>difficulte type expr</i></code> : si l'attaque touche, elle a une chance d'envelopper la cible. Dans ce cas, un bouton apparaît qui lance un test en opposition. Si celui-ci est remporté par l'attaquant, <i>difficulte</i> est la difficulté du test pour se sortir de l'enveloppement, <i>type</i> est soit <code>label</code>, et dans ce cas, <i>expr</i> doit être le label d'une attaque de l'attaquant, soit <code>ability</code>, et dans ce cas, <i>expr</i> est le nom d'une ability de l'attaquant. Cette attaque ou ability est appelée pour les dégâts périodiques. Si les deux derniers arguments sont ommis, le script prend <code>label</code> et le label de l'attaque courante, et si le premier argument est ommis, la difficulté est de 15.</li>
                  <li><code>--etreinte <i>difficulte</i></code> : si l'attaque touche, il y a une chance que l'attaquant puisse s'enrouler autour de la cible. Dans ce cas, un bouton apparaît qui lance un test en opposition. Si celui-ci est remporté par l'attaquant, <i>difficulte</i> est la difficulté du test pour se sortir de l'enveloppement. Cela fera apparaître un bouton pour les dégâts de l'étreinte, par défaut <code>1d6</code>, mais on peut spécifier une autre expression pour les dégâts (optionelle, juste après la difficulté).</li>
                  <li><code>--ouvertureMortelle</code> : touche automatiquement, fait des dégât comme en cas de critique et multiplie par 2 les dégâts d'attaque sournoise (si il y en a).</li>
                  <li><code>--rate</code>, <code>--touche</code>, <code>--critique</code>, <code>--echecCritique</code>, <code>--pasDEchecCritique</code> : options pour tricher : le résultat des dés donne toujours le résultat voulu.</li>
                  <li><code>--ligne</code> : l'attaque porte sur toutes les cibles à portée, entre l'attaquant et le token ciblé. Si le token ciblé est plus proche que la portée de l'attaque, les tokens derrière le token ciblé sont aussi visés. Pour permettre de viser un point quelconque, on peut utiliser un personnage dédié avec un maximum de 0 pv. À chaque fois qu'un token représentant ce personnage est utilisé comme cible de <code>--ligne</code>, le token est enlevé de la carte.</li>
                  <li><code>--disque <i>r</i></code> : l'attaque porte sur toutes les cibles dans le disque de centre le token ciblé et de rayon <i>r</i>. Comme pour <code>--ligne</code>, on peut utiliser un token cible qui sera supprimé après l'attaque. À noter que l'attaquant lui-même peut prendre des dégâts, sauf si l'attaque a une portée nulle et que l'attaquant se cible lui-même (attaque centrée sur le lanceur). On peut donner en argument optionel le mot <code>souffleDeMort</code> pour ne valider l'attaque que si le centre du disque est un personnage mort depuis moins d'un tour et ne garder que les alliés de ce personnage de niveau inférieur ou égal.</li>
                  <li><code>--cone <i>angle</i></code> : cible toutes les créatures dans un cône de sommet l'attaquant, d'angle <i>angle</i> degrés (90 degrés par défaut), et séparé en deux par le segment joignant l'attaquant et le token visé.</li>
                  <li><code>--explosion</code> : si l'attaque n'est pas déjà un disque, considère qu'elle forme un disque de rayon égal à la portée. L'attaquant est automatiquement exclus de la zone.</li>
                  <li><code>--dmCible <i>dmg</i></code> : utilisé conjointement aux options de zone ci-dessus, cette option permet de remplacer les dommages de base de l'attaque spécifiquement sur la cible sélectionnée lors de l'attaque</li>
                  <li><code>--saufAllies</code> : ne cible pas les allies dans la zone ou les cibles spécifiées.</li>
                  <li><code>--target <i>id</i></code> : ajoute une cible à l'attaque (s'ajoute à la cible principale et aux options d'aoe).</li>
                  <li><code>--ciblesDansDisque <i>n</i></code> : impose que les différentes cibles soient dans un disque de rayon <i>n</i>.</li>
                  <li><code>--ricochets <i>n</i></code> : l'arme de jet peut faire <i>n</i> ricochets. Une cible ne peut être touchée qu'une fois par attaque.</li>
                  <li><code>--message <i>texte</i></code> : ajoute une ligne avec le message dans la fenêtre de l'attaque. Attention, <i>texte</i> ne doit pas contenir la séquence <code> --</code>.</li>
                  <li><code>--secret</code> : affiche les jets et résultats de l'attaque seulement aux joueurs qui contrôlent l'attaquant ou ses cibles, ainsi qu'au MJ.</li>
                  <li><code>--allonge <i>n</i></code> : ajoute <i>n</i> mètres à la portée d'une attaque au contact. L'allonge peut être un nombre à virgule et même négative.</li>
                  <li><code>--canaliseParFamilier</code> : le point de départ de l'attaque est le familier s'il est actif sur la carte.</li>
                  <li><code>--soundAttack <i>son</i></code> : joue le son <i>son</i>, à moins qu'une version plus longue de l'option (voir ci-dessous) n'existe et qu'elle soit active.</li>
                  <li><code>--soundAttackEchec <i>son</i></code> : joue le son <i>son</i> lorque l'arme fait un echec, sauf si c'est un échec particulier et une version plus longue existe.</li>
                  <li><code>--soundAttackEchecCritique <i>son</i></code> : joue le son <i>n</i> lorque l'arme fait un echec critique</li>
                  <li><code>--soundAttackEchecClignotement <i>son</i></code> : joue le son <i>son</i> lorque l'arme fait un echec par clignotement</li>
                  <li><code>--soundAttackSucces <i>son</i></code> : joue le son <i>son</i> lorque l'arme fait un succès</li>
                  <li><code>--soundAttackSuccesCritique <i>son</i></code> : joue le son <i>n</i> lorque l'arme fait un succès critique</li>
                  <li><code>--soundAttackSuccesChampion <i>son</i></code> : joue le son <i>son</i> lorque l'arme fait un succès champion</li>
                  <li><code>--imgAttack <i>img</i></code> : Affiche dans le chat l'image (.jpg/.png/.gif) <i>img</i>, à moins qu'une version plus longue de l'option (voir ci-dessous) n'existe et qu'elle soit active.</li>
                  <li><code>--imgAttackEchecCritique <i>img</i></code> : Affiche dans le chat l'image (.jpg/.png/.gif) <i>img</i> lorque l'arme fait un echec critique</li>
                  <li><code>--imgAttackEchec <i>img</i></code> : Affiche dans le chat l'image (.jpg/.png/.gif) <i>img</i> lorque l'arme fait un echec</li>
                  <li><code>--imgAttackEchecClignotement <i>img</i></code> : Affiche dans le chat l'image (.jpg/.png/.gif) <i>img</i> lorque l'arme fait un echec par clignotement</li>
                  <li><code>--imgAttackSuccesCritique <i>img</i></code> : Affiche dans le chat l'image (.jpg/.png/.gif) <i>img</i> lorque l'arme fait un succès critique</li>
                  <li><code>--imgAttackSucces <i>img</i></code> : Affiche dans le chat l'image (.jpg/.png/.gif) <i>img</i> lorque l'arme fait un succès</li>
                  <li><code>--imgAttackSuccesChampion <i>img</i></code> : Affiche dans le chat l'image (.jpg/.png/.gif) <i>img</i> lorque l'arme fait un succès champion</li>
                </ul>
              </div>
              <h4 class="text-secondary">Réduction des dégâts</h4>
              <div class="decalage">
                <h5>Fonctionnement de base</h5>
                <ul>
                  <li>Le script utilise les cases RD et Casque présentes sur les fiches.</li>
                  <li>Il est possible d'indiquer plusieurs RD différentes, il suffit de les séparer par une virgule.</li>
                  <li>Toutes les RD se cumulent.</li>
                  <li>Le script se base sur les types de dégâts pour choisir d'appliquer ou non les dégâts.</li>
                  <li>Pour les armes magiques, il est possible de spécifier à la fois le type de l'arme (par exemple <code>--tranchant</code>) et <code>--magique</code>.</li>
                </ul>
                <h5>RD simple</h5>
                <p>Dans le cas d'une RD simple (résistance à tous les dégâts), il suffit d'indiquer un nombre. Exemple : <code>3</code></p>
                <h5>RD à un type de dégâts particuliers</h5>
                <p>Pour une RD qui ne s'applique qu'à un type de dégâts particuliers, indiquer le type et la valeur séparés par <code>:</code>. Exemple : <code>feu:5</code>. On peut aussi spécifier une RD conte tous les types élémentaires avec le mot clé <code>elementaire</code>. On peut aussi avoir une RD qui ne s'applique qu'aux attaques à distance avec le mot clé <code>distance</code>.</p>
                <h5>RD sauf un ou plusieurs types de dégâts particuliers</h5>
                <p>Pour une RD qui s'applique tout le temps sauf un ou plusieurs types de dégâts particuliers, indiquer la valeur puis <code>/</code> puis les différents types séparés par <code>_</code>. Exemple <code>/</code>. Exemple : <code>5/argent_magique</code><br/>
                Pour une RD qui s'appliquerait à tous les types d'armes sauf une, utiliser à la place une résistance aux 2 autres types d'armes. Exemple, pour 5/tranchant, utiliser <code>percant:5,contondant:5</code>.</p>
                <h5>RD critique</h5>
                <p>Utiliser un <a href=#predicats>prédicat</a> <code>RD_critique</code> avec comme valeur la résistance aux critiques. Se combine avec une éventuelle RD critique fournie par le port d'un casque.</p>
                <h5>Résistances</h5>
                <p>Pour les effets qui divisent la dégâts subits d'un type donné, utilisez un <a href=#predicats>prédicat</a> <code>resistanceA_<i>type</i></code>. Une resistance à tous les dégâts non-magiques est possible avec <code>resistanceA_nonMagique</code>.Il est aussi possible d'octroyer une résistance temporaire, par exemple une potion de résistance au feu pourra être simulée par la commande <code>!cof-set-attribute resistanceA_feu true</code>. Cela ne sera pas visible dans les prédicats, local à un mook, et il faut ensuite effacer l'attribut à la fin de l'effet.</p>
                <p>Pour les effets qui divisent par 2 les dégâts ou la durée, utiliser un <a href=#predicats>prédicat</a> <code>diviseEffet_<i>type</i></code>.</p>
                <p>Pour les effets qui donnent un bonus aux tests pour résister aux effets ou dégâts d'un certain type, utiliser un <a href=#predicats>prédicat</a> <code>bonusSaveContre_<i>type</i></code> de valeur le bonus accordé. Par exemple, un objet qui donnerait +5 à tous les tests pour résister au poison pourrait être encodé par un prédicat <code>bonusSaveContre_poison</code> de valeur <code>5</code>.</p>
                <h5>Armures/Boucliers de Protection (COF p. 203)</h5>
                <p>ajoutez un <a href=#predicats>prédicat</a> <code>armureProtection</code> ou <code>bouclierProtection</code>. Le script détecte si l'équipement est porté ou pas via la fiche, et fonctionne spécifiquement contre les attaques qui utilisent <code>--sournoise</code>. Il est aussi possible de spécifier le port d'un anneau de protection ayant le même effet (prédicat <code>anneauProtection</code>.</p>
              </div>
              <h4 class="text-secondary">Manoeuvres</h4>
              <div class="decalage">
                <p><code>!cof-action-defensive</code> avec comme argument soit <code>simple</code>, soit <code>totale</code> donne le bonus en défense de l'action défensive (p 71). Cette action est disponible par défaut dans la liste des <a href="#actions_du_tour">actions du tour</a>. Alternativement, si vous n'utilisez pas cette méthode, vous pouvez créer une macro accessible à tous les tokens, <code>!cof-action-defensive ?{Action défensive|simple|totale}</code>.</p>
                <p>Les manoeuvres risquées peuvent être lancées avec la commande <code>!cof-manoeuvre @{selected|token_id} @{target|token_id} <i>effet</i></code>. Liste des manoeuvres : <code>aveugler</code>, <code>bloquer</code>, <code>desarmer</code>, <code>faireDiversion</code>, <code>menacer</code>, <code>renverser</code>, <code>repousser</code>, <code>tenirADistance</code>.</p>
                <p>Il est aussi possible de faire un test d'attaque opposée avec la commande <code>!cof-test-attaque-opposee @{selected|token_id} @{target|token_id}</code>.</p>
              </div>
              <h4 class="text-secondary">Recharger des armes : <code>!cof-recharger <i>N</i></code></h4>
              <div class="decalage">
                <p>Il faut un <a href=#predicats>prédicat</a> <code>charge</code> dans le champ <code>SPÉCIAL</code> des armes qui ont besoin d'être chargées pour fonctionner. On peut associer un nombre au prédicat, pour indiquer un maximum de charges supérieur à 1. Noter que si on a 2 armes à une charge, il faut utiliser un maximum de 2.<br />
                Recharge l'arme <i>N</i> (augmente les charges d'un). Les armes sont toutes rechargées à la fin d'un combat.<br />
                La commande admet un argment optionel <code>--grenaille</code> pour charger (une arme à poudre) avec de la grenaille.
                </p>
              </div>
              <h4 class="text-secondary" id="degainer">Dégainer une arme : <code>!cof-degainer <i>N</i></code></h4>
              <div class="decalage">
                <p>Pour certaines capacités, (commme <strong>Plus vite que son ombre</strong> ou <strong>Désarmer</strong>), il peut être utile de savoir quelle arme est en main. Pour cela, le script peut utiliser deux méthodes&nbsp;:
                <ul>
                  <li><code>!cof-degainer <i>L</i></code> où <i>L</i> est le label d'une des attaques sur la fiche de personnage : cela fait rengainer l'arme en main et dégainer l'arme correspondant à cette attaque. Si le label ne correspond à aucune attaque (ou qu'on ne donne pas de label), l'action fait rengainer l'arme en main. On peut donner en argument 2 labels d'armes, pour faire dégainer à la fois une arme dans la main droite (le premier label) et une arme dans la main gauche. <code>!cof-degainer <i>l</i> gauche</code> permet de dégainer uniquement une arme dans la main gauche. À noter que si une arme est notée comme arme gauche dans l'attaque, alors elle est toujours portée en main gauche. L'ordre de rengainer fait rengainer les deux armes si le personnage porte une arme en main gauche.</li>
                  <li>Si on attaque avec <code>!cof-attack <i>tok1 tok2 L</i></code>, et que l'attaque est de type <code>Arme 1 main</code>, <code>Arme 2 mains</code> ou <code>Arme gauche</code>, alors on considère qu'on doit dégainer cette arme pour pouvoir l'utiliser. Le script envoie le message et considère ensuite l'arme comme étant en main, au MJ de vérifier que le joueur dispose bien d'une action de mouvement pour le faire.</li>
                  <li>En fin de combat, si le personnage a la capacité frappe du vide, le script va automatiquement lui faire rengainer son arme.</li>
                  <li>Enfin, en fin de combat, si le personnage possède un prédicat <code>armeParDefaut</code>, le script va lui faire dégainer l'arme dont le label est la valeur du prédicat. Donc si le prédicat n'a pas de label associé, le personnage va rengainer son arme.</li>
                </ul>
                <p>Dans tous les cas, si le personnage dégaine une arme à 2 mains, le script fait enlever le bouclier, et il le fait remettre si on passe d'une arme à 2 mains à une arme à 1 main.</p>
                <p>Si l'arme contient dans le champ <code>SPÉCIAL</code> le prédicat <code>DEF</code> de valeur <i>n</i> (par exemple <code>DEF:2</code>), l'arme est considérée comme une arme de parade qui augmente la défense de <i>n</i> quand elle est portée. <p>
                </p>
              </div>
              <h4 class="text-secondary" id="degainer">Couvert :<code>!cof-bonus-couvert <i>b</i></code></h4>
              <div class="decalage">
                Pour donner un bonus en DEF contre toutes les attaques à distance, on peut utiliser <code>!cof-bonus-couvert ?{Bonus du couvert?}</code> en sélectionnant les tokens bénéficiant du couvert. La commande accepte un argument <code>--secret</code> permettant de ne pas faire connaître l'action du personnage à tous les joueurs. Pour ne plus être à couvert, il suffit de lancer la commande sans argument.
              </div>
              <h4 class="text-secondary">Échecs critiques&nbsp;:</h4>
              <p>En cas d'échec critique à une attaque, le script va suggérer des effets d'échec critique inspirés de <a href="">cette table suggérée par l'auteur du jeu</a>. Le script proposera même dans la plupart des cas un bouton qui automatisera les lancers de dés et l'application de l'effet, si relevant.</p>
              <p>Il est aussi possible d'utiliser une table personnelle, non-automatisée (voir les options d'affichage, !cof-options affichage). La table utilisée (Echec-Critique-Contact) peut être modifiée par le MJ.</p>
              <h4 class="text-secondary">Dégâts directs (sans attaquant, ou aire d'effet trop complexe pour !cof-attack) : <code>!cof-dmg <i>dm</i></code></h4>
              <div class="decalage">
                <p>Applique des dégâts à tous les tokens sélectionnés. L'argument <i>dm</i> peut être un inline roll. Utile par exemple pour les chutes, ou bien les dégâts d'environnement, voire de pièges.<br />
                Arguments optionels: une partie des options de <code>!cof-attack</code>, dont le type, et par exemple <code>--psave <i>carac seuil</i></code> (jet de <i>carac</i>, si supérieur au <i>seuil</i>, les dégâts sont divisés par 2).
                </p>
                <p> Il est possible d'infliger des dégâts sur la durée en utilisant la commande <code>!cof-effet-temp dotGen(<i>nom</i>) <i>duree</i> --valeur <i>expr</i> <i>type</i></code>. Les arguments de <code>--valeur</code> donnent l'expression à évaluer, de type lancé de dé, et le type de dégâts. Par défaut, si rien n'est précisé, c'est <code>1d6</code> et <code>normal</code>. On peut utiliser les options habituelles de <code>!cof-effet-temp</code>. Ainsi, si on souhaite infliger des dégâts de poison de 1d4+1 par tour, pendant 10 tours, avec un jet de CON difficulté 12 pour arrêter l'effet, on pourra écrire <code>!cof-effet-temp dotGen(monPoison) 10 --saveParTour CON 12 --valeur 1d4+1 poison</code>.
                </p>
              </div>
              <h4 class="text-secondary">Sortir du combat : <code>!cof-fin-combat</code></h4>
              <div class="decalage">
                <p>Ferme aussi le tracker de tour. Encore à mettre en macro dans la barre du MJ (macro automatiquement générée par <code>!cof-set-macros</code>). Permet de tenir compte de pleins de capacités qui durent un combat, ou utilisables une seule fois par combat,...</p>
              </div>
              <h4 class="text-secondary">Utilisation spéciale des images et son des armes</h4>
              <div class="decalage">
                <p>Les images des armes et les sons peuvent être redéfinis dans le champ détail de l'arme.</p>
                <p>Pour ce faire vous devez ajouter les urls des images au format suivant dans la description de l'arme :</p>
                <p><code>[<i>Type de réussite</i>] <i>url de l'image</i> [<i>Type de réussite</i>]</code></p>
                <p>Par exemple : <code>[img-attack-echec-critique]https://media0.giphy.com/media/3og0INyCmHlNylks9O/giphy.gif[img-attack-echec-critique]</code></p>
                <p>Les <i>types de réussite</i> que vous pouvez mettre en image sont :</p>
                <div class="decalage">
                  <ul>
                    <li><code>[img-attack-echec-critique] <i>img</i></code> : Affiche dans le chat l'image (.jpg/.png/.gif) <i>img</i> lorque l'arme fait un echec critique</li>
                    <li><code>[img-attack-echec] <i>img</i></code> : Affiche dans le chat l'image (.jpg/.png/.gif) <i>img</i> lorque l'arme fait un echec</li>
                    <li><code>[img-attack-echec-clignotement] <i>img</i></code> : Affiche dans le chat l'image (.jpg/.png/.gif) <i>img</i> lorque l'arme fait un echec par clignotement</li>
                    <li><code>[img-attack-succes-critique] <i>img</i></code> : Affiche dans le chat l'image (.jpg/.png/.gif) <i>img</i> lorque l'arme fait un succès critique</li>
                    <li><code>[img-attack-succes] <i>img</i></code> : Affiche dans le chat l'image (.jpg/.png/.gif) <i>img</i> lorque l'arme fait un succès</li>
                    <li><code>[img-attack-succes-champion] <i>img</i></code> : Affiche dans le chat l'image (.jpg/.png/.gif) <i>img</i> lorque l'arme fait un succès champion</li>
                  </ul>
                </div>
                <p>De la même manière vous pouvez ajouter des sons :</p>
                <p>[<i>Type de réussite</i>] <i>Nom du son dans votre jukebox</i> [<i>Type de réussite</i>]</p>
                <div class="decalage">
                  <ul>
                    <li><code>[sound-attack-echec-critique] <i>son</i></code> : joue le son <i>n</i> lorque l'arme fait un echec critique</li>
                    <li><code>[sound-attack-echec] <i>son</i></code> : joue le son <i>son</i> lorque l'arme fait un echec</li>
                    <li><code>[sound-attack-echec-clignotement] <i>son</i></code> : joue le son <i>son</i> lorque l'arme fait un echec par clignotement</li>
                    <li><code>[sound-attack-succes-critique] <i>son</i></code> : joue le son <i>n</i> lorque l'arme fait un succès critique</li>
                    <li><code>[sound-attack-succes] <i>son</i></code> : joue le son <i>son</i> lorque l'arme fait un succès</li>
                    <li><code>[sound-attack-succes-champion] <i>son</i></code> : joue le son <i>son</i> lorque l'arme fait un succès champion</li>
                  </ul>
                </div>
                <p>Par exemple : <code>[sound-attack-echec-critique]bang[sound-attack-echec-critique]</code></p>
                <p>Dans cette exemple le son nomé "bang" dans votre jutbox serra joué a chaque echec critique de cette arme</p>
              </div>
              <h3 class="text-info" id="soins">2.2 Soins :</h3>
              <div class="decalage">
                <h4 class="text-secondary"><code>!cof-soin @{selected|token_id} @{target|token_id} <i>x</i></code></h4>
                <div class="decalage">
                  <p><i>x</i> peut être un nombre, un jet de dé ou <code>leger</code>, <code>modere</code>, <code>groupe</code> ou <code>secondSouffle</code>.</p>
                  <p>Les deux premiers arguments sont optionnels. Si <code>!cof-soin</code> n'a qu'un seul argument, c'est interprété comme le montant des soins, et les tokens soignés sont ceux sélectionnés. Si <code>!cof-soin</code> n'a que 2 arguments, le premier argument est le token du soigneur, et les cibles doivent être désignées avec une option de sélection de groupe.</p>
                  <span>Options (en plus de options normales de commandes):</span>
                  <ul>
                    <li><code>--portee <i>n</i></code> : permet de spécifier une distance maximum entre le soigneur et le soigné (au-delà, le soin échoue)</li>
                    <li><code>--transfer</code> : le soin est payé avec les PV du soigneur</li>
                    <li><code>--mana <i>n</i></code> : demande au lanceur de payer <i>n</i> points de mana</li>
                    <li><code>--depasseLimite <i>n</i></code> : permet de lancer les sorts de soins léger, modéré ou de groupe quand la limite journalière est dépassée, mais en augmentant le coût en mana de <i>n</i> à chaque nouveau dépassement.</li>
                    <li><code>--limiteSoinsParJour <i>n</i></code> : limite le nombre total de PVs soignés par jour. Cette limite peut être associée à une ressource (spécifier en deuxième argument de l'option, peut contenir des espaces), de sorte que seuls les soins qui mentionnent cette ressource sont concernés par cette limitation. Cette option n'a de sens que si un soigneur est précisé.</li>
                    <li><code>--sacrifierPV</code> : le soigneur doit sacrifier autant de PV que le montant des soins (que ces soins soient utilisés ou non).</li>
                  </ul>
                </div>
              </div>
              <h3 class="text-info" id="repos">2.3 Repos et changement de jour</h3>
              <div class="decalage">
                <h4 class="text-secondary">Changement de jour</h4>
                <div class="decalage">
                  <p><code>!cof-nouveau-jour</code> : remise à zéro de toutes les limites journalières. </p>
                </div>
                <h4 class="text-secondary">Repos de plus de 8 h</h4>
                <div class="decalage">
                  <p>Fait récupérer 1 PR ou les points de vie correspondant à 1 PR, plus les points de mana.</p>
                  <ul>
                    <li><code>!cof-nouveau-jour --repos</code> : Pour une nuit qui se passe bien : fait l'effet d'un nouveau jour sur le monde, et, si aucun token n'est sélectionné, applique un repos de 8 h à tous les tokens de la page, sinon applique ce repos uniquement aux tokens sélectionnés.</li>
                    <li><code>!cof-recuperation --reposLong</code> : applique le repos aux tokens selectionnés, sans remettre à zéro les limites journalières.
                  </ul>
                </div>
                <h4 class="text-secondary">Repos de 10 minutes</h4>
                <div class="decalage">
                  <p><code>!cof-recuperation</code> : dépense 1 PR pour se soigner. À mettre en macro associée aux tokens, car tous les joueurs en ont besoin (généré par <code>!cof-set-macros</code>.</p>
                </div>
              </div>
              <h3 class="text-info" id="statut_etats">2.4 Statut et états</h3>
              <div class="decalage">
                <p><code>!cof-statut</code> affiche l'état courant de tous les tokens sélectionnés. Utile pour connaître facilement les états qui ne sont pas directement visibles sur un token (points de récupération, armes chargées, ...). Il est possible de rajouter l'affichage d'autres attributs que ceux sélectionnés par défaut par le script. Pour cela, utiliser un attribut <code>attributsDeStatut</code>, de valeur courante la liste des noms d'attributs à afficher, séparés par des virgules.</p>
                <h4 class="text-secondary" id="etats">États gérés en utilisant le statut des tokens</h4>
                <div class="decalage">
                  <p><code>!cof-set-state <i>etat</i> <i>[true|false]</i></code> permet de changer l'état des tokens sélectionnés. Si cet état concerne un personnage avec tokens liés (en liant la barre 1 aux points de vie), alors l'état persiste si on change de carte (utilisation d'un attribut hors fiche).</p>
                  <p>Liste des états et markers correspondants :</p>
                  <table>
                    <caption>LdB : Livre de Base, Comp : Compagnon</caption>
                    <thead>
                      <tr style="border-bottom: 1px solid black" >
                        <th scope="col">État</th>
                        <th scope="col">Source</th>
                        <th scope="col">Remarque</th>
                        <th scope="col" width="145px">Marker Std.</th>
                        <th scope="col" width="135px">Marker COF</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <th scope="row">Affaibli</hd>
                          <td>LdB p70</td>
                          <td>Apparaît sur la fiche perso</td>
                          <td><code>half-heart</code></td>
                          <td><code>cof-affaibli</code></td>
                      </tr>
                      <tr>
                        <th scope="row">Apeuré</hd>
                          <td></td>
                          <td>Victime d'un sort de Peur</td>
                          <td><code>screaming</code></td>
                          <td><code>cof-apeure</code></td>
                      </tr>
                      <tr>
                        <th scope="row">Assommé</hd>
                          <td>LdB p72</td>
                          <td></td>
                          <td><code>pummeled</code></td>
                          <td><code>cof-assomme</code></td>
                      </tr>
                      <tr>
                        <th scope="row">Aveuglé</hd>
                          <td>LdB p70</td>
                          <td>Change aussi la vision du token</td>
                          <td><code>bleeding-eye</code></td>
                          <td><code>cof-aveugle</code></td>
                      </tr>
                      <tr>
                        <th scope="row">Blessé</hd>
                          <td>LdB p177</td>
                          <td></td>
                          <td><code>arrowed</code></td>
                          <td><code>cof-blesse</code></td>
                      </tr>
                      <tr>
                        <th scope="row">Encombré</hd>
                          <td>Comp p103</td>
                          <td></td>
                          <td><code>frozen-orb</code></td>
                          <td><code>cof-encombre</code></td>
                      </tr>
                      <tr>
                        <th scope="row">Endormi</hd>
                          <td></td>
                          <td></td>
                          <td><code>sleepy</code></td>
                          <td><code>cof-endormi</code></td>
                      </tr>
                      <tr>
                        <th scope="row">Étourdi</hd>
                          <td>LdB p70</td>
                          <td></td>
                          <td><code>half-haze</code></td>
                          <td><code>cof-etourdi</code></td>
                      </tr>
                      <tr>
                        <th scope="row">Immobilisé</hd>
                          <td>LdB p70</td>
                          <td></td>
                          <td><code>cobweb</code></td>
                          <td><code>cof-immobilise</code></td>
                      </tr>
                      <tr>
                        <th scope="row">Invisible</hd>
                          <td></td>
                          <td>Sort d'invisibilité</td>
                          <td><code>ninja-mask</code></td>
                          <td><code>cof-invisible</code></td>
                      </tr>
                      <tr>
                        <th scope="row">Mort</hd>
                          <td>LdB p73</td>
                          <td>Même état pour un PJ juste inconscient à 0 PV</td>
                          <td><code>dead</code></td>
                          <td><code>dead</code></td>
                      </tr>
                      <tr>
                        <th scope="row">Paralysé</hd>
                          <td>LdB p70</td>
                          <td></td>
                          <td><code>fishing-net</code></td>
                          <td><code>cof-paralyse</code></td>
                      </tr>
                      <tr>
                        <th scope="row">Ralenti</hd>
                          <td>LdB p70</td>
                          <td></td>
                          <td><code>snail</code></td>
                          <td><code>cof-ralenti</code></td>
                      </tr>
                      <tr>
                        <th scope="row">Renversé</hd>
                          <td>LdB p70</td>
                          <td></td>
                          <td><code>back-pain</code></td>
                          <td><code>cof-renverse</code></td>
                      </tr>
                      <tr>
                        <th scope="row">Surpris</hd>
                          <td>LdB p70</td>
                          <td></td>
                          <td><code>lightning-helix</code></td>
                          <td><code>cof-surpris</code></td>
                      </tr>
                      <tr>
                        <th scope="row">Pénombre</hd>
                          <td>LdB p71</td>
                          <td></td>
                          <td><code>archery-target</code></td>
                          <td><code>cof-penombre</code></td>
                      </tr>
                    </tbody>
                  </table>
                  <p>Pour faciliter la gestion des états, on peut deux macros dans la barre du GM, <code>!cof-set-state ?{État|mort|surpris|assomme|renverse|aveugle|affaibli|etourdi|paralyse|ralenti|immobilise|endormi|apeure|invisible|blessé|encombre} true</code>, et la même avec <code>false</code>. (N'oubliez pas que la commande <code>!cof-set-macros</code> permet de générer automatiquement les macros utiles au script). Une fois qu'on connaît bien les icônes, on peut directement les changer sur les tokens pour le même effet (et même faire un undo de ces changements si besoin).  </p>
                  <p>À noter qu'un personnage ayant un <a href=#predicats>prédicat</a> nommé <code>immunite_<i>etat</i></code> ne pourra pas être mis dans l'état <i>etat</i>.</p>
                  <p>Enfin, il est possible de faire réaliser un jet pour se libérer d'un état, en utilisant la commande <code>!cof-save-state <i>etat</i> <i>carac</i> <i>seuil</i></code>. Il est possible de remplacer <i>seuil</i> par une id de token pour faire faire un test en opposition avec ce token. On peut aussi passer la caractéristique et le seuil en argument à <code>!cof-set-state</code> pour proposer le jet à chaque fois qu'on affiche les <a href="#actions_du_tour">actions du tour</a> ou qu'on affiche le statut du personnage.</p>
                </div>
                <h4 class="text-secondary">Affaiblissements de caractéristiques</h4>
                <div class="decalage">
                  <p>
                  <code>!cof-affaiblir-carac <i>carac</i> <i>valeur</i></code> permet d'affaiblir temporairement une caractéristique (force, dextérité, constitution, intelligence, sagesse, charisme ou random) d'une valeur positive. Il existe aussi une option pour les attaques, <code>--affaiblirCarac</code>, qui permet de n'affaiblir une caractéristique que si une attaque est réussie.
                  </p>
                  <p>Une caractéristique affaiblie remonte de 1 après chaque nuit de repos. Le sort de régénération permet de récupérer 1d4 points d'une seule caractéristique physique (d'abord constitution, puis force puis dextérité). Le sort délivrance permet de récupérer 1d4 point d'une seule caractéristique, et comme indiqué dans les règles, le sort de guérison annule tous les affaiblissements de caractéritiques. Enfin le script propose une commande dédiée, <code>!cof-soigner-affaiblissement <i>carac</i> <i>valeur</i></code> pour soigner les affaiblissements.
                  </p>
                  <p> À noter que la diminution de constitution fait baisser les points de vie maximum, et qu'une constitution de 0 conduit à la mort.</p>
                </div>
                <h4 class="text-secondary">Conditions hostiles et extrêmes</h4>
                <div class="decalage">
                <p>Pour des conditions hostiles, faire <code>!cof-effet conditionsHostiles oui</code> en sélectionnant les personnages concernés. Pour des conditions extrêmes, <code>!cof-effet conditionsHostiles 5</code>. À noter que le script permet de passer en argument n'importe quel nombre, qui sera appliqué en malus à la DEX, FOR, DEF et attaque.</p>
                </div>
                <h4 class="text-secondary">Autres bufs et debufs</h4>
                <div class="decalage">
                  <p><code>!cof-buf-def <i>n</i></code> : buf ou debuf de la DEF.</p>
                  <p><code>!cof-remove-buf-def</code> : enlève tout buf ou debuf de la def.</p>
                  <p><code>!cof-effet-temp <i>effet duree</i></code> : ajoute l'effet <i>effet</i> à la cible pour la durée, <code>!cof-effet-combat <i>effet</i></code> ajoute l'effet pour le combat, et <code>!cof-effet <i>effet</i></code> ajoute ou enlève un effet à durée indéterminée. À noter que si la durée est 0 ou <code>fin</code>, alors la commande met fin à l'effet (utile pour des effets temporaires qui ont une action en fin d'effet, comme <code>agrandissement</code> ou <code>formeDArbre</code>). Un personnage ayant un prédicat nommé <code>immunite_<i>effetTemp</i></code> est immunisé à l'effet temporaire de nom <i>effetTemp</i>.</p>
                  <ul>
                    <li><code>--lanceur <i>id</i></code> : indique quel est le lanceur. Utile pour un certain nombre d'autres options.</li>
                    <li><code>--mana <i>id cout</i></code> : impose au token <i>id</i> de dépenser <i>cout</i> mana. Si <code>--lanceur</code> est donné, <i>id</i> est inutile. La présence de cette option, même avec un coût de 0, indique au script que l'effet devrait être supprimé à la mort du lanceur.</li>
                    <li><code>--limiteParJour <i>l</i></code> : limite le nombre d'utilisations de cette effet à <i>l</i> fois par jour. On peut préciser un nom après <i>l</i>, qui va correspondre à une ressource pouvant être partagée avec d'autres attaques ou d'autres effets (voir <code>!cof-attack</code>). Par défaut, le nom de cette ressource est <i>effet</i>. Attention, il faut un lanceur auquel appliquer la limite par jour !</li>
                    <li><code>--limiteParCombat</code> : même effet que la limite par jour. Si aucun argument n'est donné, la limite est de une fois par combat.  Attention, il faut un lanceur auquel appliquer la limite par combat !</li>
                    <li><code>--tempsRecharge <i>effet</i> <i>duree</i></code> : l'action n'est possible que si l'effet est inactif sur le personnage qui génère l'effet, et de plus active l'effet sur celui-ci pour la durée indiquée. Il existe un effet temporaire générique, <code>rechargeGen(<i>desc</i>)</code> que vous pouvez utiliser si aucun effet existant ne correspond.</li>
                    <li><code>--dose <i>nom</i></code>: définie une ressource nommée <code>dose_<i>nom</i></code>, dont la valeur doit être positive (à la manière des munitions). Utile par exemple pour les parchemins, les potions ou les baguettes.</li>
                    <li><code>--portee <i>id d</i></code> : impose aux cibles de l'effet d'être à moins de <i>d</i> mètres du token <i>id</i>. Si <code>--lanceur</code> est précisé, inutile de donner <i>id</i>.</li>
                    <li><code>--puissant</code> : lance la version puissante de l'effet</li>
                    <li><code>--puissant oui</code> : idem</li>
                    <li><code>--puissant non</code> : lance la version non puissante (efface le dernier effet puissant)</li>
                    <li><code>--puissant duree</code> : multiplie la durée par 2</li>
                    <li><code>--puissant portee</code> : multiplie la portée par 2</li>
                    <li><code>--saveParTour <i>carac seuil</i></code> : la cible peut se sortir de l'effet chaque tour grâce à un test de <i>carac</i> de difficulte <i>seuil</i>.</li>
                    <li><code>--saveActifParTour <i>carac seuil</i></code> : la cible peut se sortir de l'effet à tour grâce à un test de <i>carac</i> de difficulte <i>seuil</i> (utilisation dans bouton dans la liste d'actions).</li>
                    <li><code>--save <i>carac seuil</i></code> : la cible peut faire un jet pour échapper à l'effet. Si on ajoute l'argument <code>demiDuree</code>, alors réussir la sauvegarde ne fait que diviser la durée.</li>
                    <li><code>--seulementVivant</code> : l'effet ne peut s'appliquer qu'aux personnages vivants.</li>
                    <li><code>--tempeteDeMana <i>liste</i></code> : indique des effets de tempête de mana. La liste peut contenir un nombre (pour l'effet intense), <code>duree</code>, <code>rapide</code> et <code>portee</code>. Si le rang du sort est spécifié (par l'option <code>--rang</code>, un message est affichée si le coût en mana est supérieur au rang. Si la liste d'options est vide, le script affiche un menu dans le chat pour spécifier les options de tempête de mana.</li>
                    <li><code>--magieEnArmure</code> : indique d'appliquer les règles pour la magie en armure pour un profil hybride. Il faut pour cela un lanceur défini. Par defaut, va faire test l'intelligence par un jet de difficulté 10 + rang + malus d'armure. Le rang est obtenu par l'option <code>--rang</code>. J'utilise le malus d'armure car il n'y a pas moyen de distinguer la DEF intrinsèque de l'armure de ses bonus de DEF dûs à un bonus magique. Enfin, on peut utiliser la règle de dépense supplémentaire de mana à la place du jet d'INT en utilisant l'option <code>--magieEnarmure mana</code>. Encore une fois, je prends le malus d'armure, divisé par 3 et arrondi au supérieur pour les règles de mana de base.</li> 
                    <li><code>--accumuleDuree <i>n</i></code> : l'effet peut être accumulé : chaque fois qu'on applique à nouveau l'effet avec une durée donnée, on ajoute cette durée à la durée courante de l'effet sur la cible. On ne peut cumuler ainsi que <i>n</i> instances de l'effet.</li>
                    <li><code>--valeur <i>n</i></code> : pour certains effet, permet de spécifier une valeur qui remplace la valeur par défaut de l'effet.</li>
                    <li><code>--optionEffet <i>opt arg1 arg2 ...</i></code> : spécifie une option à l'effet. L'option <i>opt</i> doit être donnée sans le <code>--</code> et sera passée telle quelle à l'effet, par exemple pour les dégâts périodiques. Si on a besoin de plusieurs options, il faut utiliser plusieurs fois <code>--optionEffet</code>.</li>
                    <li><code>--secret</code> : le résultat de l'effet est chuchoté au joueur qui lance la commande.</li>
                    <li><code>--fx <i>effet</i></code> : affiche l'effet spécial entre le lanceur et ses cibles. Il est possible d'utiliser un effet que vous avez défini vous-même en utilisant l'option <code>--fx custom <i>nom</i></code>, où <i>nom</i> est le nom de votre effet.</li>
                    <li><code>--targetFx <i>effet</i></code> : affiche l'effet spécial sur toutes les cibles (l'effet ne doit pas être directionnel).</li> 
                    <li><code>--son <i>son</i></code> : joue le son (normalement compatible avec Roll20AM)</li>
                    <li><code>--image <i>img</i></code> : affiche l'image dans le texte d'activation de l'effet.</li>
                    <li><code>--<i>type</i></code> : il est possible d'associer un type à l'effet. L'utilisation la plus courante est le type <code>poison</code> ou <code>maladie</code>, qui vont permettre de tenir compte des bonus ou immunités contre les effets de ce type.</li>
                    <li><code>--montreActions</code> : affiche les actions du tours de la cible après avoir appliqué l'effet. Utile si les actions du tours dépendent de cet effet, pour afficher une liste à jour.</li>
                    <li><code>--degainer <i>L</i></code> : le lanceur dégaine l'arme de label <i>L</i>.</li>
                  </ul>
                  <p><code>!cof-boire-alcool</code> et <code>!cof-desaouler</code> permettent de faire varier le niveau d'ébriété. Par exemple, pour tester si le niveau d'ébriété augmente après avoir bu un certain nombre de verres, on peut utiliser la macro <code>!cof-boire-alcool --save CON [[10+?{Nombre de verres}]]</code>.
                </div>
                <h4 class="text-secondary">Effets retardés</h4>
                <div class="decalage">
                  <p>On peut utiliser l'effet temporaire générique <code>messageRetarde(<i>nom</i>)</code> pour programmer un message qui sera affiché après un certain nombre de tours. Au bout de ce nombre de tours, le nom est affiché, ainsi que le texte de valeur (avec <code>--valeur</code> si besoin). La syntaxe est <code>!cof-effet-temp messageRetarde(<i>nom</i>) <i>duree</i> --valeur <i>message</i></code>. Si vous avez besoin d'un message qui contienne des espaces, remplacez les espaces par des <code>_</code>.</p>
                  <p>On peut aussi déclencher un effet après un certain nombre de tour avec l'effet temporaire générique <code>effetRetarde(<i>effet</i>)</code>. Après la durée de l'effet retardé, si <i>effet</i> est un état, la cible est mise dans cet état, si c'est un effet temporaire, on lui applique cet effet pour une durée de 1 tour, ou si un argument <code>--valeur</code> a été donné, il sera utilisé comme durée. Enfin si ce n'est ni l'un ni l'autre, un attribut avec le nom <i>effet</i> sera créé, de valeur courante <code>true</code>, ou bien si un argument <code>--valeur</code> a été donné, cette valeur sera utilisée comme valeur courante de l'attribut <i>effet</i>.</p>
                </div>
                <h4 class="text-secondary">Prédicats : <code>!cof-set-predicate</code></h4>
                <div class="decalage">
                  <p>Il est possible d'ajouter ou de retirer un <a href=#predicats>prédicat</a> avec la fonction <code>!cof-set-predicate <i>nom</i></code>, optionellement suivi de <code>true</code> ou <code>false</code>.</p>
                </div>
                <h4 class="text-secondary">Autres attributs : <code>!cof-set-attribute</code></h4>
                <div class="decalage">
                  Il est possible de changer ou créer n'importe quel attribut avec la fonction <code>!cof-set-attribute <i>nom</i> <i>val</i></code>. Optionellement, on peut spécifier en troisième argument une valeur maximale de l'attribut (comme dans <code>!cof-set-attribute <i>nom</i> <i>val</i> <i>max</i></code>). Attention, ça peut interragir de façon imprévue avec le script ou la fiche, si on écrit dans un attribut utilisé par la fiche.
                </div>
              </div>
              <h3 class="text-info" id="sorts">2.5 Sorts</h3>
              <div class="decalage">
                <p><code>!cof-attaque-magique @{selected|token_id} @{target|token_id}</code> : fait un jet d'attaque magique opposé entre le lanceur et sa cible, et dit juste si le sort est raté ou réussi. Options disponibles : <code>--portee</code> et <code>--mana</code>.</p>
                <p><code>!cof-lancer-sort <i>texte</i></code> : le token sélectionné lance un sort sans support particulier du script (seul un whisper est envoyé au joueur et au MJ). Options disponibles : <code>--mana</code>pour indiquer un coût en mana et <code>--son</code> pour jouer un son. Pour un sort sur plusieurs cibles, utiliser l'option <code>--lanceur @{selected|token_id}</code>.</p>
                <p><code>!cof-peur <i>difficulté durée</i></code> : effet de peur (nécromant, dragon, etc). Tant que la peur est active, statut screaming. <i>difficulté</i> est la difficulté du jet de SAG.</p>
                <span>Options :</span>
                <ul>
                  <li><code>--resisteAvecForce</code> : on prend le max de FOR et SAG pour résister</li>
                  <li><code>--etourdi</code> : la peur fait fuir ou rend étourdi</li>
                  <li><code>--ralenti</code> : la peur ralenti</li>
                  <li><code>--secoue</code> : la peur ne donne qu'un malus de -2 aux tests. Mais un autre effet de peur de même type fait fuir.</li>
                  <li><code>--effroi</code> : la peur est passive (pas un sort)</li>
                  <li><code>--portee <i>n</i></code> : limite la portée du sort à <i>n</i> metres.</li>
                  <li><code>--lanceur <i>id</i></code> : le lanceur de l'effet de peur (si il y en a un). Nécessaire pour la portée, par exemple.</li>
                  <li><code>--titre <i>message</i></code> : spécifie un titre pour la fenêtre affichant les jets de résistance à la peur.</li>
                  <li><code>--immuniseSiResiste <i>nom</i></code> : la personne qui résiste à cet effet de peur est ensuite immunisé pour la journée aux effets de peur ayant la même option (avec le même <i>nom</i>).</li>
                </ul>
                Noter qu'un prédicat <code>courage</code> permet d'obtenir un bonus (égal à la valeur du prédicat) au jet pour résister à la peur.
              </div>
              <h3 class="text-info" id="consommables">2.6 Consommables <code>!cof-consommables</code></h3>
              <div class="decalage">
                <p>Cette fonction affiche une liste de consommables, avec la possibilité de cliquer sur un élément de la liste pour le consommer (et activer son effet) ou l'échanger avec un autre personnage (via le symbole d'échange).</p>
                <p>Pour cela, la fonction utilise la liste des consommables sur la fiche (onglet "Équipement"). Elle ne va afficher que les consommables qui ont un effet (décrit dans la ligne Effet sous le nom du consommable). </p>
                <p><img class="img-fluid" src="https://i.imgur.com/WZT8buT.png" data-href="https://i.imgur.com/WZT8buT.png"></p>
                <figcaption>Exemple d'une liste de consommable.</figcaption>
                <!--<p>Attention, les boutons sont utilisables par tout le monde, ce qui permet de faire utiliser un des concommables d'un personnage par un autre. Le script vérifie juste que le token qui utilise l'objet est au contact.</p>-->
                <p>Pour l'instant, seules les commandes <code>!cof-effet-temp</code>, <code>!cof-effet-combat</code>, <code>!cof-effet</code>, <code>!cof-enduire-poison</code>, <code>!cof-attack</code>, <code>!cof-lancer-sort</code> et <code>!cof-soin</code> diminuent correctement le nombre de consommables.</p>
                <div class="alert alert-warning">
                  <p><strong>Attention : </strong></p>
                  <ul>
                    <li>Pour la commande <code>!cof-attack</code>, il est vivemement recommandé de ne pas utiliser de label, mais uniquement un nom et des options si vous voulez faciliter l'échange du consommable.</li>
                    <li>De manière générale, faites attention avec les références utilisé dans le consommable du personnage qui utilise le consommable.<br />
                    </li>
                  </ul>
                </div>
                <p>Pour les PNJs, qui n'ont pas encore d'onglet d'équipement, le script regarde tous les attributs qui commencent par <code>dose_</code>, <code>elixir_</code> ou <code>consommable_</code>. Pour ces attributs, la valeur courante doit être le nombre d'éléments possédé, et le max peut être une commande à effectuer pour activer l'effet. La fonction est à réserver aux tokens liés à un personnage. Il est aussi possible de simplement écrire un message qui s'affichera (et diminuera la quantité de consommables).</p>
                <p>L'échange via le symbole <span class="text-danger"><strong>&#8596;</strong></span> vous permettra de sélectionner un token destinataire qui recevra le consommable dans sa liste. Si le consommable existe déjà pour le destinataire, sa quantité sera augmenté de 1, sinon le consommable sera créé.</p>
                <div class="alert alert-secondary">
                  <p>Cette fonction peut-être très utile pour que les PJ échangent entre eux un consommable, mais aussi pour faciliter la vente d'objet entre PNJ et PJ.</p>
                  <p>Pour cette dernière, il vous suffira de préparer un personnage avec un token qui contient, dans ses attributs, les consommables à échanger/vendre.</p>
                </div>
              </div>
              <h3 class="text-info" id="deplacements">2.7 Déplacements</h3>
              <h4 class="text-secondary">Retrouver un personnage</h4>
              <div class="decalage">
                <p>Pour centrer la vue d'un joueur sur un token particulier, on peut utiliser <code>!cof-centrer-sur-token</code> suivi du nom du token. Généralement, c'est une bonne idée pour un joueur d'avoir une macro avec le nom de son token pour le retrouver facilement quand il arrive sur une nouvelle carte.</p>
              </div>
              <h4 class="text-secondary">Personnages immobilisés</h4>
              <div class="decalage">
                <p>Le script bloque automatiquement personnages immobilisés (paralysé, étourdi, etc...). Pour permettre de déplacer ces personnages vous pouvez simplement enlever le blockage (click droit sur le token, propriétés avancées). Si vous souhaitez être le seul à pouvoir le bouger, sélectionner le (ou les) token et cliquer sur la macro <code>Bouger</code>. Cela crée un token non bloqué associé au personnage. Bien penser à supprimer ce token après utilisation.</p>
                <p>Il est possible de mettre le jeu en pause (les joueurs ne peuvent plus bouger leurs tokens) en utilisant la macro &#x23f8;. La macro change alors de nom et devient &#x23f5;, que vous pouvez utiliser pour enlever la pause.</p>
              </div>
              <h4 class="text-secondary" id="escaliers">Escaliers</h4>
              <div class="decalage">
                <p>Pour gérer les escaliers sur les cartes, vous pouvez utiliser la méthode suivante, inspirée du script Teleport : placez dans le layer "GM Info Overlay", au niveau des escaliers, des tokens qui prennent exactement la place des escaliers. Nommez ces escaliers avec un nom, suivi d'une lettre majuscule. Par exemple <code>EscalierA</code>.</p>
                <p>Chaque escalier de la même colonne doit avoir le même nom, et différer seulement par la lettre finale. Ensuite, si un ensemble de tokens est sur un escalier, utilisez <code>!cof-escalier</code> pour téléporter les tokens à l'emplacement de l'escalier suivant dans l'ordre des lettres. Si vous utilisez l'argument <code>haut</code>, alors les tokens n'iront pas plus loin que le dernier étage, et avec l'argument <code>bas</code>, il iront dans l'ordre inverse.</p>
                <p>Dans l'exemple précédent, il serait téléporté à l'emplacement du token nommé <code>EscalierB</code>. Cela ne fonctionne que si les bouts de l'escalier sont sur la même carte. À vous de choisir sir vous préférez révéler cette fonctionalité à vos joueurs, ou si vous le faites vous-même.</p>
                <p>La limite au nombre d'escaliers est de 12 étages, donc pas de lettre après <code>L</code>.</p>
                <p>Il est possible d'avoir des escaliers qui mènent à d'autres cartes (ce qui fait alors changer la carte vue par le joueur). Il suffit que le nom de l'escalier commence par <code>tmap_</code>. Attention, à cause de limitations de Roll20, cela ne peut fonctionner que si l'image du token est dans une lirary personnelle d'un joueur : si elle vient du marketplace, il fait d'abord la copier dans sa library, puis utiliser l'image qui est dans la library pour le token.</p>
              </div>
              <h4 class="text-secondary" id="montures">Montures</h4>
              <div class="decalage">
                <p>Pour qu'un personnage puisse monter sur une monture, il faut que cette monture soit associée à une fiche de personnage et qu'il possède un <a href=#predicats>prédicat</a> <code>monture</code>. La commande pour monter sur la monture est <code>!cof-en-selle @{selected|token_id} @{target|token_id}</code>, à lancer en sélectionnant le cavalier.</p>
                <p>On peut ensuite bouger la monture, cela déplace le cavalier. Le mieux est de lancer la commander alors que le token du cavalier est sur le token de la monture. Si on déplace le cavalier, cela fait aussi bouger sa monture.</p>
              </div>
              <h4 class="text-secondary" id="suivre">Suivre un autre personnages</h4>
              <div class="decalage">
                Le principe est le suivant : on sélectionne un token, dans les abilities qui s'affichent en haut de la map, on clique sur <code>Suivre</code>, puis on sélectionne le token à suivre. À partir de ce moment, le script déplace le premier token à chaque fois qu'on déplace le second (en tenant compte des états qui empêchent le mouvement et des obstacles sur le layer de lumière, si ils doivent empêcher le mouvement). On peut aussi suivre un token qui en suit un autre. Et pour arrêter de suivre un token, il suffit de déplacer manuellement le premier token.

                Ça permet donc d'avoir un familier qui suit un personnage, ou bien de faire automatiquement bouger un groupe de perosnnage dont l'ordre de marche est déterminé.
              </div>
              <h4 class="text-secondary" id="multi-cartes">Déplacer un personnage sur plusieurs cartes</h4>
              <div class="decalage">
                <p>Il est possible de synchroniser des tokens de même nom (représentant le même personnage) sur plusieurs cartes. Ainsi, déplacer le token sur une carte déplace aussi les token sur les autres cartes. Cela peut servir par exemple si tous les joueurs ne doivent pas voir la même chose sur une carte : chaque joueur est alors sur la carte qui lui montre ce qu'il doit voir, et tous les tokens des joueurs sont synchronisés entre les cartes.</p>
                <p>La commande pour activer la synchonisation d'un (ou plusieurs) tokens séléctionnés est <code>!cof-multi-cartes</code>. Pour mettre fin à la synchronisation, on peut sélectionner ces tokens et faire <code>!cof-multi-cartes false</code>. Enfin, cette même commande sans selectionner aucun token met fin à toutes les synchronisations.</p>
              </div>
              <h3 class="text-info" id="lumiere">2.8 Lumière</h3>
              <div class="decalage">
                <p>Pour faire de la lumière, on peut utiliser <code>!cof-lumiere <i>token_id portee</i></code>. Cela va faire en sorte que le token fasse de la lumière jusqu'à <i>portee</i> mètres. Il est possible d'avoir plusieurs sources de lumière, et la commande est compatible avec la <a href='#Vision_dans_le_noir'>vision dans le noir</a>. La commande admet un troisième argument qui est la distance à laquelle la lumière devient moins brillante, et un quatrième argument qui est le nom du type de lumière (par défaut, <code>lumiere</code>), utilisé quand on éteint les lumières.</p>
                <p>Pour éteindre des lumières, utiliser <code>!cof-eteindre-lumiere</code> en sélectionnant le ou les tokens désirés. Il est possible de prendre un argument optionnel qui est le nom du groupe de lumières que l'on souhaite éteindre. Par exemple, on peut ainsi éteindre toutes les torches et laisser les effets de lumière magique actifs.</p>
                <p>Pour les torches, le script propose d'automatiser la gestion en utilisant la commande <code>!cof-torche <i>token_id</i></code>. Si le token tient une torche allumée, cela éteint la torche (et propose au MJ d'indiquer combien de temps la torche est restée allumée), et sinon, si le token possède des torches, cela allume une torche. Le nombre de torche et leur état est stocké dans un attribut <code>torches</code>, dont la valeur courante contient le nombre de torches dans l'inventaire, et la valeur max le temps restant pour la torche en cours d'utilisation (60 minutes pour une torche neuve). Si aucun attribut de ce nom n'existe, le script se contente d'allumer ou d'éteindre une torche, sans gérer leur nombre.</p>
                <p>Pour les armes qui font de la lumière, on peut préciser un prédicat <code>eclaire</code> dans le champe <code>SPÉCIAL</code> de l'arme. La valeur du prédicat doit être la distance à laquelle l'arme éclaire. On peut préciser dans un prédicat <code>eclaireFaible</code> (toujours dans le champ de l'arme) le début de la lumière faible, si besoin. Ça peut aussi être une façon de gérer les torches.</p>
              </div>
              <h3 class="text-info" id="jet_caracteristiques">2.9 Jet de caractéristiques</h3>
              <div class="decalage">
                <p><code>!cof-jet ?{Faire un jet de |Charisme, CHA|Constitution, CON|Dextérité, DEX|Force, FOR|Intelligence, INT|Sagesse, SAG}</code> : fait un simple jet pour la caractérisique sélectionnée.</p>
                <p>Il est aussi possible de donner en argument une difficulté au jet. Par exemple en faisant <code>!cof-jet INT ?{difficulté}</code>.</p>
                <p>Si on ne donne aucun argument (en dehors des options), la commande demande de préciser la caractéristique à tester. Pour chaque caractéristique, le script va proposer d'utiliser une des compétences définies sur la fiche (liste sous les capacités). Si il existe un handout nommé <code>Compétences</code>, celui-ci sera aussi utilisé pour proposer pour chaque caractéristique un choix de compétences à tester. Le handout doit contenir dans ses notes des lignes commençant par une caractéristique (FOR, DEX, ...), suivi de <code>:</code>, puis des noms de compétences, séparés par des blancs, des retours à la ligne, des virgules ou des <code>/</code>.</p>
                <p>La fonction accepte les arguments suivants:</p>
                <ul>
                  <li><code>--bonus</code> pour spécifier un bonus numérique au jet.</li>
                  <li><code>--attribut</code> pour spécifier un attribut dont la valeur doit être ajoutée au jet. Il est possible de spécifier plusieurs attributs, comme par exemple <code>--attribut perception --attribut vigilance</code> pour un jet de vigilance.</li>
                  <li><code>--predicat</code> pour spécifier un prédicat dont la valeur doit être ajoutée au jet. Il est possible de spécifier plusieurs pédicats.</li>
                  <li><code>--nom</code> précise le nom du jet à afficher. De plus, cela va aussi faire rechercher une compétence de même nom (sans tenir compte des majuscules) pour une fiche de PJ et un attribut ou un prédicat pour une fiche de PNJ. Par exemple <code>!cof-jet DEX --nom Discrétion</code> va lancer un jet de DEX, qui sera affiché comme un jet de Discrétion, et qui va ajouter au jet le bonus d'une compétence discrétion ou d'un éventuel prédicat <code>discrétion</code>.</li>
                  <li><code>--secret</code> : le jet n'est visible que par les personnes qui contrôlent le personnage, plus le MJ. Si la personne qui a lancé la commande est MJ, il sera le seul à voir le résultat.</li>
                  <li><code>--competences</code> : si la commande n'a pas déjà d'option <code>--nom</code>, invite l'utilisateur à choisir une compétence parmis une liste correspondant à la caractéristique (incluant celles provenant du handout <code>Compétences</code> tel que défini plus haut).</li>
                  <li><code>--plageEchecCritique <i>c</i></code> : permet de considérer tout jet de dé inférieur ou égal à <i>c</i> comme un échec critique.</li>
                </ul>
                <p>Si le personnage possède un attribut numérique <code>modificateurTests</code>, ce modificateur sera pris en compte pour tous les tests.</p>
                <p>Dans les options de jeu (affichés en utilisant <code>!cof-options</code>, dans le menu des options d'affichage, il est possible de choisir de ne faire afficher les résultats qu'au MJ, qui peut alors en cliquant sur un bouton le montrer aux joueurs (ou pas).</p>
              </div>
              <h3 class="text-info" id="anonymat">2.10 Anonymat et fausses identités</h3>
              <div class="decalage">
                <p>La fiche de personnage propose deux noms par personnage : le nom principal (appelé simplement "nom") et un alias. Le nom principal est celui visible dans la liste des personnages de l'interface Roll20. C'est aussi celui qui est montré quand on montre une fiche aux joueurs. La fiche propose de choisir le nom affiché lors des jets (champ "connu") : soit le nom principal, soit l'alias. Le script part toujours de l'hypothèse que c'est ce nom qui est connu des joueurs, et que le second est le "vrai" nom. Je laisse le choix au MJ de décider lequel est quoi, car les deux méthodes ont leurs avantages et leurs inconvénients : si on choisit d'avoir l'alias en nom caché, on peut montrer la fiche aux joueurs, sans dévoiler le vrai nom. En revanche, dans la liste des personnages, il peut être plus difficile de s'y retrouver, car le MJ ne verra pas le vrai nom. Si on choisit d'avoir le vrai nom caché, tout est bien clair pour le MJ, mais il doit faire attention à ne pas montrer la fiche aux joueurs.</p>
                <p>Concernant les tokens, le script suppose que vous mettez en "connu" le nom visible par les joueurs.</p>
                <h4 class="text-secondary" id="reveler">Révéler le vrai nom d'un personnage</h4>
                <div class="decalage">
                  <p>Pour révéler le vrai nom d'un personnage au joueurs, vous pourrez utiliser <code>!cof-reveler-nom</code>. L'effet s'applique à tous les personnages sélectionnés (voir les méthodes de sélection). L'effet est le suivant&nbsp;:</p>
                  <ul>
                    <li>Si le personnage était connu par son nom, et que l'alias était non vide, alors on copie l'alias à la place du nom, et on efface l'alias.</li>
                    <li>Si le personnage était connu par son alias, alors on le passe en connu par son nom et on efface l'alias.</li>
                    <li>Si on a fait un des deux changements ci-dessus, alors on change aussi les noms des tokens&nbsp;: si on a passé un nom en argument à <code>!cof-reveler-nom</code>, alors on utilise ce nom. Sinon, on utilise le nouveau nom public. Tous les tokens liés prennent ce nom, et tous les tokens non liés gardent leur numéro et changent juste la partie avant le numéro en ce nom. On n'applique cette transformation qu'aux tokens dont les noms n'ont pas été modifiés (par rapport au token par défaut défini sur la fiche).</li>
                    <li>Et on change aussi le nom du token par défaut.</li>
                  </ul>
                </div>
              </div>
              <h3 class="text-info" id="autre">2.11 Autres aspects du jeu</h3>
              <h4 class="text-info" id="annulation">Annuler une action : <code>!cof-undo</code></h4>
              <div class="decalage">
                <p>Fait partie des fonctions que je met en macro dans la barre du MJ, ça peut servir très souvent. Elle est d'ailleurs générée par la commande <code>!cof-set-macros</code>.</p>
              </div>
              <h4 class="text-info" id="chance">Chance</h4>
              <div class="decalage">
                <p>Le script essaie de détecter les cas où un point de chance peut être utile, et dans ce cas fournit un bouton (utilisable par les joueurs contrôlant le perosnnage ou le GM), permettant de dépenser un point de chance. Attention, pour l'instant, il n'est pas possible de faire juste un undo de la dépense de point de chnce. Le undo après la dépense de point de chance annule toute l'action. Il faut ensuite faire un undo par point de chance dépensé.</p>
              </div>
              <h4 class="text-info" id="surprise">Surprise : <code>!cof-surprise ?difficulte</code></h4>
              <div class="decalage">
                <p>Fait un test de surprise sur tous les tokens sélectionné. Si la difficulté n'est pas présente, ils sont automatiquement surpris. Les valeurs des attributs (hors fiche) <code>vigilance</code> et <code>perception</code> sont ajoutés au test de sagesse.</p>
                <p>Si vous souhaitez préciser que la surprise est le fait d'un personnage ou effet non vivant (pour ne pas faire bénéficier du bonus de la capacité Radar mental), vous pouvez rajouter l'option <code>--nonVivant</code>.</p>
              </div>
              <h4 class="text-info" id="bourse">Gestion de la bourse : <code>!cof-bourse</code></h4>
              <div class="decalage">
                <p>La gestion de la bourse peut se faire sans ouvrir la fiche à l'aide de la commande <code>!cof-bourse</code>. Si un seul token est sélectionné (quelle que soit la méthode de sélection), la commande affiche le montant de la bourse, avec la possibilité de modifier directement les nombres de pièces ou de dépenser ou gagner un certain nombre de pièces.</p>
                <p><code>!cof-bourse depenser <i>n</i></code> permet de faire dépenser de l'argent aux tokens sélectionnés. On peut préciser le type de pièces (pc, pa, po ou pp) après le montant, par défaut le script utilise les pièces d'argent. De même, on peut utiliser <code>!cof-bourse gagner <i>n</i></code> pour ajouter de l'argent.</p>
              </div>
              <h4 class="text-info" id="son">Jouer un son</h4>
              <div class="decalage">
                <p>Les fonctions d'attaque peuvent jouer un son (options commençant par <code>--soundAttack</code>). Une partie des actions admet aussi une option <code>--son</code> pour jouer un son. Finalement, il est aussi possible de simplement jouer un son en utilisant <code>!cof-jouer-son <i>son</i></code>. Il est possible d'arrêter tous les sons avec la commande <code>!cof-jouer-son</code>, sans argument.</p>

                <p>Le script est compatible avec <a href="https://wiki.roll20.net/Script:Roll20_Audio_Master">Roll20AM</a>, et si ce script est installé, il fera appel à lui. Mais si il n'est pas installé (et seulement dans ce cas !), il va simplement utiliser les sons dans le jukebox.</p>
              </div>
              <h4 class="text-info">Changer la taille d'une page : <code>!cof-agrandir-page</code></h4>
              <div class="decalage">
                <p>
                <code>!cof-agrandir-carte <i>coef</i></code> permet de multiplier par <i>coef</i> les dimensions de tout ce qui se trouve sur la carte et le layer de la lumière. Les tokens sont déplacés pour se retrouver à la même position relative sur la carte. Je l'utilise pour les cartes que je trouve trop petites pour des groupes de 5-6 joueurs.
                </p>
              </div>
              <h4 class="text-info">Retarder l'affichage de la mort</h4>
              <div class="decalage">
                <p>Pour retarder l'affichage de la mort d'un personnage, ajoutez à ce personnage un <a href=#predicats>prédicat</a> <code>mortDemandeConfirmation</code>. Ainsi, si le personnage meurt à la suite d'une attaque, les PVs finaux ne seront pas enlevés, et la croix rouge indiquant la mort ne sera pas dessinée. À la place, le MJ verra au bout de 2 secondes un bouton lui-demandant de confirmer la mort (par exemple le temps de décrire comment la mort advient).</p>
              </div>
            <h2 class="text-primary" id="CapacitesClasse">3. Capacités par Classe</h2>
            <div class="decalage">
              <h3 class="text-info" id="Arquebusier">Arquebusier</h3>
              <div class="decalage">
                <h4 class="text-secondary">Voie de l'artilleur</h4>
                <ol>
                  <li><strong>Mécanismes</strong> : ajouter les bonus sur la fiche</li>
                  <li><strong>Tir de semonce</strong> : utiliser le modificateur <code>semonce</code> aux attaques. On laisse le MJ vérifier si la dernière attaque du personnage était bien un échec (devrait être facile à voir dans le chat). Le plus pratique pour l'utilisation avec differentes armes, est de créer une action <code>Tir de barrage</code> dans les <a href="#actions_du_tour">actions du tour</a>, avec comme code <code>#Attaque -1 --semonce</code>.
                    <li><strong>Tir de barrage</strong> : Utiliser l'option <code>--tirDeBarrage</code>. Ça multiplie les dégâts par 2, ignore la charge, et laisse un message demandant le undo si la cible décide de ne pas bouger.</li>
                    <li><strong>Couleuvrine</strong> : ajouter une attaque à distance, avec dans les modificateurs, <code>poudre, limiteParCombat</code> (ou en ligne de commande, avec l'option <code>--limiteParCombat</code>)</li>
                    <li><strong>Feu nourri</strong> : faire les attaques comme pour le tirde barrage. Le script ne va pas vérifier que les cibles ne sont pas trop loin les unes des autres.</li>
                </ol>
                <h4 class="text-secondary">Voie des explosifs</h4>
                <ol>
                  <li><strong>Chimiste</strong> : ajoutez un <a href=#predicats>prédicat</a> <code>chimiste</code>, ainsi que les compétences de chimie et alchimie sur la fiche. Si vous utilisez la capacité alternative <strong>Grenaille</strong>, vous pouvez soit gérer les charges de grenaille avec <code>!cof-recharger <i>L</i> --grenaille</code>, soit (si vous ne voulez pas faire gérer les charges) utiliser l'option <code>--grenaille</code>. Si vous utilisez la même attaque pour plusieurs armes et que seule une partie est chargée de grenaille, il faudra aussi utiliser cette option pour utiliser l'arme chargée de grenaille.</li>
                  <li><strong>Démolition</strong> : pas de support particulier</li>
                  <li><strong>Poudre puissante</strong> : ajuster les attaques</li>
                  <li><strong>Piège explosif</strong> : </li>
                  <li><strong>Boulet explosif</strong> : ajouter une attaque de type Arme de jet, dégâts 5d6 de type contondant (ou feu ?), portée 20, modificateurs <code>auto</code>, options <code>--disque 5 --psave DEX [[12+@{selected|DEX}]]</code></li>
                </ol>
                <h4 class="text-secondary">Voie du champ de bataille</h4>
                <ol>
                  <li><strong>Action concertée</strong> : utiliser <code>!cof-echange-init @{selected|token_id} @{target|token_id} <i>n</i></code> où <i>n</i> peut valoir 0, 1 ou 2 selon le rang dans la voie.</li>
                  <li><strong>À couvert</strong> : <code>!cof-a-couvert @{selected|token_id} @{target|token_id}</code> le target est l'allié qui se déplace avec l'arquebusier. Se sélectionner soi-même si pas d'allié.</li>
                  <li><strong>Combattant aguerri</strong> : se reporter à la capacité choisie</li>
                  <li><strong>Combat de masse</strong> : pas de support particulier, effectuer les actions supplémentaires en fonction des situations.</li>
                  <li><strong>Constitution héroïque</strong> : reporter le bonus sur la fiche</li>
                </ol>
                <h4 class="text-secondary">Voie du Pistolero</h4>
                <ol>
                  <li>
                    <strong>Plus vite que son ombre</strong> : ajouter un prédicat <code>plusViteQueSonOmbre</code>. On peut associer un nombre à ce prédicat pour modifier le bonus à l'initiative, ou bien lui donner la valeur <code>arbalete</code> pour activer le bonus sur les arbalètes au lieu des armes à poudre.
                  </li>
                  <li><strong>Cadence de tir</strong> : pas de support</li>
                  <li><strong>Tir double</strong> : utiliser l'option <code>--tirDouble</code> si deux tirs sur une même cible. Si les deux armes sont différentes, rajouter le label de la deuxième arme après l'option (si le label est <i>l2</i>, cela donne <code>--tirDouble <i>l2</i></code>).</li>
                  <li><strong>As de la gâchette</strong> : utiliser l'option <code>--asDeLaGachette</code> pour les attaques avec des armes à poudre ou des arbalètes.</li>
                  <li><strong>Dextérité héroïque</strong> : reporter le bonus sur la fiche</li>
                </ol>
                <h4 class="text-secondary">Voie de la précision</h4>
                <ol>
                  <li><strong>Joli coup !</strong> : ajouter un <a href=#predicats>prédicat</a> <code>joliCoup</code> sur la fiche.</li>
                  <li><strong>Tir précis</strong> : ajouter un <a href=#predicats>prédicat</a> <code>tirPrecis</code>, valeur 1 ou 2 (le bonus apporté par la capacité)</li>
                  <li><strong>Défaut dans la cuirasse</strong> : utiliser <code>!cof-defaut-dans-la-cuirasse @{selected|token_id} @{target|token_id}</code></li>
                  <li><strong>Tir parabolique</strong> : ajouter un <a href=#predicats>prédicat</a> <code>tirParabolique</code>. Surtout ne pas changer la portée des armes, pour que le script gère correctement les distances entre portéex2 et portéex3.</li>
                  <li><strong>Tir mortel</strong> : Ajouter <code>?{Tir mortel ?|Oui, --avecd12crit --plus 2d6|Non,}</code> aux attaques à distance du personnage</li>
                </ol>
              </div>
              <h3 class="text-info" id="Barbare">Barbare</h3>
              <div class="decalage">
                <h4 class="text-secondary">Voie de la brute</h4>
                <ol>
                  <li><strong>Argument de taille</strong> : ajouter le bonus de PV sur la fiche. Ajouter un <a href=#predicats>prédicat</a> <code>argumentDeTaille</code>. Le script devrait automatiquement tenir compte de cette capacité pour les tests de négociation, persuasion et intimidation. Pour s'assurer que la bonne compétence est utilisée, vous pouvez ajouter ces noms au handout de compétence (voir la partie sur les <a class="text-info" href="#jet_caracteristiques">jet de caractéristiques</a>, le handout <code>Compétences</code>) ou sur les fiches de personnages.</li>
                  <li><strong>Tour de force</strong> : ajouter un <a href=#predicats>prédicat</a> <code>tourDeForce</code>. Le script ajoutera systématique un bouton lors de tous les tests de FOR du personnage. Au MJ de décider s'il peut être utilisé ou non.</li>
                  <li><strong>Attaque brutale</strong> : faire l'attaque avec les options <code>--bonusAttaque -2 --plus 1d6</code></li>
                  <li><strong>Briseur d'os</strong> : ajouter un <a href=#predicats>prédicat</a> <code>briseurDOs</code>. Cela va automatiquement affecter les chances de coups critique au contact.</li>
                  <li><strong>Force héroïque</strong> : reporter sur la fiche.</li>
                </ol>
                <h4 class="text-secondary">Voie du pagne</h4>
                <ol>
                  <li><strong>Vigueur</strong> : ajouter les compétences avec leurs bonus sur la fiche</li>
                  <li><strong>Peau de pierre</strong> : ajouter un <a href=#predicats>prédicat</a> <code>peauDePierre</code>. La nouvelle DEF sera calculée automatiquement.</li>
                  <li><strong>Tatouages</strong> : ajouter le bonus choisi sur la fiche</li>
                  <li><strong>Peau d'acier</strong> : ajouter dans la partie RD de la fiche, <code>3/1</code></li>
                  <li><strong>Constitution héroïque</strong> : reporter les bonus sur la fiche</li>
                </ol>
                <h4 class="text-secondary">Voie du pourfendeur</h4>
                <ol>
                  <li><strong>Réflexes félins</strong> : ajouter un <a href=#predicats>prédicat</a> <code>reflexesFelins</code>, avec comme valeur le bonus aux saves et à l'initiative.</li>
                  <li><strong>Charge</strong> : faire une attaque avec les options <code>--bonusAttaque 2</code> <code>--plus 1d6</code>. Pour gérer plusieurs armes, vous pouvez utiliser la commande <code>#Attaque -1</code>.</li>
                  <li><strong>Enchaînement</strong> : ajouter un <a href=#predicats>prédicat</a> <code>enchainement</code>.</li>
                  <li><strong>Déchaînement d'acier</strong> : pas de support particulier pour l'instant. Déplacer le token et faire les attaques au passage.</li>
                  <li><strong>Attaque tourbillon</strong> : Faite une action avec le code <code>!cof-explosion -1 --auto --disque 5 --saufAllies --limiteParCombat 1 tourbillon</code>.</li>
                </ol>
                <h4 class="text-secondary">Voie du primitif</h4>
                <ol>
                  <li><strong>Proche de la nature</strong> : ajouter le rang à une compétence <code>perception</code></li>
                  <li><strong>Armure de vent</strong> : Ajouter un <a href=#predicats>prédicat</a> <code>armureDeVent</code> avec comme valeur le rang dans la voie du primitif. Cela augmente la DEF, mais seulement lorsque le barbare ne porte pas d'armure (ne se voit pas sur le total de DEF de la fiche)</li>
                  <li><strong>Vigilance</strong> : ajouter 5 à une compétence <code>vigilance</code> et ajouter un <a href=#predicats>prédicat</a> <code>immuniteAuxSournoises</code></li>
                  <li><strong>Résistance à la magie</strong> : ajouter un <a href=#predicats>prédicat</a> <code>resistanceALaMagieBarbare</code>.</li>
                  <li><strong>Vitalité débordante</strong> : faire une ability de type token action, avec le code <code>!cof-soin ?{Nombre d'heures écoulées}d6</code> --message guérit à une vitesse surnaturelle</li>
                </ol>
                <h4 class="text-secondary">Voie de la rage</h4>
                <ol>
                  <li><strong>Cri de guerre</strong> : <code>!cof-effet-combat criDeGuerre</code></li>
                  <li><strong>Défier la mort</strong> : ajouter un <a href=#predicats>prédicat</a> <code>defierLaMort</code>.</li>
                  <li><strong>Rage du berserk</strong> : utiliser <code>!cof-rage-du-berserk</code>, à la fois pour entrer en rage et pour tenter d'en sortir avant la fin du combat.</li>
                  <li><strong>Même pas mal</strong> : ajouter un <a href=#predicats>prédicat</a> <code>memePasMal</code>. Le joueur doit lui-même activer la rage ou le furie si il souhaite en profiter.</li>
                  <li><strong>Furie du berserk</strong> : utiliser <code>!cof-rage-du-berserk --furie</code> pour entrer en rage et pour tenter d'en sortir avant la fin du combat. Pour sortir de la rage, l'option <code>--furie</code> peut être omise.</li>
                </ol>
                <i>Note: en option, il est possible de diviser par 2 la pénalité de défense infligée par la Rage ou la Furie en ajoutant un <a href=#predicats>prédicat</a> <code>rageDuBerserkAmelioree</code> au personnage (par exemple pour la ceinture d'Anathazerïn p. 341)</i>
              </div>
              <h3 class="text-info" id="Barde">Barde</h3>
              <div class="decalage">
                <h4 class="text-secondary">Voie de l'escrime</h4>
                <ol>
                  <li><strong>Précision</strong> : simplement utiliser le bon score sur la fiche.</li>
                  <li><strong>Intelligence du combat</strong> : ajouter un <a href=#predicats>prédicat</a> <code>intelligenceDuCombat</code>.</li>
                  <li><strong>Feinte</strong> : faire une attaque avec l'option <code>--feinte</code> pour profiter des effets de feinte au tour suivant. Par défaut, le bonus à l'attaque suivante est de +5 (règles de base), mais vous pouvez spécifier un bonus différent (par exemple 10 pour les règles de la boîte d'initiation) avec un <a href=#predicats>prédicat</a> <code>bonusFeinte</code> (la valeur du prédicat remplace le bonus de +5 par défaut). Il est aussi possible de changer le nombre de dés de dégât bonus en utilisant un prédicat<code>nbDesFeinte</code>.</li>
                  <li><strong>Attaque flamboyante</strong> : faire une attaque avec le modificateur <code>attaqueFlamboyante</code>. Le plus pratique pour l'utilisation avec différentes armes, est d'ajouter à la liste des <a href="#actions_du_tour">actions du tour</a> une action de titre <code>Attaque flamboyante</code> et de code <code>#Attaque -1 --attaqueFlamboyante</code>. Attention, afin de garder un intérêt à la feinte quand on dispose de cette attaque, j'ai choisi de rajouter encore le mod. de charisme aux DM en cas d'attaque flamboyante suivant une feinte réussie. Si cela ne vous convient pas, vous pouvez à la place de cette option ajouter <code>--bonusAttaque [[@{selected|CHA}]] --plus [[@{selected|CHA}]]</code>.</li>
                  <li><strong>Botte mortelle</strong> : ajoutez un <a href=#predicats>prédicat</a> <code>botteMortelle</code>.</li>
                </ol>
                <h4 class="text-secondary">Voie du musicien</h4>
                <ol>
                  <li><strong>Chant des héros</strong> : <code>!cof-effet-temp chantDesHeros [[5+@{selected|CHA}]] --allies</code>. Il faut avoir défini une <a href="#allie">équipe</a> avec le barde.</li>
                  <li><strong>Attaque sonore</strong> :
                    <ul>
                      <li>Sort : Ajouter une attaque sur la fiche utilisant l'attaque magique, DM 1d6+CHA, de portée 10, type Sortilège, dégâts soniques, options <code>--mana 0 --cone --fx breath-smoke</code>.</li>
                      <li>Objet de sort : <code>#Attaque Attaque sonore --toucher [[@{selected|ATKMAG}]] --dm 1d6+[[@{selected|CHA}]] --portee 10 --sortilege --sonique --cone --fx breath-smoke</code></li>
                    </ul>
                  </li>
                  <li><strong>Zone de silence</strong> : <code>!cof-effet-temp zoneDeSilence [[1d6+@{selected|CHA}]] --lanceur @{selected|token_id} --portee 35 --disque @{target|token_id} 3 --mana 1</code>. Le script ne gère pas le moment où les cibles sortent de la zone. Si cela arrive, le MJ doit enlever à la main l'attribut <code>zoneDeSilence</code> crée par le script pour le personnage concerné.</li>
                  <li><strong>Danse irrésisitible</strong> :
                    <ul>
                      <li>Sort : Ajouter une attaque sur la fiche utilisant l'attaque magique, portée 20, type Sortilège, modificateur <code>pasDeDmg</code>, options <code>--mana 2 --effet danseIrresistible [[1d4+@{selected|CHA]]</code>.</li>
                      <li>Objet de sort : <code>#Attaque Danse irrésisitible --toucher [[@{selected|ATKMAG}]] --pasDeDmg --portee 20 --sortilege --effet danseIrresistible [[1d4+@{selected|CHA]]</code></li>
                    </ul>
                  </li>
                  <li><strong>Musique fascinante</strong> : <code>!cof-lancer-sort joue une musique fascinante qui contrôle toutes les créatures de son choix de moins de [[5+@{selected|CHA}]] PV --mana 3</code></li>
                </ol>
                <h4 class="text-secondary">Voie du saltimbanque</h4>
                <ol>
                  <li><strong>Acrobate</strong> : ajouter les compétences sur la fiche</li>
                  <li><strong>Grâce féline</strong> : ajouter un <a href=#predicats>prédicat</a> <code>graceFeline</code>. Cela va affecter l'initiative et la DEF, mais sans se voir sur la fiche.</li>
                  <li><strong>Lanceur de couteau</strong> : faire normalement l'attaque.</li>
                  <li><strong>Esquive acrobatique</strong> : ajouter un <a href=#predicats>prédicat</a> <code>esquiveAcrobatique</code>.</li>
                  <li><strong>Liberté d'action</strong> : ajouter un <a href=#predicats>prédicat</a> <code>liberteDAction</code>.</li>
                </ol>
                <h4 class="text-secondary">Voie de la séduction</h4>
                <ol>
                  <li><strong>Charmant</strong> : ajouter les compétences sur la fiche</li>
                  <li><strong>Dentelles et rapière</strong> : Ajouter un <a href=#predicats>prédicat</a> <code>dentellesEtRapiere</code> avec comme valeur le rang dans la voie de la séduction. Cela augmente la DEF, mais seulement lorsque le barde ne porte pas d'armure et seulement contre les attaques au contact. (ne se voit pas sur le total de DEF de la fiche)</li>
                  <li><strong>Arme secrète</strong> : <code>!cof-arme-secrete @{selected|token_id} @{target|token_id}</code></li>
                  <li><strong>Suggestion</strong> :
                    <ul>
                      <li>Sort : Ajouter une attaque sur la fiche utilisant l'attaque magique, portée 20, type Sortilège, modificateurs <code>pasDeDmg</code>, options <code>--mana 2 --difficultePVmax --attaqueMentale --if touche --message la cible doit faire l'action suggérée --endif</code>.</li>
                      <li>Objet de sort : <code>#Attaque Suggestion --toucher [[@{selected|ATKMAG}]] --portee 20 --pasDeDmg --difficultePVmax --sortilege --attaqueMentale --if touche --message la cible doit faire l'action suggérée --endif</code></li>
                    </ul>
                  </li>
                  <li><strong>Charisme héroïque</strong> : Reporter le bonus sur la fiche.</li>
                </ol>
                <h4 class="text-secondary">Voie du vagabond</h4>
                <ol>
                  <li><strong>Rumeurs et légendes</strong> : ajouter les compétences sur la fiche</li>
                  <li><strong>Compréhension des langues</strong> : <code>!cof-lancer-sort lance un sort de compréhension des langues. --messageMJ la compréhension des langues va durer [[1d6+@{selected|CHA}]] minutes --mana 0</code></li>
                  <li><strong>Débrouillard</strong> : pas de support particulier. Ajouter le bonus aux compétences que vous souhaitez noter.</li>
                  <li><strong>Déguisement</strong> :<code>!cof-lancer-sort lance un sort de déguisement --mana 2</code></li>
                  <li><strong>Touche à tout</strong> : se reporter aux capacités choisies</li>
                </ol>
              </div>
              <h3 class="text-info" id="Chevalier">Chevalier</h3>
              <div class="decalage">
                <h4 class="text-secondary">Voie du cavalier</h4>
                <ol>
                  <li><strong>Fidèle monture</strong> : Faire un personnage pour la monture, avec un <a href=#predicats>prédicat</a> <code>monture</code>. Pour monter sur la monture, on peut utiliser une ability de type token action, avec <code>!cof-en-selle @{selected|token_id} <i>nom_de_la_monture</i></code>. Pour en descendre, il suffit de cliquer à nouveau sur le bouton de l'ability. Si vous souhaitez éviter que la monture apparaisse dans le turn tracker, vous pouvez ajouter un <a href=#predicats>prédicat</a> <code>aucuneActionCombat</code> à la monture. </li>
                  <li><strong>Cavalier émérite</strong> : Ajouter au chevalier un <a href=#predicats>prédicat</a> <code>cavalierEmerite:2</code>. Pour la défense de la monture, ajouter à cellle-ci un attribut <code>defDeriveeDe</code> de valeur le nom du chevalier (exactement tel qu'il apparaît sur la fiche).</li>
                  <li><strong>Monture magique</strong> : pour les soins automatiques de la nuit, ajouter un <a href=#predicats>prédicat</a> <code>montureMagique</code>.</li>
                  <li>
                    <strong>Charge</strong> : pas de support pour le déplacement, mais
                    <ul>
                      <li>Pour l'attaque : utiliser <code>--m2d20 --plus 1d6</code></li>
                      <li>Pour les créatures sur la trajectoire, utiliser <code>!cof-jet FOR 18</code>, et en cas de succès, infliger les DM.</li>
                    </ul>
                  </li>
                  <li><strong>Monture fantastique</strong> : Faire un personnage pour la monture, avec un <a href=#predicats>prédicat</a> <code>monture</code>.</li>
                </ol>
                <h4 class="text-secondary">Voie de la guerre</h4>
                <ol>
                  <li><strong>Armure sur mesure</strong> : simplement reporter sur la fiche le bon malus d'armure</li>
                  <li> <strong>Encaisser un coup</strong> :
                    <ul>
                      <li>utiliser <code>!cof-effet-temp encaisserUnCoup 1</code> pour se mettre en position</li>
                      <li>Le script proposera un bouton à activer en cas d'attaque réussie alors que le chevalier est en position.</li>
                    </ul>
                  </li>
                  <li><strong>Coup de bouclier</strong> : faire une attaque de bouclier, de type <code>Arme gauche</code>, avec le modificateur <code>avecd12crit</code>. Pour que cette attaque soit proposée dans les listes d'action seulement quand le personnage porte son bouclier, ajouter un prédicat <code>attaqueAuBouclier</code> de valeur le label de l'attaque.</li>
                  <li><strong>Frappe lourde</strong> : faire l'attaque avec les options <code>--avecd12crit --plus 2d6 --ignoreMoitieRD</code></li>
                  <li><strong>Force héroïque</strong> : reporter les bonus sur la fiche</li>
                </ol>
                <h4 class="text-secondary">Voie du héro</h4>
                <ol>
                  <li><strong>Ignorer la douleur</strong> : Ajouter un <a href=#predicats>prédicat</a> <code>ignorerLaDouleur</code>. Normalement, le script affiche un bouton quand cela est utilisable, mais on peut aussi le déclencher avec <code>!cof-ignorer-la-douleur</code> juste après le coup.</li>
                  <li><strong>Piqures d'insectes</strong> : ajouter un <a href=#predicats>prédicat</a> <code>piquresDInsectes</code>, avec comme valeur le rang dans la voie.</li>
                  <li><strong>Laissez-le-moi !</strong> : Ajouter un <a href=#predicats>prédicat</a> <code>laissezLeMoi</code>. Le bonus sera accordé contre tous les tokens ayant le statut de <code>chef</code> (donnés avec <code>!cof-set-state chef true</code>, ou alors simplement en activant le marker <img style="display:inline-block" width="12rem" src="cof-marker-set/cof-chef.png"> sur le token).</li>
                  <li><strong>Seul contre tous</strong> : Utiliser <code>!cof-effet-temp seulContreTous 1</code> pour se mettre en position. Les actions affichées en cas de riposte seront normalement une attaque avec l'arme en main si il y en a, plus les attaques naturelles cochées sur la liste d'attaque. Si ça ne convient pas, vous pouvez écrire une liste d'actions nommée<code>Ripostes</code> (voir les <a href="#actions_du_tour">actions du tour</a>).</li>
                  <li><strong>Charisme héroïque</strong> : reporter sur la fiche.</li>
                </ol>
                <h4 class="text-secondary">Voie du meneur d'hommes</h4>
                <ol>
                  <li><strong>Sans peur</strong> : Ajouter un prédicat <code>sansPeur</code>, utilisé quand on essaiera de faire peur à un <a href="#allie">allié</a>.</li>
                  <li><strong>Intercepter</strong> : Ajouter un <a href=#predicats>prédicat</a> <code>intercepter</code>, et un autre <code>voieDuMeneurDHomme</code> de valeur le rang dans la voie, s'il est différent de 2.</li>
                  <li><strong>Exemplaire</strong> : <code>!cof-exemplaire</code>, juste après l'attaque ratée.</li>
                  <li><strong>Ordre de bataille</strong> : pas de support</li>
                  <li><strong>Charge fantastique</strong> : <code>!cof-charge-fantastique @{selected|token_id} --alliesEnVue --self --limiteParCombat 1</code></li>
                </ol>
                <h4 class="text-secondary">Voie de la noblesse</h4>
                <ol>
                  <li><strong>Éduqué</strong> : pas de support particulier, juste reporter les bonus sur la fiche.</li>
                  <li><strong>Autorité naturelle</strong> : simplement reporter sur la fiche les bonus d'init et de DEF, et ajouter la capacité intimider.</li>
                  <li><strong>Écuyer</strong> : 
                    <ul>
                      <li> Pour le bonus au critique, ajouter un <a href=#predicats>prédicat</a> <code>ecuyer</code>. </li>
                      <li> Pour les soins de nuit, ajouter à l'écuyer un attribut <code>ecuyerDe</code>, avec comme valeur le nom du chevalier. L'écuyer pourra soigner chaque nuit le chevalier et certains alliés, mais pour qu'il soigne les alliés, il ne faut pas oublier de le mettre dans la <a href="#methode_selection_groupes">liste de l'équipe</a> du chevalier.</li>
                      <li>Si on souhaite que l'écuyer puisse soigner gratuitement la monture, il faut aussi que celle-ci ait un attribut <code>montureDe</code>, avec comme valeur le nom du chevalier.</li>
                    </ul>
                  </li>
                </ol>
              </div>
              <h3 class="text-info" id="Druide">Druide</h3>
              <div class="decalage">
                <h4 class="text-secondary">Voie des animaux</h4>
                <ol>
                  <li><strong>Langage des animaux</strong> : pas de support particulier</li>
                  <li><strong>Nuée d'insectes</strong> : Pas de support particulier pour les DM de zone qui détruisent la nuée (enlever l'attribut <code>nueeDInsecte</code> sur la cible dans ce cas).
                    <ul>
                      <li>Sort : Ajouter une attaque sur la fiche utilisant l'attaque magique, portée 20, type Sortilège, modificateur <code>pasDeDmg</code>, options <code>--mana 0 --effet nueeDInsectes [[5+@{selected|SAG}]]</code>.</li>
                      <li>Objet de sort : <code>#Attaque Nuée d'insectes --toucher [[@{selected|ATKMAG}]] --pasDeDmg --portee 20 --sortilege --effet nueeDInsectes [[5+@{selected|SAG}]]</code></li>
                    </ul>
                  </li>
                  <li><strong>Le guetteur</strong> : Si elle n'est pas déjà présente dans votre handout de compétences, ajouter au druide une compétence <code>perception</code> (valeur 0 pour le moment). Créer un personnage et un token pour l'oiseau. Ajouter au druide un attribut <code>guetteur</code> de valeur le nom exact de l'oiseau (sur la fiche). Ajouter de même un attribut <code>PVPartagesAvec</code> de valeur le nom de l'oiseau. Ajouter aussi à l'oiseau un attribut <code>PVPartagesAvec</code> de valeur le nom du druide. Pour le faire agir en même temps que le druide, ajoutez aussi à l'oiseau un attribut <code>initiativeDeriveeDe</code> de valeur le nom du druide. Pour l'attaque, ajouter sur la fiche une attaque de contact faisant 1d4 DM, avec dans les options <code>--attaqueMagiqueDe <i>nom de personnage du druide</i></code>. Si vous souhaitez que le guetteur rentre en combat en même temps que le druide, ajoutez au druide un attribut nommé <code>entrerEnCombatAvec</code>, de valeur le nom du token de l'oiseau.</li>
                  <li><strong>Masque du prédateur</strong> : <code>!cof-effet-temp masqueDuPredateur [[5+@{selected|SAG}]] --mana 2</code></li>
                  <li><strong>Forme animale</strong> : pas d'autre support que <code>!cof-lancer-sort se transforme en ?{Transformation en ?} --mana 3</code></li>
                </ol>
                <h4 class="text-secondary">Voie du fauve</h4>
                <ol>
                  <li><strong>Vitesse du félin</strong> : ajouter un prédicat <code>vitesseDuFelin</code>, de valeur le rang dans la voie. Pensez à ajouter des compétences de saut, escalade et course sur la fiche (sans les bonus !) s'ils ne sont pas déjà présent dans votre handout de compétences.</li>
                  <li><strong>Panthère</strong> : ajouter un personnage pour la panthère, qui sera contrôlé par le joueur. Si vous souhaitez que la panthère rentre en combat à chaque fois que le druide entre en combat, ajoutez au druide un attribut nommé <code>entrerEnCombatAvec</code>, de valeur le nom du token de la panthère (il peut y avoir plusieurs attributs avec ce nom).</li>
                  <li><strong>Attaque bondissante</strong> : faire l'attaque avec les options <code>--bonusAttaque 5</code> <code>--plus 1d6</code>. Les conditions d'utilisation sont à vérifier par le MJ.</li>
                  <li><strong>Grand félin</strong> : ajuster la fiche de la panthère, et pour le soin, utiliser <code>!cof-soin @{selected|token_id} nom_familier ?{Montant des soins} --transfer</code>.</li>
                  <li><strong>Les sept vies du chat</strong> : pas de support particulier, la commande Undo peut être utilisée pour annuler l'action qui a mené le Druide à 0 PV.</code></li>
                </ol>
                <h4 class="text-secondary">Voie de la nature</h4>
                <ol>
                  <li><strong>Maître de la survie</strong> : Ajouter +2 par rang à une compétence <code>vigilance</code></li>
                  <li><strong>Marche sylvestre</strong> : ajouter un <a href=#predicats>prédicat</a> <code>marcheSylvestre</code>. Pour indiquer un terrain difficile, on peut utiliser les objets graphiques sur le layer des cartes (map en anglais). Pour cela, éditer l'objet, et ajouter dans les notes pour MJ une ligne <code>terrainDifficile</code>. Tout le dessin est considéré comme un terrain difficile. On peut restreindre la partie considérée comme difficile à un disque en écrivant <code>terrainDifficile: disque <i>n</i></code> où <i>n</i> est le diamètre du disque en pixels. À noter que la zone d'une prison végétale est considérée difficile par le script. Le druide est considéré en terrain difficile si vous le mettez dans l'état <code>conditionsHostiles</code> (pour des valeurs inférieures à 5). Alternativement, si vous n'avez pas ajouté le type de terrain vous pouvez taper <code>!cof-effet marcheSylvestre oui</code> quand le druide entre dans un terrain que vous considérez difficile. Dans ce cas, faire <code>!cof-effet marcheSylvestre non</code> quand il sort de cette zone.</li>
                  <li><strong>Résistant</strong> : ajouter dans la RD sur la fiche, <code>nature:<i>v</i></code>, avec comme valeur <i>v</i> la RD (donc deux fois le rang dans la voie). Cette RD s'applique à toute attaque ou dommages avec l'option <code>--nature</code> ou <code>--naturel</code>. Il s'applique aussi à toute attaque venant d'un personnage avec un <a href=#predicats>prédicat</a> <code>animal</code>, ou <code>insecte</code> ou bien avec un profil animal ou insecte, ou avec une race reconnue comme étant un animal ou un insecte. Dans ce cas, si on souhaite qu'une attaque d'une telle créature ne soit pas considérée comme naturelle, on peut utiliser l'option <code>--artificiel</code> à l'attaque.</li>
                  <li><strong>Bâton de druide</strong> : Simplement créer l'attaque correspondante et permettre les deux attaques en action limitée.</li>
                  <li><strong>Constitution héroïque</strong> : reporter sur la fiche</li>
                </ol>
                <h4 class="text-secondary">Voie du protecteur</h4>
                <ol>
                  <li><strong>Baies magiques</strong> : Pour simplement créer les baies, on peut utiliser <code>!cof-creer-baies</code>, avec éventuellement des arguments pour la dépense de mana. Si le sort ne demande pas de dépense et que le temps passé n'est pas important, il peut être plus simple de directement utiliser <code>!cof-distribuer-baies</code> avec option <code>--allies --self</code> ou <code>--target</code> pour créer et donner des baies (en ayant sélectionné le druide, le mieux est d'utiliser une ability). Pour consommer ensuite une baie, il faut utiliser <code>!cof-consommables</code>.</li>
                  <li><strong>Forêt vivante</strong> : on peut mettre un effet (avec <code>!cof-effet</code>) <code>foretVivanteEnnemie</code> aux personnages affectés. Par exemple, si on veut donner l'effet aux personnages non alliés du druide, on peut faire <code>!cof-effet foretVivanteEnnemie oui --disque @{selected|token_id} 2000 --saufAllies --mana 0</code>. Attention, l'effet ne disparaît que si on fait un <code>!cof-effet foretVivanteEnnemie non</code> sur les personnages.</li>
                  <li><strong>Régénération</strong> : <code>!cof-effet-temp regeneration [[@{selected|niveau} + @{selected|SAG}]] --lanceur @{selected|token_id} --target @{target|token_id} --limiteCibleParJour 1 --portee 0 --mana 1</code>.</li>
                  <li><strong>Forme d'arbre</strong> : <code>!cof-effet-temp formeDArbre [[5+@{selected|SAG}]] --mana 2</code>. J'ai choisi de donner comme pouvoir supplémentaire à cette forme d'avoir ses propres PVs, et le druide récupère ses PVs originaux à la fin de l'effet. La transformation est annulée aussi si l'arbre perd tous ses PVs. Le nombre de PVs par défaut est de niveau x 5, mais il peut être modifié en ajoutant au argument <code>--valeur <i>pv</i></code>. Pour augmenter un peu l'intérêt de ce sort, je lui fais aussi augmenter de 50% le bonus de peau d'écorce. Si vous utilisez les actions à afficher à chaque tour, vous pouvez aussi créer une liste d'actions nommée <code>Forme d'arbre</code> contenant les sorts et actions possibles en forme d'arbre. Si une telle liste existe, elle va toujours afficher au moins les actions défensive, d'attente et d'attaque sous forme d'arbre (pas besoin de créer une attaque dédiée sur la fiche). Il est possible de spécifier une image pour le token en forme d'arbre, en utilisant le valeur courante d'un attribut <code>tokenFormeDArbre</code>.</li>
                  <li><strong>Sagesse héroïque</strong> : reporter sur la fiche</li>
                </ol>
                <h4 class="text-secondary" id="voie_végétaux">Voie des végétaux</h4>
                <ol>
                  <li><strong>Peau d'écorce</strong> : <code>!cof-effet-temp peauDEcorce [[5+@{selected|SAG}]] --mana 0</code>. Par défaut, utilise la valeur d'un <a href=#predicats>prédicat</a> <code>voieDesVegetaux</code> (qui devrait avoir comme valeur le rang dans la voie). Il est possible de choisir une autre valeur en utilisant l'option <code>--valeur</code>, et si aucune des deux méthodes n'est utilisée, le bonus de DEF est de 1.</li>
                  <li><strong>Prison végétale</strong> : <code>!cof-effet-temp prisonVegetale [[5+@{selected|SAG}]] --saveActifParTour FOR [[10+@{selected|SAG}]] --lanceur @{selected|token_id} --disque @{target|token_id} 5 20 --saufAllies --mana 0</code>.</li>
                  <li><strong>Animation d'un arbre</strong> :  <code>!cof-animer-arbre @{selected|token_id} @{target|token_id} --portee 0 --mana 1</code>. Cela implique d'avoir un token représentant l'arbre sur la carte. Ce que je fais, c'est de passer un token d'arbre du layer map au layer tokens, puis je laisse le joueur faire le sort. Si c'est trop compliqué, vous pouvez aussi préparer un personnage arbre, avec les caractéristiques décrites, et le faire arriver sur la carte à la main (ne pas oublier sa RD <code>10/feu_hache</code>, dans ce cas).</li>
                  <li><strong>Gland de pouvoir</strong> :
                    <ul>
                      <li>Sort : Ajouter une attaque sur la fiche utilisant l'attaque magique, portée 10, type Sortilège, modificateur <code>pasDeDmg</code>, options <code>--mana 2 --effet statueDeBois [[2d6+@{selected|SAG}]] --valeur 10 10</code>. À noter qu'un prédicat <code>immunite_petrification</code> permet d'être immunisé à cet effet.</li>
                      <li>Objet de sort : <code>#Attaque Gland de pouvoir --toucher [[@{selected|ATKMAG}]] --pasDeDmg --portee 10 --sortilege --effet statueDeBois [[2d6+@{selected|SAG}]] --valeur 10 10</code></li>
                    </ul>
                  </li>
                  <li><strong>Porte végétale</strong> : Pas de support au niveau du script, à part <code>!cof-lancer-sort lance un sort de porte végétale --mana 3</code>.</li>
                </ol>
              </div>
              <h3 class="text-info" id="Ensorceleur">Ensorceleur</h3>
              <div class="decalage">
                <h4 class="text-secondary">Voie de l'air</h4>
                <ol>
                  <li><strong>Murmures dans le vent</strong> : pas de support autre que <code>!cof-lancer-sort lance un sort de Murmures dans le vent</code></li>
                  <li><strong>Sous tension</strong> :
                    <ol>
                      <li><code>!cof-effet-temp sousTension [[5+@{selected|CHA}]] --mana 0</code> pour lancer le sort et mettre l'ensorceleur sous tension</li>
                      <li>Ajouter une attaque sur la fiche utilisant l'attaque magique, dommages 1d6+CHA, portée 10, type Sortilège, dégâts électriques, options <code>--si etat sousTension --fx beam-holy</code>.</li>
                      <li>Pour les objets de sorts, on peut mettre l'attaque directement sous la forme <code>#Attaque Décharge électrique --toucher [[@{selected|ATKMAG}]] --dm 1d6+[[@{selected|CHA}]] --electrique --portee 10 --sortilege --si etat sousTension --fx beam-holy</code></li>
                    </ol>
                  </li>
                  <i>Note :</i> Il est possible de spécifier une autre valeur pour les DM automatiques quand le lanceur est touché en contact, en rajoutant <code>--valeur X</code> à la première ability</code>.
                  </li>
                  <li><strong>Télékinésie</strong> : Pas de support autre que <code>!cof-lancer-sort lance un sort de télékinésie --mana 1</code></li>
                  <li><strong>Foudre</strong> :
                    <ul>
                      <li>Sort : Ajouter une attaque sur la fiche utilisant l'attaque magique, 4d6+CHA, portée 10, type Sortilège, options <code>--mana 2 --psave DEX [[12+@{selected|DEX}]] --ligne --fx beam-holy</code>.</li>
                      <li>Objet de sort : <code>#Attaque Gland de pouvoir --toucher [[@{selected|ATKMAG}]] --dm 4d6+[[@{selected|CHA}]] --portee 10 --sortilege --psave DEX [[12+@{selected|DEX}]] --ligne --fx beam-holy</code></li>
                    </ul>
                  </li>
                  <li><strong>Forme éthérée</strong> : <code>!cof-effet-temp intangible [[5 + @{selected|CHA}]] --mana 3</code>. Pour implémentaer des variantes, il existe aussi un effet <code>intangibleInvisible</code> qui cumule les états intangible et invisible, et l'option <code>--puissant</code> donne la possibilité au personnage de passer entre l'état tangible et intangible à chaque tour, tant que dure l'effet.</li>
                </ol>
                <h4 class="text-secondary">Voie de la divination</h4>
                <ol>
                  <li><strong>6eme sens</strong> : ajouter le bonus en DEF divers et initiative diver, ajouter une compétence <code>vigilance</code>, de valeur 2*rang (le bonus aux jet de surprise).</li>
                  <li><strong>Détection de l'invisible</strong> : <code>!cof-effet-temp detectionDeLInvisible [[5+@{selected|CHA}]] --mana 0</code>.</li>
                  <li><strong>Clairvoyance</strong> : <code>!cof-lancer-sort peut voir et entendre à distance --mana 1</code></li>
                  <li><strong>Prescience</strong> : ajouter un <a href=#predicats>prédicat</a> <code>prescience</code> (on peut y associer un nombre pour avoir plus d'une prescience par tour). Si le personnage était sur la carte au moment de lancer le combat, il se verra proposer un bouton pour utiliser sa prescience à la fin de chaque tour. Attention, en l'état, il est impossible d'annuler l'utilisation de ce bouton. De plus, ce bouton ne fera rien si le script a été interrompu depuis le début du tour (interruption de la partie, redémarrage du script, etc...).</li>
                  <li><strong>Hyperconscience</strong> : reporter sur la fiche.</li>
                </ol>
                <h4 class="text-secondary">Voie de l'envoûteur</h4>
                <ol>
                  <li><strong>Injonction</strong> : utiliser <code>!cof-injonction @{selected|token_id} @{target|token_id} --portee 20 --mana 0</code></li>
                  <li><strong>Sommeil</strong> : <code>!cof-sommeil @{selected|token_id} --disque @{target|token_id} 5 20 --mana 0</code>. Pour sélectionner le centre de la zone, on peut utiliser un personnage fictif (avec un token représentant une cible, par exemple) ayant 0 de max de PV.</li>
                  <li><strong>Confusion</strong>:
                    <ul>
                      <li>Sort : Ajouter une attaque sur la fiche utilisant l'attaque magique, portée 20, type Sortilège, modificateurs <code>pasDeDmg</code> options <code>--mana 1 --attaqueMentale --effet confusion [[3+@{selected|CHA}]] --saveParTour SAG [[10+@{selected|CHA}]]</code>.</li>
                      <li>Objet de sort : <code>#Attaque Confusion --toucher [[@{selected|ATKMAG}]] --pasDeDmg --portee 20 --sortilege --attaqueMentale --effet confusion [[3+@{selected|CHA}]] --saveParTour SAG [[10+@{selected|CHA}]]</code></li>
                    </ul>
                  </li>
                  <li><strong>Amitié</strong>:
                    <ul>
                      <li>Sort : Ajouter une attaque sur la fiche utilisant l'attaque magique, portée 20, type Sortilège, modificateurs <code>pasDeDmg</code> options <code>--mana 2 --attaqueMentale --difficultePVmax --effet charme --save SAG [[12+@{selected|CHA}]] --saveParJour SAG [[12+@{selected|CHA}]]</code>.</li>
                      <li>Objet de sort : <code>#Attaque Amitié --toucher [[@{selected|ATKMAG}]] --pasDeDmg --portee 20 --sortilege --attaqueMentale --difficultePVmax --effet charme --save SAG [[12+@{selected|CHA}]] --saveParJour SAG [[12+@{selected|CHA}]]</code></li>
                    </ul>
                  </li>
                  <li><strong>Domination</strong> : utiliser <code>!cof-attaque-magique @{selected|token_id} @{target|token_id} --portee 20 --attaqueMentale</code></li>
                </ol>
                <h4 class="text-secondary">Voie des illusions</h4>
                <ol>
                  <li><strong>Image décalée</strong> : <code>!cof-effet-temp imageDecalee [[5+@{selected|CHA}]] --mana 0</code>.</li>
                  <li><strong>Mirage</strong> : pas de support autre que <code>!cof-lancer-sort lance un sort de mirage ([[5+@{selected|CHA}]] minutes) --mana 0</code></li>
                  <li><strong>Imitation</strong> : pas de support autre que <code>!cof-lancer-sort lance un sort d'imitation ([[5+@{selected|CHA}]] minutes) --mana 1</code></li>
                  <li><strong>Dédoublement</strong> :
                    <ul>
                      <li>Sort : Ajouter une attaque sur la fiche utilisant l'attaque magique, portée 20, type Sortilège, modificateurs <code>pasDeDmg</code> options <code>--mana 2 --effet dedoublement [[5+@{selected|CHA}]]</code>.</li>
                      <li>Objet de sort : <code>#Attaque Dédoublement --toucher [[@{selected|ATKMAG}]] --pasDeDmg --portee 20 --sortilege --effet dedoublement [[5+@{selected|CHA}]]</code></li>
                    </ul>
                  </li>
                  <li><strong>Tueur fantasmagorique</strong> : <code>!cof-tueur-fantasmagorique @{selected|token_id} @{target|token_id} --portee 20 --mana 3</code>. Attention, j'en ai fait une interprétation un peu personnelle : au lieu de ne pas pouvoir toucher les cibles de niveau supérieur au lanceur, les cible de niveau supérieur gagnent un bonus de 5 par niveau au dessus de celui du lanceur pour résister au tueur fantasmagorique. Et ceux de niveau inférieur un malus de 1 par niveau de différence. Si cette interprétation ne vous convient pas, n'hésitez pas à me demander des changements.</li>
                </ol>
                <h4 class="text-secondary">Voie de l'invocation</h4>
                <ol>
                  <li><strong>Familier</strong> : créer un personnage (de type PNJ) pour le familier, controlé par le joueur et avec un token lié ayant la capacité de voir. 
                    <ul>
                      <li>Pour le bonus en initiative, ajouter un attribut <code>familier</code> au personnage, avec comme valeur le nom du compagnon (doit être exactement le même que celui du token du compagnon). Cela automatise l'initiative quand le familier est présent.</li>
                      <li>Pour les points de vie partagés avec le familier, il faut mettre un attribut <code>PVPartagesAvec</code> de valeur le nom du familier (celui de la fiche, pas forcément le même que le token) pour le personnage, et un attribut similaire chez le familier, de valeur courante le nom du personnage. Le partage de PVs ne fonctionne pas avec des mooks, et il ne fait pas le partage de dégâts temporaires. En revanche, le script devrait gérer correctement les dégâts de zone.</li>
                      <li>Pour la défense du familier, ajouter lui un attribut <code>defDeriveeDe</code>, de valeur le nom du personnage (nom complet sur la fiche).</li>
                      <li>L'initiative ne devrait pas être très utile, mais si besoin, ajoutez un attribut <code>initiativeDeriveeDe</code> de valeur le nom du personnage. En fait, pour les familiers normaux, je préfères même qu'ils n'apparaissent pas sur le turn tracker, et je leur met donc un <a href=#predicats>prédicat</a> <code>aucuneActionCombat</code>.</li>
                    </ul>
                  </li>
                  <li><strong>Serviteur invisible&nbsp;</strong>: pas de support autre que <code>!cof-lancer-sort crée une force invisible pour ([[5+@{selected|CHA}]] minutes) --mana 0</code></li>
                  <li><strong>Mur de force</strong> : <code>!cof-mur-de-force ?{Spherique?|Oui,&amp;#32;|Non,mur} --mana 1</code>. Cela affiche une image d'un champ de force, mais seulement si il est sphérique. Il est possible de ne pas afficher d'image avec la commande <code>!cof-mur-de-force noImage</code>. Il est possible d'utiliser une autre image que l'image par défaut en utilisant la commande <code>!cof-mur-de-force <i>path</i></code> où <i>path</i> est l'adresse url d'une image de la librairie Roll20 qui représente un mur de force sphérique. On peut aussi changer l'image par défaut dans les options de jeu.</li>
                  <li><strong>Épée dansante</strong> :
                    <ul>
                      <li><code>!cof-effet-temp epeeDansante [[5+@{selected|CHA}]] --mana 2</code> pour lancer le sort</li>
                      <li>Ajouter une attaque sur la fiche utilisant l'attaque magique, dommages 1d8+CHA, portée 20, type Sortilège, dégâts magiques, options <code>--si etat epeeDansante --ignoreObstacles</code>.</li>
                      <li>Pour les objets de sort, on peut utiliser une action <code>#Attaque Épée dansante --toucher [[@{selected|ATKMAG}]] --dm 1d8+[[@{selected|CHA}]] --magique --portee 20 --sortilege --si etat epeeDansante --ignoreObstacles</code></li>
                    </ul>
                    Pour une rapière dansante, il existe aussi un effet temporaire <code>rapiereDansante</code>.
                  </li>
                  <li><strong>Charisme héroïque</strong> : reporter sur la fiche</li>
                </ol>
              </div>
              <h3 class="text-info" id="Forgesort">Forgesort</h3>
              <div class="decalage">
                <h4 class="text-secondary">Voie des artefacts</h4>
                <ol>
                  <li><strong>Bâton de mage</strong> : simplement adapter l'attaque, avec aussi <code>--magique</code>. Pour l'éclair d'énergie, le mieux est d'ajouter une autre attaque.</li>
                  <li><strong>Blocage</strong> : pas de support autre que <code>!cof-lancer-sort scelle une porte ou un coffre (+5 solidité & RD) pour [[@{selected|INT}]] minutes --mana 0</code></li>
                  <li><strong>Sac sans fond</strong> : pas de support particulier</li>
                  <li><strong>Frappe des arcanes</strong> : le plus simple est d'utiliser la même ligne d'attaque (disons que son label est <code>E</code>) que pour l'attaque d'énergie (mais si besoin, rien n'empêche d'en utiliser une autre). La commande sera alors <code>!cof-explosion E --auto --magique --sortilege --portee 10 --etat renverse --save FOR [[10+@{selected|INT}]]</code>.</li>
                  <li><strong>Artefact majeur</strong> : pas de support particulier</li>
                </ol>
                <h4 class="text-secondary">Voie des élixirs</h4>
                <p style="margin-top:0px; margin-bottom:0px">Pour créer ou juste voir ses élixirs, utiliser la commande <code>!cof-elixirs</code>. Pour cela, il faut aussi un <a href=#predicats>prédicat</a> <code>voieDesElixirs</code> avec comme valeur le rang dans la voie. Noter que la commande <code>!cof-elixirs</code> affiche une liste d'élixirs, et que pour effectivement créer un élixir, il faut cliquer sur le bouton correspondant dans cette liste. Le script propose les élixirs par défaut du jeu, mais vous pouvez modifier cette liste : pour changer un élixir de rang k (k&lt;4), ajouter un attribut de nom <code>Elixir <i>k</i></code>, de valeur courante le nom et de valeur maximale l'effet.</p>
                <ol>
                  <li><strong>Fortifiant</strong> : création à l'aide de <code>!cof-elixirs</code>, et utilisation avec la même commande, ou bien en utilisant <code>!cof-consommables</code>. Si vous souhaitez avoir une potion de fortifiant indépendament de cette Voie (par exemple achetée dans une échope), vous pouvez ajouter un consommable avec l'effet <code>!cof-fortifiant <i>n</i></code>, où <i>n</i> est le rang dans la Voie du forgesort qui a créé la potion.</li>
                  <li><strong>Feu grégeois</strong> : création à l'aide de <code>!cof-elixirs</code>, et utilisation avec la même commande, ou bien en utilisant <code>!cof-consommables</code>.</li>
                  <li><strong>Élixir de guérison</strong> : création à l'aide de <code>!cof-elixirs</code>, et utilisation avec la même commande, ou bien en utilisant <code>!cof-consommables</code>.</li>
                  <li><strong>Potion magique</strong> : création à l'aide de <code>!cof-elixirs</code>, et utilisation avec la même commande, ou bien en utilisant <code>!cof-consommables</code>.</li>
                  <li><strong>Élixirs magiques</strong> : création à l'aide de <code>!cof-elixirs</code>, et utilisation avec la même commande, ou bien en utilisant <code>!cof-consommables</code>.</li>
                </ol>
                <h4 class="text-secondary">Voie du métal</h4>
                <ol>
                  <li><strong>Forgeron</strong> : Il faut un <a href=#predicats>prédicat</a> <code>voieDuMetal</code> pour connaître le rang (ou utiliser l'option <code>--valeur</code>). Lancer le sort avec <code>!cof-effet-temp forgeron(<i>L</i>) [[5+@{selected|INT}]]</code> où <i>L</i> est le label d'une attaque. Ensuite, chaque fois que cette attaque sera utilisée, les dégâts seront ajoutés. Limitations : si deux attaques utilisent la même arme, il faut faire deux fois l'action, une pour chaque attaque.</li>
                  <li><strong>Métal brûlant</strong> :
                    <ul>
                      <li>Sort : Ajouter une attaque sur la fiche utilisant l'attaque magique, portée 20, type Sortilège, modificateurs <code>pasDeDmg</code> options <code>--mana 0 --effet ?{Chauffer|une arme,armeBrulante|une armure,armureBrulante} [[5+@{selected|INT}]]</code>.</li>
                      <li>Objet de sort : <code>#Attaque Métal brûlant --toucher [[@{selected|ATKMAG}]] --pasDeDmg --portee 20 --sortilege --effet ?{Chauffer|une arme,armeBrulante|une armure,armureBrulante} [[5+@{selected|INT}]]</code></li>
                    </ul>
                    Pour mettre fin à l'effet (si la cible lâche son arme ou enlève son armure), vous pouvez utiliser la macro <code>!cof-effet-temp ?{Se débarrasser d'une |arme,armeBrulante|armure,armureBrulante} 0</code>
                  </li>
                  <li><strong>Magnétisme</strong> : <code>!cof-effet-temp magnetisme [[3+@{selected|INT}]] --mana 1</code>. L'effet n'est actif que contre les attaques ayant l'option <code>--metal</code>. Il est possible de changer le bonus de DEF apporté avec l'option <code>--valeur</code>.</li>
                  <li><strong>Métal hurlant</strong> : </li>
                  <li><strong>Endurer</strong> : reporter les bonus sur la fiche</li>
                </ol>
                <h4 class="text-secondary">Voie du golem</h4>
                <ol>
                  <li><strong>Grosse tête</strong> : Vous pouvez ajouter un <a href=#predicats>prédicat</a> <code>grosseTete</code>. Normalement, le bonus devrait dépendre des actions du forgesort. Si vous souhaitez le faire, vous pouvez ne pas mettre le prédicat, mais juste avant un jet de force pour lequel vous pensez que la grosse tête s'applique, faire <code>!cof-set-predicate grosseTete true</code> (en sélectionnant le token du forgesort), puis après le jet faire  <code>!cof-set-predicate grosseTete false</code>. Si vous voulez l'ajout de grosse tête par défaut, vous pouvez aussi faire l'opération dans l'ordre inverse pour les jets pour lesquels vous pensez que le bonus ne peut pas s'appliquer.</li>
                  <li><strong>Golem</strong> : ajouter un personnage et un token pour le golem (ne pas oublier le <a href=#predicats>prédicat</a> <code>nonVivant</code> pour le golem). Pour les réparations, utiliser <code>!cof-soin @{selected|token_id} <i>nom_du_golem</i> <i>rang</i>d6+@{selected|INT}</code>. Bien remplacer <i>rang</i> par le rang dans la voie, dans cette commande. Attention, le nom du golem est celui du token représentant le golem, et il ne doit pas contenir de blanc.</li>
                  <li><strong>Protecteur</strong> : <code>!cof-interposer</code> permet de s'interposer à la place de la cible de la dernière attaque. (Attention, pas de undo pour cette action)</li>
                  <li><strong>Golem supérieur</strong> : reporter les avantages sur la fiche du golem.</li>
                  <li><strong>Intelligence héroïque</strong> : reporter sur la fiche</li>
                </ol>
                <h4 class="text-secondary">Voie des runes</h4>
                <p style="margin-top:0px; margin-bottom:0px">Ajouter un <a href=#predicats>prédicat</a> <code>voieDesRunes</code> pour le personnage avec comme valeur le niveau dans la voie des Runes.</p>
                <ol>
                  <li><strong>Runes de défense</strong> : Rien à faire, le prédicat <code>voieDesRunes</code> est pris en compte dans le calcule de la DEF.</li>
                  <li><strong>Rune d'énergie</strong> : La fabrication des runes de combat est gérée par la commande <code>!cof-runes</code> (il est fortement conseillé de créer une ability pour le forgesort). Le script tente de détecter quand les runes peuvent être utilisées en combat et propose un bouton (à la manière des points de chance). Lors de chaque nuit (utilisation de la commande <code>!cof-nouveau-jour</code>) toutes les runes sont retirées, mais le script va suggérer des raccourcis au forgesort pour les restaurer facilement à tous les tokens présents sur la page des joueurs (par personnage, type de rune, et aussi un bouton "Tout renouveler"). Les points de mana sont automatiquement décomptés.</li>
                  <li><strong>Rune de protection</strong> : cf. ci-dessus. Le script implémente par défaut un maximum de dommages absorbés par la rune équivalent au rang du forgesort dans la voie des Runes multiplié par 10. Il est possible de désactiver cette limitation via !cof-options.</li>
                  <li><strong>Rune de puissance</strong> : cf. ci-dessus. Créer une rune de puissance vous demandera d'indiquer en plus le numéro de l'arme sur la fiche du propriétaire.</li>
                  <li><strong>Rune de pouvoir</strong> : pas de support particulier, créer l'objet de pouvoir approprié.</li>
                </ol>
              </div>
              <h3 class="text-info" id="Guerrier">Guerrier</h3>
              <div class="decalage">
                <h4 class="text-secondary">Voie du bouclier</h4>
                <ol>
                  <li><strong>Protéger un allié</strong> : <code>!cof-proteger-un-allie @{selected|token_id} @{target|token_id}</code>. Fonctionne aussi si on remplace le target par un nom de token. Le script ne vérifie pas que le guerrier ne change pas d'allié plus d'une fois par tour.</li>
                  <li>
                    <strong>Absorber un coup</strong> :
                    <ul>
                      <li>utiliser <code>!cof-effet-temp absorberUnCoup 1</code> pour se mettre en position. Attention, ça ne vérifie pas si le guerrier porte son bouclier.</li>
                      <li>le script propose un bouton à activer en cas d'attaque réussie alors que le guerrier est en position.</li>
                    </ul>
                  </li>
                  <li>
                    <strong>Absorber un sort</strong> :
                    <ul>
                      <li>utiliser <code>!cof-effet-temp absorberUnSort 1</code> pour se mettre en position. Attention, ça ne vérifie pas si le guerrier porte son bouclier.</li>
                      <li>le script propose un bouton à activer en cas d'attaque réussie alors que le guerrier est en position.</li>
                    </ul>
                  </li>
                  <li><strong>Armure lourde</strong> : Noter l'armure sur la feuille du personnage, et ajouter un <a href=#predicats>prédicat</a> <code>armureLourdeGuerrier</code> au personnage. L'annulation du critique ne se produira que si l'armure est portée et que la valeur totale du bonus de défense supérieure ou égale à 7 (le bonus de DEF d'une armure de plaques complète).</li>
                </ol>
                <h4 class="text-secondary">Voie du combat</h4>
                <ol>
                  <li><strong>Vivacité</strong> : simplement augmenter l'init sur la fiche.</li>
                  <li><strong>Désarmer</strong> : <code>!cof-desarmer @{selected|token_id} @{target|token_id}</code>. On peut utiliser un troisième argument optionnel, qui est le label d'une arme par défaut, au cas où le guerrier n'aurait pas d'arme en main.</li>
                  <li><strong>Double attaque</strong> : faire deux attaques, avec l'option supplémentaire <code>--bonusAttaque -2</code>.</li>
                  <li><strong>Attaque circulaire</strong> : faire les attaques normalement, ce n'est pas considéré comme une aoe.</li>
                  <li><strong>Attaque puissante</strong> : <code>#Attaque -1 --avecd12crit --plus 2d6</code>.</li>
                </ol>
                <h4 class="text-secondary">Voie du maître d'armes</h4>
                <ol>
                  <li><strong>Arme de prédilection</strong> : il est possible de préciser une famille d'armes de prédilection (un peu plus large que dans les règles), parmis <code>arc</code>, <code>arbalete</code>, <code>hache</code>, <code>epee</code>, <code>marteau</code>, <code>masse</code>, <code>epieu</code>, <code>poudre</code>, <code>baton</code> et <code>rapiere</code>. Si cela vous convient, ajoutez un prédicat <code>armeDePredilection</code> de valeur une de ces familles. Sinon, simplement ajouter le bonus sur les attaques dans la fiche.</li>
                  <li><strong>Science du critique</strong> : pour ne pas avoir à modifier les chances de critique pour toutes les attaques, utiliser un <a href=#predicats>prédicat</a> <code>scienceDuCritique</code>. Attention à ne pas faire ça ET modifier les chances de critiques de l'attaque, car ça s'additionne.</li>
                  <li><strong>Spécialisation</strong> : reporter le bonus aux DM sur la fiche.</li>
                  <li><strong>Attaque parfaite</strong> : utiliser les options <code>--m2d20 --plus 1d6</code>.</li>
                  <li><strong>Riposte</strong> : ajouter un <a href=#predicats>prédicat</a> <code>riposteGuerrier</code>. Les actions affichées en cas de riposte seront normalement une attaque avec l'arme en main, et les attaques naturelles cochées du personnage. Si cela ne convient pas, écrivez une liste d'actions nommée <code>Ripostes</code>.</li>
                </ol>
                <h4 class="text-secondary">Voie de la résistance</h4>
                <ol>
                  <li><strong>Robustesse</strong> : rajouter les PV sur la fiche.</li>
                  <li><strong>Armure naturelle</strong> : rajouter la DEF sur la fiche.</li>
                  <li><strong>Second souffle</strong> : Ajouter un <a href=#predicats>prédicat</a> <code>secondSouffle</code> permet de faire apparaître un bouton pour utiliser le second souffle quand le guerrier a perdu des PVs en combat, limite le gain de PVs à ceux perdus dans le combat en cours, et utilise automatiquement la capacité en fin de combat si elle n'a pas été utilisée. Si cette automatisation ne vous convient pas, vous pouvez utiliser la commande <code>!cof-soin @{selected|token_id} secondSouffle</code> à la place. Enfin, on peut préciser une valeur pour ce prédicat, pour remplacer le niveau + CON (par exemple pour un PNJ).</li>
                  <li><strong>Dur à cuire</strong> : rajouter un <a href=#predicats>prédicat</a> <code>durACuire</code> sur la fiche.</li>
                  <li><strong>Constitution héroïque</strong> : reporter les bonus sur la fiche.</li>
                </ol>
                <h4 class="text-secondary">Voie du soldat</h4>
                <ol>
                  <li><strong>Posture de combat</strong> : <code>!cof-posture-de-combat <i>bonus attr1 attr2</i></code>, où les deux <i>attr</i> peuvent être soit <code>DEF</code> soit <code>ATT</code> soit <code>DM</code>, et le <i>bonus</i> est retiré au premier attribut pour être ajouté au second. Le bonus peut être limité si le guerrier a un <a href=#predicats>prédicat</a> <code>voieDuSoldat</code> qui indique son rang dans la voie. Exemple d'utilisation&nbsp;: <code>!cof-posture-de-combat ?{Bonus} ?{Baisser|Défense,DEF|Attaque,ATT|Dégâts,DM} ?{Augmenter|Défense,DEF|Attaque,ATT|Dégâts,DM}</code>. Normalement, la règle fait décider de sa posture au guerrier à chaque tour, mais en pratique, il en change assez rarement. Une posture de combat reste donc active jusqu'à la fin du combat ou jusqu'à ce qu'on en change (elle est neutre si on a le même attribut à buffer et débuffer).</li>
                  <li><strong>Combat en phalange</strong> : ajouter un <a href=#predicats>prédicat</a> <code>combatEnPhalange</code>. Les bonus seront ajoutés automatiquement en fonctions des alliés définis selon <a href="#allie">cette méthode</a>.</li>
                  <li><strong>Prouesse</strong> : ajouter un <a href=#predicats>prédicat</a> <code>prouesse</code> (on peut y associer un nombre, si on souhaite plus d'une utilisation par tour). Le script générera automatiquement les boutons Prouesse sur les test appropriés.</li>
                  <li><strong>Dernier rempart</strong> : pas de support particulier, le MJ doit gérer les attaques supplémentaires.</li>
                  <li><strong>Force héroïque</strong> : reporter sur la fiche.</li>
                </ol>
              </div>
              <h3 class="text-info" id="Invocateur">Invocateur</h3>
              <div class="decalage">
                <h4 class="text-secondary">Voie de la conjuration</h4>
                <ol>
                  <li><strong>Conjuration de prédateur</strong> : <code>!cof-conjuration-de-predateur --mana 0</code>.</li>
                  <li><strong>Conjuration renforcée</strong> : vous pouvez soit utiliser un <a href=#predicats>prédicat</a> <code>voieDeLaConjuration</code>, de valeur le rang dans la voie, soit ajouter ce rang en premier argument de <code>!cof-conjuration-de-predateur</code>.</li>
                  <li><strong>Conjuration d'armée</strong> : <code>!cof-conjuration-armee --limiteParJour 1 --mana 1</code>. Le niveau de puissance de l'armée et déterminé par la valeur d'un <a href=#predicats>prédicat</a> <code>voieDeLaConjuration</code>, ou sinon par un argument optionnel qui donne les DMs infligés par l'armée (par exemple, <code>!cof-conjuration-armee 2d6</code>). L'armée va apparaître comme un token normal, mais avec une aura de 20m de coté qui représente la place qu'elle occupe. Pour les dégâts qu'elle inflige, utiliser son attaque sur toutes les cibles désignées par l'invocateur. Pour faire disparaître l'armée, il suffit de la tuer (par exemple en utilisant <code>!cof-set-state mort true</code>). Tous les personnages dans la zone de l'armée et qui ne sont pas alliés de l'invocateurs ont automatiquement une nouvelle action dans leur liste pour attaquer l'armée. Cette action leur permet aussi de bénéficier d'une division des DM par 2 lorsque l'armée les attaque.</li>
                </ol>
                <h4 class="text-secondary">Voie de l'entité</h4>
                <ol>
                  <li><strong>Invocation d'une entité</strong> : ajouter la fiche correspondante.</li>
                  <li><strong>Lien magique</strong> : pour l'instant, gérer à la main le transfert de dégâts.</li>
                  <li><strong>Amélioration</strong> : ajuster la fiche de l'entité.</li>
                </ol>
                <h4 class="text-secondary">Voie du familier</h4>
                <ol>
                  <li><strong>Familier</strong> : créer un token pour le familier, avec vue et controlé par le joueur. Le partage des PV n'est pas géré. Pour le bonus en initiative, ajouter un attribut <code>familier</code>, avec comme valeur le nom du compagnon (doit être exactement le même que celui du token du compagnon). Cela automatise l'initiative quand le familier est présent.</li>
                  <li><strong>Résistance</strong> : ajouter la valeur de RD sur la fiche du familier.</li>
                  <li><strong>Sens développés</strong> : ajouter un <a href=#predicats>prédicat</a> <code>perception</code> de valeur 5 (ou augmenter ce prédicat, si il existe déjà), et ajouter un prédicat <code>visionDansLeNoir</code> de valeur 20 (40 si le personnage dispose déjà de la vision dans le noir).</li>
                </ol>
                <h4 class="text-secondary">Voie des mutations</h4>
                <ol>
                  <li><strong>Mutation offensive</strong> :
                    <ul>
                      <li><code>!cof-effet-temp mutationOffensive [[5+@{selected|CHA}]] --mana 0</code> pour lancer le sort</li>
                      <li>Ajouter une attaque sur la fiche utilisant l'attaque au contact, dommages 1d6+FOR+3, type Naturel, dégâts magiques, options <code>--si etat mutationOffensive</code></li>
                      <li>Pour un objet de sort, vous pouvez utiliser une action avec le code <code>#Attaque Mutation offensive --toucher [[@{selected|ATKCAC}]] --dm 1d6+[[3+@{selected|FOR}]] --magique --naturel --si etat mutationOffensive</code></li>
                    </ul>
                  </li>
                  <li><strong>Mutation protectrice</strong> : <code>!cof-effet ?{Mutation protectrice|Cuirasse,mutationCuirasse|Écailles rouges,mutationEcaillesRouges|Fourrure violette,mutationFourrureViolette|Ouïes,mutationOuies|Sang noir,mutationSangNoir} true --classeEffet mutationProtectrice --mana 0</code>. Pour la valeur de protection de la cuirasse, vous pouvez soit utiliser un <a href=#predicats>prédicat</a> <code>voieDesMutations</code>, de valeur le rang dans la voie, soit remplacer <code>mutationCuirasse</code> par <code>mutationCuirasse --valeur <i>rang</i></code>. Pour enlever la mutation, le MJ peut ensuite simplement sélectionner le personnage et utiliser <code>!cof-fin-classe-effet mutationProtectrice</code>.</li>
                  <li><strong>Surpuissance physique</strong> : <code>!cof-effet ?{Surpuissance physique|Muscles hypertrophiés,mutationMusclesHypertrophies|Silhouette filiforme,mutationSilhouetteFiliforme|Silhouette massive,mutationSilhouetteMassive} true --classeEffet surpuissancePhysique --mana 1</code>. Pour enlever la mutation, le MJ peut ensuite simplement sélectionner le personnage et utiliser <code>!cof-fin-classe-effet surpuissancePhysique</code>.</li>
                  <li><strong>Adaptation motrice</strong> : pas d'autre support que <code>!cof-lancer-sort --message se fait pousser ?{Adaptation motrice ?|Ailes|des ailes|Pattes demesurées,des pattes demesurées|Queue de poisson,une queue de poisson} --mana 2</code></li>
                </ol>
                <h4 class="text-secondary">Voie des portes</h4>
                <ol>
                  <li><strong>Raccourci</strong> : pas de support autre que <code>!cof-lancer-sort lance un sort de Raccourci --mana 0</code></li>
                  <li><strong>Porte artificielle</strong> : pas de support autre que <code>!cof-lancer-sort lance un sort de Porte artificielle --mana 0</code></li>
                  <li><strong>Manoir d'outre-tombe</strong> : pas d'autre support que <code>!cof-lancer-sort enchante une porte --mana 1</code></li>
                </ol>
              </div>
              <h3 class="text-info" id="Magicien">Magicien</h3>
              <div class="decalage">
                <h4 class="text-secondary">Voie de la magie des arcanes</h4>
                <ol>
                  <li><strong>Agrandissement</strong> : <code>!cof-effet-temp agrandissement [[5+@{selected|INT}]] --target @{target|token_id} --lanceur @{selected|token_id} --portee 0 --mana 0</code>.</li>
                  <li><strong>Forme gazeuse</strong> : <code>!cof-effet-temp formeGazeuse [[1d4 + @{selected|INT}]] --mana 0</code>. Au MJ de faire attention que sous cette forme, toutes les capacités sont interdites.</li>
                  <li><strong>Hâte</strong> : <code>!cof-effet-temp hate [[1d6+@{selected|INT}]] --mana 1</code>, au MJ de gérer ensuite les actions possibles chaque tour.</li>
                  <li><strong>Téléportation</strong> : Pas de support autre que <code>!cof-lancer-sort se téléporte (à [[@{selected|INTELLIGENCE}*10]] m maximum) --mana 2</code>.</li>
                  <li><strong>Désintégration</strong> :
                    <ul>
                      <li>Sort : Ajouter une attaque sur la fiche utilisant l'attaque magique, dommages 5D6+INT, portée 20, type Sortilège, dégâts magiques, options <code>--mana 3</code>.</li>
                      <li>Objet de sort : <code>#Attaque Désintégration --toucher [[@{selected|ATKMAG}]] --dm 5d6+[[@{selected|INT}]] --magique --portee 20 --sortilege</code></li>
                    </ul>
                  </li>
                </ol>
                <h4 class="text-secondary">Voie de la magie destructrice</h4>
                <ol>
                  <li><strong>Projectile magique</strong> :
                    <ul>
                      <li>Sort : Ajouter une attaque sur la fiche utilisant l'attaque magique, dommages 1d4, portée 50, type Sortilège, modificateurs <code>auto</code> dégâts magiques, options <code>--mana 0 --fx beam-magic</code>.</li>
                      <li>Objet de sort : <code>#Attaque Projectile Magique --auto --dm 1d4 --magique --portee 50 --sortilege --fx beam-magic</code></li>
                    </ul>
                  </li>
                  <li><strong>Rayon affaiblissant</strong> :
                    <ul>
                      <li>Sort : Ajouter une attaque sur la fiche utilisant l'attaque magique, portée 10, type Sortilège, modificateurs <code>pasDeDmg</code> dégâts magiques, options <code>--mana 0 --effet rayonAffaiblissant [[1d6+@{selected|INT}]] --fx splatter-magic</code>.</li>
                      <li>Objet de sort : <code>#Attaque Rayon affaiblissant --toucher [[@{selected|ATKMAG}]] --pasDeDmg --portee 10 --sortilege --effet rayonAffaiblissant [[1d6+@{selected|INT}]] --fx splatter-magic</code></li>
                    </ul>
                  </li>
                  <li><strong>Flèche enflammée</strong> :
                    <ul>
                      <li>Sort : Ajouter une attaque sur la fiche utilisant l'attaque magique, dommages 1d6+INT, portée 30, type Sortilège, dégâts feu, options <code>--mana 1 --fx beam-fire --feu --enflamme</code>.</li>
                      <li>Objet de sort : <code>#Attaque Flèche enflammée --toucher [[@{selected|ATKMAG}]] --dm 1d6+[[@{selected|INT}]] --feu --portee 30 --sortilege --fx beam-fire --enflamme</code></li>
                    </ul>
                  </li>
                  <li><strong>Boule de feu</strong> :
                    <ul>
                      <li>Sort : Ajouter une attaque sur la fiche utilisant l'attaque magique, dommages 4d6+INT, portée 30, type Sortilège, dégâts feu, options <code>--mana 2 --demiAuto --disque 6 --psave DEX [[10+@{selected|INT}]] --targetFx explode-fire</code>.</li>
                      <li>Objet de sort : <code>#Attaque Boule de feu --toucher [[@{selected|ATKMAG}]] --dm 4d6+[[@{selected|INT}]] --feu --magique --portee 30 --sortilege --demiAuto --disque 6 --psave DEX [[10+@{selected|INT}]] --targetFx explode-fire</code></li>
                    </ul>
                  </li>
                  <li><strong>Rituel de puissance</strong> : faire l'appel aux attaques avec <code>--avecd12crit --plus 2d6</code>. On peut par exemple ajouter ceci dans les options des attaques lorsque le Rituel peut être utilisé :<code>?{Rituel de puissance?|Non,&#32;|Oui,--avecd12crit --plus 2d6}</code></li>
                </ol>
                <h4 class="text-secondary">Voie de la magie élémentaire</h4>
                <ol>
                  <li><strong>Asphyxie</strong> :
                    <ul>
                      <li>Sort : Ajouter une attaque sur la fiche utilisant l'attaque magique, portée 20, type Sortilège,modificateurs <code>pasDeDmg</code>, options <code>--mana 0 --effet asphyxie [[1+@{selected|INT}]]</code>.</li>
                      <li>Objet de sort : <code>#Attaque Asphyxie --toucher [[@{selected|ATKMAG}]] --pasDeDmg --portee 20 --sortilege --effet asphyxie [[1+@{selected|INT}]]</code></li>
                    </ul>
                  </li>
                  <li><strong>Protection contre les éléments</strong> : ajouter un <a href=#predicats>prédicat</a> <code>voieDeLaMagieElementaire</code> avec comme valeur le rang dans la voie. Pour lancer le sort, faire <code>!cof-effet-temp protectionContreLesElements [[5+@{selected|INT}]] --mana 0</code>. Notez que si vous utilisez une option <code>--valeur</code> à la place d'utiliser le prédicat, la RD sera cette valeur multipliée par 2.</li>
                  <li><strong>Arme enflammée</strong> : Lancer le sort avec <code>!cof-effet-temp armeEnflammee [[5+@{selected|INT}]] --lanceur @{selected|token_id} --target @{target|token_id} --portee 0 --mana 1</code>. Il faut que la cible tienne une arme en main (voir <code>!cof-degainer</code>). Limitations : si deux attaques utilisent la même arme, il faut faire deux fois l'action, une pour chaque attaque.</li>
                  <li><strong>Respiration aquatique</strong> : pas de support autre que <code>!cof-lancer-sort lance un sort de respiration aquatique (durée 10 minutes, sur soi plus [[@{selected|INT}]] compagnons) --mana 2</code>.</li>
                  <li><strong>Peau de pierre</strong> : <code>!cof-effet-temp peauDePierreMag [[5+@{selected|INT}]] --mana 3</code>. Le script va appliquer une RD de [5+Mod. d'INT] en dernier lieu, et compter le maximum des 40 dégâts par défaut. Il est possible de changer la valeur de la RD et le nombre de points de dégâts absorbés en ajoutant l'option <code>--valeur <i>rd absorbe</i></code>. À noter que le script rajoute +1 à la RD et +5 au total de dégâts absorbés en cas de magie puissante, ou par point de mana depensé en magie intense. </li>
                </ol>
                <h4 class="text-secondary">Voie de la magie protectrice</h4>
                <ol>
                  <li><strong>Armure du mage</strong> : <code>!cof-effet-combat armureDuMage --mana 0</code>.</li>
                  <li><strong>Chute ralentie</strong> : pas de support autre que <code>!cof-lancer-sort lance un sort de Chute ralentie --mana 0</code></li>
                  <li><strong>Flou</strong> : <code>!cof-effet-temp flou [[1d4+@{selected|INT}]] --mana 1</code>.</li>
                  <li><strong>Cercle de protection</strong> : Le script ne gère pas le cercle en lui-même, mais vous pouvez créer deux abilities.
                    <ul>
                      <li><code>!cof-effet-temp cercleDeProtection 100 --target @{target|token_id} --lanceur @{selected|token_id} --valeur @{selected|token_id}</code> et cibler un personnage pour lui appliquer l'effet.</li>
                      <li><code>!cof-effet-temp cercleDeProtection fin --target @{target|token_id} --lanceur @{selected|token_id}</code> pour supprimer l'effet sur un personnage.</li>
                    </ul>
                    Le script proposera alors automatiquement à ces personnages un bouton avec le nom du magicien si une cible protégée est ciblée par une attaque magique. Le jet d'attaque magique opposé sera automatisé. Si vous utilisez les options de mana, rajoutez <code>--mana {Coût ?}</code> à la première ability. Indiquer le coût au lancement, et 0 pour les autres applications.
                  </li>
                  <li><strong>Arrêt du temps</strong> : pas de support autre que <code>!cof-lancer-sort arrête le temps pour [[1d6+@{selected|INT}]] tours --mana 3</code></li>
                </ol>
                <h4 class="text-secondary">Voie de la magie universelle</h4>
                <ol>
                  <li><strong>Lumière</strong> : <code>!cof-lumiere @{target|token_id} 20 --mana 0</code>. On peut utiliser une cible qui ne soit qu'un personnage sans PV, et dans ce cas le token disparaît, et pour éteindre la lumière, le MJ doit supprimer le token dans le layer de l'éclairage dynamique. Si la cible est un personnage avec des PV, alors la lumière se déplacera avec lui, et pour éteindre la lumière, il faut séclectionner le ou les tokens et lancer <code>!cof-eteindre-lumiere lumiere</code>.</li>
                  <li><strong>Détection de la magie</strong> : pas de support autre que <code>!cof-lancer-sort lance un sort de Détection de la Magie --mana 0</code>.</li>
                  <li><strong>Invisibilité</strong> : utiliser <code>!cof-set-state invisible true --message se rend invisible --messageMJ l'invisibilité va durer [[1d6+@{selected|INT}]] minutes --mana 1</code>. Pour les ennemis, mettre dans le layer gm, pour les joueurs, ne pas les cibler. Reste le problème des AOE...</li>
                  <li><strong>Vol</strong> : pas de support autre que <code>!cof-lancer-sort vole --messageMJ le vol va durer [[1d6+@{selected|INT}]] minutes --mana 2</code></li>
                  <li><strong>Intelligence héroïque</strong> : reporter sur la fiche</li>
                </ol>
              </div>
              <h3 class="text-info" id="Moine">Moine</h3>
              <div class="decalage">
                <h4 class="text-secondary">Voie de l’énergie vitale</h4>
                <ol>
                  <li><strong>Main d'énergie</strong> : utiliser l'attaque à mains nues avec l'option <code>--mainsDEnergie</code>. D'autre part, ajouter l'option <code>--magique</code> à toutes les attaques à mains nues.</li>
                  <li><strong>Pression mortelle</strong> : utiliser l'option <code>--pointsVitaux</code> pour ne pas infliger immédiatement les dégâts, et l'option <code>--pressionMortelle</code> pour libérer les dégâts.</li>
                  <li><strong>Invulnérable</strong>: utiliser un <a href=#predicats>prédicat</a> <code>invulnerable</code></li>
                  <li><strong>Projection du ki</strong> : ajouter simplement l'attaque sur la fiche, et utiliser le type d'attaque <code>Sortilege</code> et le type de dégâts <code>magique</code>.</li>
                  <li><strong>Ascétisme</strong> : noter la constitution comme une caractéristique supérieure sur la fiche.</li>
                </ol>
                <h4 class="text-secondary">Voie de la maîtrise</h4>
                <ol>
                  <li><strong>Esquive du singe</strong> : mettre à jour la défense sur la fiche, et ajouter une compétence <code>acrobatie</code> avec le bonus donné par la capacité.</li>
                  <li><strong>Morsure du serpent</strong> : pour ne pas avoir à modifier les chances de critique pour toutes les attaques au contact, utiliser un <a href=#predicats>prédicat</a> <code>morsureDuSerpent</code>. Attention à ne pas faire ça ET modifier les chances de critiques de l'attaque, car ça s'additionne. (En revanche, pas de soucis avec la science du critique).</li>
                  <li><strong>Griffes du tigre</strong> : rajouter l'option <code>--explodeMax</code> aux attaques à mains nues.</li>
                  <li><strong>Fureur du dragon</strong> : Créer une action : <code>!cof-explosion Fureur du dragon --auto --portee 0 --disque 1 --saufAllies --dm 2D6+[[@{selected|FOR}]] --etat renverse --save FOR 10 --limiteParCombat 1 fureurDuDragon</code></li>
                  <li><strong>Moment de perfection</strong> : <code>!cof-effet-temp momentDePerfection 1 --limiteParCombat 1</code></li>
                </ol>
                <h4 class="text-secondary">Voie de la méditation</h4>
                <ol>
                  <li><strong>Pacifisme</strong> : ajouter un <a href=#predicats>prédicat</a> <code>pacifisme</code>. Il est possible d'y associer une valeur pour appliquer un bonus à la défense différent de 5.</li>
                  <li><strong>Transe de guérison</strong> : <code>!cof-transe-guerison</code></li>
                  <li><strong>Maîtrise du ki</strong> : adapter les valeurs de DEF et init</li>
                  <li><strong>Projection mentale</strong> : aucun support</li>
                  <li><strong>Sagesse héroïque</strong> : reporter sur la fiche</li>
                </ol>
                <h4 class="text-secondary">Voie du poing</h4>
                <ol>
                  <li><strong>Poings de fer</strong> : simplement enlever le <code>--tempDmg</code> et ajuster les dégâts</li>
                  <li><strong>Parade de projectiles</strong> : ajouter un <a href=#predicats>prédicat</a> <code>paradeDeProjectiles</code>. Le script proposera automatiquement un bouton pour parer l'attaque dans les cas appropriés.</li>
                  <li><strong>Peau de fer</strong> : ajuster la DEF sur la fiche.</li>
                  <li><strong>Déluge de coups</strong> : le MJ gère le nombre d'attaques. Pour les attaques au d12, utiliser l'option <code>--avecd12</code>.</li>
                  <li><strong>Puissance du ki</strong> : utiliser les options <code>--avecd12crit --plus 2d6</code>.</li>
                </ol>
                <h4 class="text-secondary">Voie du vent</h4>
                <ol>
                  <li><strong>Pas du vent</strong> : un prédicat <code>pasDuVent</code> avec comme valeur le rang dans la voie permet d'augmenter automatiquement l'initiative. Pour le reste, il n'y a pas de support particulier.</li>
                  <li><strong>Course du vent</strong> : géré par le MJ.</li>
                  <li><strong>Course des airs</strong> : pas de support.</li>
                  <li><strong>Lévitation</strong> : pas de support.</li>
                  <li><strong>Passe-muraille</strong> : pas de support.</li>
                </ol>
              </div>
              <h3 class="text-info" id="Necromancien">Nécromancien</h3>
              <div class="decalage">
                <h4 class="text-secondary">Voie du démon</h4>
                <ol>
                  <li><strong>Malédiction</strong> :
                    <ul>
                      <li>Sort : Ajouter une attaque sur la fiche utilisant l'attaque magique, portée 20, type Sortilège, modificateurs <code>pasDeDmg malediction</code>, options <code>--mana 0</code>.</li>
                      <li>Objet de sort : <code>#Attaque Malédiction --toucher [[@{selected|ATKMAG}]] --pasDeDmg --portee 20 --sortilege --malediction</code></li>
                    </ul>
                  </li>
                  <li>
                    <strong>Aspect de la succube</strong> :
                    <ul>
                      <li><code>!cof-effet-temp aspectDeLaSuccube [[5+@{selected|INT}]] --mana 0</code> pour lancer le sort</li>
                      <li>Ajouter une attaque sur la fiche utilisant l'attaque magique, dommages 1d4+CHA, portée 0, type Sortilège, dégâts de drain, options <code>--si etat aspectDeLaSuccube</code>.</li>
                      <li>Pour un objet de sort, le code sera <code>#Attaque Attaque de la succube --toucher [[@{selected|ATKMAG}]] --dm 1d4+[[@{selected|CHA}]] --magique --portee 0 --sortilege --si etat aspectDeLaSuccube --drain</code></li>
                    </ul>
                  </li>
                  <li><strong>Pacte sanglant</strong> : créer un <a href=#predicats>prédicat</a> <code>pacteSanglant</code> de valeur 3 (rang 3) ou 5 (rang 5). Le script va automatiser l'ajout de boutons sur tous les tests <i>a posteriori</i>, y compris sur les attaques qui ciblent le personnage. Aux joueurs de s'accorder sur la nécessité d'une déclaration <i>a priori</i> nécessaire pour l'utilisation de la capacité.</li>
                  <li><strong>Aspect du démon</strong> :
                    <ul>
                      <li><code>!cof-effet-temp aspectDuDemon [[5+@{selected|INT}]] --mana 2</code> pour lancer le sort</li>
                      <li>Ajouter une attaque sur la fiche utilisant l'attaque magique, dommages 1d6+4, portée 0, type Sortilège, dégâts magiques, options <code>--si etat aspectDuDemon</code></li>
                      <li>Pour un objet de sort, l'attaque pourra avoir le code <code>#Attaque Attaque du démon --toucher [[@{selected|ATKMAG}]] --dm 1d6+4 --magique --portee 0 --sortilege --si etat aspectDuDemon</code></li>
                    </ul>
                  </li>
                  <li><strong>Invocation d'un démon</strong> : <code>!cof-invoquer-demon @{selected|token_id} --mana 3</code></li>
                </ol>
                <h4 class="text-secondary">Voie de la mort</h4>
                <ol>
                  <li><strong>Siphon des âmes</strong> : ajouter un prédicat <code>siphonDesAmes</code>. Par défaut, si il y a plusieurs personnages avec ce pouvoir, tous vont siphoner les âmes sans interaction. Mais il est possible de déclarer un ordre de priorité, telle que si les personnages de plus haute priorité ont siphoné tous les points de vie qu'ils pouvaient, il ne reste rien à siphoner pour les autre. Pour se faire, utilisez un prédicat <code>siphonDesAmesPrioritaire</code> avec la valeur numérique de la priorité (0 par défaut, plus la valeur est grande, plus le personnage est prioritaire).</li>
                  <li><strong>Masque mortuaire</strong> : <code>!cof-effet-temp masqueMortuaire [[5+@{selected|INT}]] --mana 0</code></li>
                  <li><strong>Baiser du vampire</strong> :
                    <ul>
                      <li>Sort : Ajouter une attaque sur la fiche utilisant l'attaque magique, dommages 1d8+INT, portée 50, type Sortilège, dégâts de drain, options <code>--mana 1 --seulementVivant</code>.</li>
                      <li>Objet de sort : <code>#Attaque Baiser du vampire --toucher [[@{selected|ATKMAG}]] --dm 1d8+[[@{selected|INT}]] --portee 50 --sortilege --drain --seulementVivant</code></li>
                    </ul>
                  </li>
                  <li><strong>Briser les coeurs</strong> :
                    <ul>
                      <li>Sort : Ajouter une attaque sur la fiche utilisant l'attaque magique, dommages 5d6+INT, portée 20, type Sortilège, modificateurs <code>seulementVivant necromancie</code>, options <code>--mana 2 --psave CON [[10+@{selected|INT}]] tempete 2</code>.</li>
                      <li>Objet de sort : <code>#Attaque Briser les coeurs --toucher [[@{selected|ATKMAG}]] --dm 5d6+[[@{selected|INT}]] --portee 20 --sortilege --psave CON [[10+@{selected|INT}]] tempete 2 --seulementVivant --necromancie</code></li>
                    </ul>
                    À noter que la partie <code>tempete 2</code> implémente une chose qui n'est pas dans les règles, à savoir augmenter la difficulté du test de constitution de 2 par point de mana investi en tempête de mana intense. Je trouvais en effet que sans cet ajout, à mana égale, le sort était moins intéressant que le baiser du vampire. Il reste moins fort et plus situationnel que la désintégration du magicien (à mana égale), même avec ce changement.
                  </li>
                  <li><strong>Mot de mort</strong> :
                    <ul>
                      <li>Sort : Ajouter une attaque sur la fiche utilisant l'attaque magique, portée 20, type Sortilège, modificateurs <code>pasDeDmg necromancie difficultePV</code>, options <code>--mana 3 --etat mort --save CON [[10+@{selected|INT}]] tempete 2</code>.</li>
                      <li>Objet de sort : <code>#Attaque Mot de mort --toucher [[@{selected|ATKMAG}]] --pasDeDmg --portee 20 --sortilege --necromancie --difficultePV --etat mort --save CON [[10+@{selected|INT}]] tempete 2</code></li>
                    </ul>
                    Comme pour <strong>Briser les coeurs</strong>, je pense qu'on peut augmenter la difficulté du jet de résistance avec la puissance de la tempête de mana.
                  </li>
                </ol>
                <h4 class="text-secondary">Voie de l'outre-tombe</h4>
                <ol>
                  <li><strong>Peur</strong> :
                    <ul>
                      <li>Sort : Ajouter une attaque sur la fiche utilisant l'attaque magique, portée 20, type Sortilège, modificateurs <code>pasDeDmg</code>, options <code>--mana 0 --peur [[10+@{selected|INT}]] [[1d4+<i>r</i>]]</code>où <i>r</i> est le rang dans la voie</li>
                      <li>Objet de sort : <code>#Attaque Peur --toucher [[@{selected|ATKMAG}]] --pasDeDmg --portee 20 --sortilege --peur [[10+@{selected|INT}]] [[1d4+<i>r</i>]]</code>où <i>r</i> est le niveau de l'objet</li>
                    </ul>
                  </li>
                  <li><strong>Animation d'un mort-vivant</strong> : <code>!cof-animer-mort @{selected|token_id} --mana 0</code>. Cela met directement le nécromant et le zombie en combat. Les Zombies perdent automatiquement 1 PV tous les 6 rounds. Lorsqu'ils atteignent 0 PV (quelle qu'en soit la raison) ou à la fin du combat, ils sont automatiquement détruits et supprimés. Si le lanceur a un <a href=#predicats>prédicat</a> <code>voieOutreTombe</code>, le script gère le maximum de zombies qu'il peut invoquer. Mana, consommables et limites sont gérées, mais pas Tempête de Mana.</li>
                  <li><strong>Putréfaction</strong> :
                    <ul>
                      <li>Sort : Ajouter une attaque sur la fiche utilisant l'attaque magique, dommages 1d6+INT, portée 10, type Sortilège, modificateurs <code>necromancie</code>, options <code>--mana 1 --effet putrefactionOutreTombe --save CON [[12+@{selected|INT}]]</code></li>
                      <li>Objet de sort : <code>#Attaque Putréfaction --toucher [[@{selected|ATKMAG}]] --dm 1d6+[[@{selected|INT}]] --portee 10 --sortilege --necromancie --effet putrefactionOutreTombe --save CON [[12+@{selected|INT}]]</code></li>
                    </ul>
                  </li>
                  <li><strong>Ensevelissement</strong> :
                    <ul>
                      <li>Sort : Ajouter une attaque sur la fiche utilisant l'attaque magique, portée 20, type Sortilège, modificateurs <code>pasDeDmg necromancie</code>, options <code>--mana 2 --etat enseveli FORDEX [[13+@{selected|INT}]]</code></li>
                      <li>Objet de sort : <code>#Attaque Ensevelissement --toucher [[@{selected|ATKMAG}]] --pasDeDmg --portee 20 --sortilege --necromancie --etat enseveli FORDEX [[13+@{selected|INT}]]</code></li>
                    </ul>
                    Les dégâts sont infligés au début de chaque tour, et la cible recevra à son initiative un bouton lui permettant d'effectuer le jet pour sortir. Elle pourra également ajouter un bonus manuel au jet, en fonction des actions réalisées pour l'aider à sortir.
                  </li>
                  <li><strong>Armée des morts</strong> : <code>!cof-effet-temp armeeDesMorts @{selected|niveau} --limiteParJour 1 --mana 3</code>. La zone couverte est symbolisée par l'activation d'une aura sur le token du lanceur. Le script utilisera pour cela l'aura 2 du token, donc attention si vous l'utilisez déjà sur le token du lanceur, elle sera écrasée. Toute cible (le script ignore les alliés du lanceur) qui s'active dans une zone couverte par une armée recevra dans ses actions un bouton spécial pour se défendre. Les dégâts sont infligés automatiquement en début de tour. En option, le script support l'argument <code>--puissant</code> des règles de Mana de base, qui doublent la surface couverte (rayon 28m). Il est aussi possible d'utiliser l'option de Tempête de Mana ; la surface couverte sera multipliée par le nombre de PM investis en Magie Intense.</li>
                </ol>
                <h4 class="text-secondary">Voie du sang</h4>
                <ol>
                  <li><strong>Saignements</strong> :
                    <ul>
                      <li>Sort : Ajouter une attaque sur la fiche utilisant l'attaque magique, portée 10, type Sortilège, modificateurs <code>pasDeDmg necromancie</code>, options <code>--mana 0 --effet saignementsSang <i>rang</i></code>, où <i>rang</i> est le rang dans la Voie</li>
                      <li>Objet de sort : <code>#Attaque Saignements --toucher [[@{selected|ATKMAG}]] --pasDeDmg --portee 10 --sortilege --necromancie --effet saignementsSang <i>rang</i></code>, où <i>rang</i> est le niveau de l'objet</li>
                    </ul>
                    Si vous souhaitez que le saignement ne puisse pas être appliqué à certains personnages (comme des golems ou des squelettes), vous pouvez leur ajouter un <a href=#predicats>prédicat</a> <code>immuniteSaignement</code>.
                  </li>
                  <li><strong>Sang mordant</strong> : <code>!cof-effet-temp sangMordant [[5+@{selected|INT}]] --mana 0</code>.</li>
                  <li><strong>Exsangue</strong> : ajouter un <a href=#predicats>prédicat</a> <code>exsangue</code>.</li>
                  <li><strong>Hémorragie</strong> :
                    <ul>
                      <li>Sort : Ajouter une attaque sur la fiche utilisant l'attaque magique, portée 10, type Sortilège, modificateurs <code>pasDeDmg necromancie</code>, options <code>--mana 2 --effet hemorragie [[5+@{selected|INT}]]</code></li>
                      <li>Objet de sort : <code>#Attaque Hémorragie --toucher [[@{selected|ATKMAG}]] --pasDeDmg --portee 10 --sortilege --necromancie --effet hemorragie [[5+@{selected|INT}]]</code></li>
                    </ul>
                  </li>
                  <li><strong>Lien de sang</strong> :
                    <ul>
                      <li>Sort : Ajouter une attaque sur la fiche utilisant l'attaque magique, portée 20, type Sortilège, modificateurs <code>pasDeDmg necromancie</code>, options <code>--mana 3 --effet lienDeSang [[5+@{selected|INT}]]</code></li>
                      <li>Objet de sort : <code>#Attaque Lien de sang --toucher [[@{selected|ATKMAG}]] --pasDeDmg --portee 20 --sortilege --necromancie --effet lienDeSang [[5+@{selected|INT}]]</code></li>
                    </ul>
                    Pas de support pour le lancement de sort sans ligne de vue.
                  </li>
                </ol>
                <h4 class="text-secondary">Voie de la sombre magie</h4>
                <p style="margin-top:0px; margin-bottom:0px">Ajouter sur la fiche une compétence <code>Occultisme</code> avec en bonus 2 fois le rang dans cette voie.</p>
                <ol>
                  <li><strong>Ténèbres</strong> : <code>!cof-tenebres @{selected|token_id} @{target|token_id} --mana 0</code>. La commande pose un token transparent avec une aura noire visible par les joueurs pour visualiser la zone, et une petite aura jaune visible uniquement par le MJ (pour sélectionner le token si nécessaire). Tous les tokens présents dans la zone au lancement du sort sont automatiquement aveuglés. Au MJ ensuite d'enlever l'état aveuglé quand les cibles sortent de la zone. A la fin de la durée du sort, ou à la fin du combat, la zone et les états aveuglés restant disparaissent automatiquement. Il est aussi possible de changer les valeurs par défaut du sort (portée 20m, rayon 5m) avec les options <code>--portee X</code> et <code>--rayon X</code>. En règle custom, l'option <code>puissant</code> permet de doubler la superficie couverte (le script calcule le rayon approprié si custom).</li>
                  <li><strong>Pattes d'araignées</strong> : <code>!cof-lancer-sort peut se déplacer sur les murs pendants [[5+@{selected|INT}]] tours --mana 0</code></li>
                  <li><strong>Strangulation</strong> : Le script va vérifier que la cible est bien vivante, en se basant sur la race, et sinon sur la présence éventuelle d'un <a href=#predicats>prédicat</a> <code>nonVivant</code>.
                    <ul>
                      <li>Ajouter une attaque sur la fiche utilisant l'attaque magique, dommages 1d6+INT, portée 20, type Sortilège, dégâts magiques, modificateurs <code>necromancie</code>, options <code>--mana 1 --effet strangulation <i>rang</i></code></li>
                      <li><code>!cof-strangulation @{selected|token_id} @{target|token_id}</code> pour maintenir la strangulation</li>
                      <li>Pour un objet de sort, le code de l'attaque sera <code>#Attaque Strangulation --toucher [[@{selected|ATKMAG}]] --dm 1d6+[[@{selected|INT}]] --magique --portee 20 --sortilege --effet strangulation <i>rang</i></code></li>
                    </ul>
                  </li>
                  <li><strong>Ombre mortelle</strong> : <code>!cof-ombre-mortelle @{selected|token_id} @{target|token_id} [[3+@{selected|INT}]] --portee 20 --mana 2</code> va créer un double de la cible, (à condition de disposer de 2 points de mana) et ajouter ce double à l'initiative. Au MJ ensuite de la faire attaquer à son tour (pas d'aoe, juste attaquer le token dont elle est l'ombre). Le token disparaît lorsque le nombre de tours est écoulé. Il est possible de choisir l'image utilisée pour représenter l'ombre en passant l'url de l'image avec l'option <code>--image</code>.</li>
                  <li><strong>Intelligence héroïque</strong> : utiliser la fiche</li>
                </ol>
              </div>
              <h3 class="text-info" id="Pretre">Prêtre</h3>
              <div class="decalage">
                <h4 class="text-secondary">Voie de la foi</h4>
                <ol>
                  <li><strong>Parole divine</strong> : ajouter une compétence <code>convaincre</code>, de valeur 2 fois le rang dans la voie, et ajouter cette compétence dans la liste.</li>
                  <li>
                    <strong>Arme d'argent</strong> :
                    <ul>
                      <li>Pour attaquer avec l'arme d'argent, faire l'attaque avec les DM appropriés, les modificateurs <code>armeDArgent, magique</code> et l'option <code>--si etat armeDArgent</code>.</li>
                      <li><code>!cof-effet-combat armeDArgent --mana 0</code> pour lancer le sort. Vous pouvez ajouter l'option <code>--degainer <i>L</i></code> (où <i>L</i> est le label de l'attaque avec l'arme d'argent) si vous souhaitez que le prêtre puisse prendre l'arme en main dans le même tour.</li>
                    </ul>
                  </li>
                  <li><strong>Ailes célestes</strong> : <code>!cof-effet-temp ailesCelestes [[5+@{selected|SAG}]] --mana 1</code>.</li>
                  <li><strong>Foudres divines</strong> :
                    <ul>
                      <li>Sort : Ajouter une attaque sur la fiche utilisant l'attaque magique, dommages 1d6+SAG, portée 10, type Sortilège, dégâts électrique, modificateur <code>saufAllies</code>, option <code>--mana 2</code>. Décochez cette attaque, car elle sera appelée de manière spéciale : si le label de ce sort est <code><i>L</i></code>, il ne vous reste plus qu'à faire une action avec <code>!cof-explosion <i>L</i></code>.</li>
                      <li>Objet de sort : <code>!cof-explosion Foudres divines --toucher [[@{selected|ATKMAG}]] --dm 1d6+[[@{selected|SAG}]] --electrique --sortilege --portee 10 --saufAllies</code></li>
                    </ul>
                  </li>
                  <li><strong>Charisme héroïque</strong> : reporter les bonus sur la fiche</li>
                </ol>
                <h4 class="text-secondary">Voie de la guerre sainte</h4>
                <ol>
                  <li><strong>Arme bénie</strong> : utiliser les modificateurs <code>reroll1</code>, <code>beni</code> et <code>magique</code> à l'attaque</li>
                  <li><strong>Bouclier de la foi</strong> : ajuster le bonus de DEF du bouclier</li>
                  <li><strong>Marteau sprirituel</strong> :
                    <ul>
                      <li>Sort : Ajouter une attaque sur la fiche utilisant l'attaque magique, dommages 1d8+SAG, portée 30, type Sortilège, options <code>--mana 1</code></li>
                      <li>Objet de sort : <code>#Attaque Marteau sprirituel --toucher [[@{selected|ATKMAG}]] --dm 1d8+[[@{selected|SAG}]] --portee 30 --sortilege</code></li>
                    </ul>
                  </li>
                  <li><strong>Châtiment divin</strong> : Ajoutez dans la <a href="#actions_du_tour">actions du tour</a> une action nommée <code>Châtiment divin</code>, de code <code>#Attaque -1 --bonusAttaque [[@{selected|SAG}]] --plus [[@{selected|SAG}]]</code>.</li>
                  <li><strong>Mot de pouvoir</strong> : <code>!cof-effet-temp etourdi 1 --lanceur @{selected|token_id} --enVue --saufAllies --message @{selected|token_name} prononce un mot avec la voix de son dieu --mana 3</code></li>
                </ol>
                <h4 class="text-secondary">Voie de la prière</h4>
                <ol>
                  <li><strong>Bénédiction</strong> : <code>!cof-effet-temp benediction [[3+@{selected|SAG}]] --alliesEnVue --self --mana 0</code>. Il faut avoir défini une <a href="#allie">équipe</a> avec le prêtre.</li>
                  <li><strong>Destruction des morts-vivants</strong> : <code>!cof-destruction-des-morts-vivants 2d6 --mana 0</code>. Au rang 4 dans la voie, ajuster les dégâts. Notez que le script considère comme mort-vivant tout personnage avec le champ race à <code>squelette</code>, <code>zombie</code>, <code>momie</code>, <code>goule</code>,<code>vampire</code> ou <code>mort-vivant</code>, ou alors qui possède un <a href=#predicats>prédicat</a> <code>mortVivant</code>. Pour éviter la répétition abusive du sort, vous pouvez augmenter la difficulté à chaque fois que le sort est réussi pendant un même combat, avec l'option <code>--malusRepetition <i>m</i></code>. Un mort-vivant ayant le prédicat <code>immunite_destruction</code> ne sera pas affecté par ce sort.</li>
                  <li><strong>Sanctuaire</strong> : <code>!cof-effet-temp sanctuaire [[5+@{selected|SAG}]] --mana 1</code>.</li>
                  <li><strong>Intervention Divine</strong> : ajouter au personnage un <a href=#predicats>prédicat</a> <code>interventionDivine</code>. Ensuite, utiliser <code>!cof-intervention-divine ?{Type ?|rate|touche}</code> juste après l'attaque en sélectionnant le token du Prêtre pour modifier le résultat selon le choix. Il est très pratique de mettre cette commande dans une Ability à afficher en Token Action. Ne supporte que le jet de touche de la dernière attaque effectuée.</li>
                  <li><strong>Sagesse héroïque</strong> : Reporter les bonus sur la fiche.</li>
                </ol>
                <h4 class="text-secondary">Voie des soins</h4>
                <p style="margin-top:0px; margin-bottom:0px">Ajouter un <a href=#predicats>prédicat</a> <code>voieDesSoins</code> avec comme valeur le rang dans la voie.</p>
                <ol>
                  <li><strong>Soins légers</strong> : <code>!cof-soin @{selected|token_id} @{target|token_id} leger --mana 0</code>. Vous pouvez rajouter un petit effet visuel, par exemple avec <code>--targetFx bubbling-holy</code>. À titre personnel, j'ajoute <code>--depasseLimite 1</code> pour permettre de lancer plus de sorts de soins léger en une journée (mais avec une augmentation cumulative du coût en mana de 1 à chaque dépassement).</li>
                  <li><strong>Soins modérés</strong> : <code>!cof-soin @{selected|token_id} @{target|token_id} modere --mana 0</code>.</li>
                  <li><strong>Soins de groupe</strong> : <code>!cof-soin @{selected|token_id} groupe --mana 1</code> (ne pas oublier de définir des <a href="#allie">alliés</a>). Attention, toutefois, le sort ne va pas automatiquement soigner les personnages notés comme morts, ce qui est le cas général si ils sont tombés à 0 PV. Si certains alliés notés morts ne sont pas vraiment morts, mais juste inconscient, il faudra que le MJ fasse la mise à jour de l'état et des PV lui-même.</li>
                  <li><strong>Guérison</strong> : <code>!cof-guerison @{selected|token_id} @{target|token_id} --portee 0 --limiteParJour 1 --mana 2</code>. Pour l'instant ça ne fait que remettre les points de vie au maximum.</li>
                </ol>
                <h4 class="text-secondary">Voie de la spiritualité</h4>
                <ol>
                  <li><strong>Vêtements sacrés</strong> : Ajouter un <a href=#predicats>prédicat</a> <code>vetementsSacres</code> avec comme valeur le rang dans la voie de la spiritualité. Cela augmente la DEF, mais seulement lorsque le prêtre ne porte pas d'armure (ne se voit pas sur le total de DEF de la fiche)</li>
                  <li><strong>Protection contre le mal</strong> : <code>!cof-effet-combat protectionContreLeMal --lanceur @{selected|token_id} --target @{target|token_id} --portee 0 --mana 0</code>. Donne le bonus contre toute créature dont l'attribut <code>race</code> est <code>squelette</code>, <code>zombie</code>, <code>démon</code>, <code>élémentaire</code>, ou bien qui possède un <a href=#predicats>prédicat</a> <code>mauvais</code>.</li>
                  <li><strong>Délivrance</strong> : <code>!cof-delivrance @{selected|token_id} @{target|token_id} --portee 0 --mana 1</code></li>
                  <li><strong>Marche des plans</strong> : <code>!cof-lancer-sort marche entre les plans (il peut se déplacer de [[(3+@{selected|SAG})*10]] km) --mana 2</code>.</li>
                  <li><strong>Messie</strong> : pas d'autre support que <code>!cof-lancer-sort entre directement en contact avec son dieu pour réaliser un miracle --mana 3</code></li>
                </ol>
              </div>
              <h3 class="text-info" id="Psionique">Psionique</h3>
              <div class="decalage">
                <h4 class="text-secondary">Voie de l'attaque mentale</h4>
                <ol>
                  <li><strong>Attaque mentale</strong> : faire 2 attaques, une pour les DMs létaux, avec les options <code>--sortilege --attaqueMentale --mana 0</code> et l'autre avec l'option supplémentaire <code>--tempDmg</code> (et en ajustant les DM).</li>
                  <li><strong>Bouclier psi</strong> : ajouter un <a href=#predicats>prédicat</a> <code>bouclierPsi</code>.</li>
                  <li><strong>Attaque étourdissante</strong> : faire une attaque mentale, avec les options <code>--avecd12 --if moins niveau --if etatCible bouclierPsi --effet etourdi 1 --save CHA [[8+@{selected|CHA}]] --else --effet etourdi 1 --endif --endif --mana 1</code>.</li>
                  <li><strong>Vague psionique</strong> : faire les attaques mentales sur toutes les cibles. En cas d'utilisation avec la Mana, le plus simple est de faire deux ability :
                    <ul>
                      <li><code>!cof-lancer-sort lance une vague psychique --mana 2</code> qui lance le sort (pratique pour y mettre votre dépense de Mana unique)</li>
                      <li>Une ability qui permet de faire une attaque mentale (sans dépense de Mana)</li>
                    </ul>
                  </li>
                  <li><strong>Ego héroïque</strong> : reporter les bonus sur la fiche</li>
                </ol>
                <h4 class="text-secondary">Voie du contrôle corporel</h4>
                <ol>
                  <li><strong>Proprioception</strong> : ajouter les PVs sur la fiche, et ajouter un <a href=#predicats>prédicat</a> <code>proprioception</code>. </li>
                  <li><strong>Transe de régénération</strong> : ajoutez une ability <code>!cof-soin @{selected|token_id} 1d6+[[@{selected|niveau} + @{selected|CHA}]] --limiteParJour <i>rang</i> --mana 0 --message entre en transe de régénération pour [[2d6]] tours</code>.</li>
                  <li><strong>Contrôle du métabolisme</strong> : ajouter un <a href=#predicats>prédicat</a> <code>controleDuMetabolisme</code>. Ne pas modifier l'initiative, le bonus de charisme sera pris en compte par le script.</li>
                  <li><strong>Contrôle sanguin</strong> : ajouter un <a href=#predicats>prédicat</a> <code>controleSanguin</code>. Le script immunise aux poison, aux effets saignements automatisés, et divise par deux les dommages des attaques avec <code>--vampirise</code>.</li>
                </ol>
                <h4 class="text-secondary">Voie de l'empathie</h4>
                <ol>
                  <li><strong>Perception extra-sensorielle</strong> : ajuster l'initiative et ajouter le bonus à une compétence <code>perception</code> (pour les jets).</li>
                  <li><strong>Défense intuitive</strong> : ajouter un <a href=#predicats>prédicat</a> <code>defenseIntuitive</code>. Ne pas modifier la DEF sur la fiche, la sagesse sera automatiquement prise en compte.</li>
                  <li><strong>Perception du passé</strong> : <code>!cof-lancer-sort tente de percevoir le passé --mana 1</code> pour lancer le sort. On peut faire le jet en utilisant <code>!cof-jet SAG 15</code>.</li>
                  <li><strong>Vision lointaine</strong> : pas de support autre que <code>!cof-lancer-sort projette son esprit à grande distance --mana 2</code>. Utiliser <code>!cof-jet SAG</code> pour les jets de sagesse.</li>
                  <li><strong>Perception héroïque</strong> : reporter les bonus sur la fiche</li>
                </ol>
                <h4 class="text-secondary">Voie de la télékinésie</h4>
                <ol>
                  <li><strong>Manipulation à distance</strong> : pour les attaques à distance, le plus simple est d'utiliser une autre attaque en utilisant le score d'attaque magique et le bon modificateur de DMs.</li>
                  <li><strong>Champ de protection</strong> : pour l'effet de base, si vous suivez les règles, ajustez simplement la DEF sur la fiche. Si vous préférez en faire un sort, vous pouvez utiliser la commande <code>!cof-effet-temp champDeProtection [[5+@{selected|CHA}]]</code>. La valeur par défaut est celle d'un <a href=#predicats>prédicat</a> <code>voieDeLaTelekinesie</code>, et pour utiliser une autre valeur, on peut utiliser l'option <code>--valeur</code>. Pour le champ à distance, faire <code>!cof-effet-temp champDeProtection 1 --lanceur @{selected|token_id} --portee 10 --valeur <em>n</em> --target @{target|token_id}</code>. </li>
                  <li><strong>Onde de choc</strong> :
                    <ul>
                      <li>Sort : Ajouter une attaque sur la fiche dommages 1d8+CHA, portée 0, type Sortilège, modificateurs <code>auto</code>, options <code>--mana 1 --disque ?{Portée (max 10) ?|10} --etat renverse --save FOR [[10+@{selected|CHA}]] --targetFx explode-magic</code>. Décochez cette attaque, et appelez la dans une action qui fait <code>!cof-explosion <i>l</i></code> où <i>i</i> est le label de l'attaque.</li>
                      <li>Objet de sort : <code>!cof-explosion Onde de choc --auto --dm 1d8+[[@{selected|SAG}]] --portee 0 --sortilege --disque ?{Portée (max 10) ?|10} --etat renverse --save FOR [[10+@{selected|CHA}]] --targetFx explode-magic</code></li>
                    </ul>
                  </li>
                  <li><strong>Combat kinétique</strong> : créer un <a href=#predicats>prédicat</a> <code>combatKinetique</code>. Cela appliquera automatiquement la RD dans tous les cas où le personnage est attaqué par un adversaire et qu'il est conscient. Pour l'augmentation des dommages, reporter sur les attaques sur la fiche.</li>
                  <li><strong>Psychoportation</strong> : <code>!cof-lancer-sort s'élève dans les airs pendant [[5+@{selected|INT}]] tours --mana 3</code>. Passer la FOR en caractéristique supérieure via la fiche.</li>
                </ol>
                <h4 class="text-secondary">Voie de la télépathie</h4>
                <ol>
                  <li><strong>Télépathie</strong> : pas de support autre que <code>!cof-lancer-sort communique par télépathie pendant [[5+@{selected|SAG}]] tours --mana 0</code></li>
                  <li><strong>Radar mental</strong> : ajouter un <a href=#predicats>prédicat</a> <code>radarMental</code>, de valeur le bonus procuré par le radar mental (2 fois le rang dans la voie). En cas de surprise provoquée par quelque chose de non-vivant penser à utiliser l'option <code>--nonVivant</code> dans <code>!cof-surprise</code>.</li>
                  <li><strong>Suggestion</strong> : utiliser <code>!cof-attaque-magique-contre-pv @{selected|token_id} @{target|token_id} --limiteParJour 1 suggestion --mana 1</code> (attention, ça ne teste pas si la cible a un niveau inférieur au psionique, ni si la cible est pensante).</li>
                </ol>
              </div>
              <h3 class="text-info" id="Rôdeur">Rôdeur</h3>
              <div class="decalage">
                <h4 class="text-secondary">Voie de l'archer</h4>
                <ol>
                  <li><strong>Sens affutés</strong> : Créez un <a href=#predicats>prédicat</a> <code>sensAffutes</code>. Cela va ajuster l'initiative (ne se voit pas sur la fiche), ainsi que les dégâts des arcs (attention à ne pas en plus le rajouter sur la fiche !).  Ajoutez ensuite le bonus aux compétences <code>perception</code> et <code>vigilance</code> (ou créez-les).</li>
                  <li><strong>Tir aveugle</strong> : utiliser une attaque avec l'option <code>--tirAveugle</code>.</li>
                  <li><strong>Tir rapide</strong> : faire simplement deux attaques dans le tour</li>
                  <li><strong>Flèche de mort</strong> : faire l'attaque avec les options <code>--m2d20 --incrDmgCoef</code></li>
                  <li><strong>Dans le mille</strong> : faire l'attaque avec les options <code>--avecd12crit --plus 2d6</code></li>
                </ol>
                <h4 class="text-secondary">Voie du compagnon animal</h4>
                <ol>
                  <li><strong>Odorat</strong> : ajouter une compétence <code>pistage</code>, de valeur 5 (ou augmentée de 5)</li>
                  <li><strong>Surveillance</strong> : ajouter un attribut <code>surveillance</code>, avec comme valeur le nom du compagnon (doit être exactement le même que celui du token du compagnon). Cela automatise l'initiative et le bonus aux jets de surprise, le reste se gère manuellement</li>
                  <li><strong>Combat</strong> : ajouter le loup sous contrôle du joueur. Si vous souhaitez que le loup rentre en combat à chaque fois que le rôdeur entre en combat, ajoutez au rôdeur un attribut nommé <code>entrerEnCombatAvec</code>, de valeur le nom du token du loup.</li>
                  <li><strong>Empathie animale</strong> : pour soigner, utiliser <code>!cof-soin @{selected|token_id} <i>nom_familier</i> ?{Montant des soins} --transfer</code></li>
                  <li><strong>Animal fabuleux</strong> : ajuster les caractéristiques du loup</li>
                </ol>
                <h4 class="text-secondary">Voie de l'escarmouche</h4>
                <ol>
                  <li><strong>Chasseur émérite</strong> : ajouter un <a href=#predicats>prédicat</a> <code>chasseurEmerite</code>. Puis, si dans le profil (attribut PROFIL) de la cible, il y a <code>animal</code> (ou si la cible a un prédicat <code>animal</code>), le bonus s'applique. Ajouter aussi le bonus à une compétence <code>pistage</code>.</li>
                  <li><strong>Traquenard</strong> : ajouter un <a href=#predicats>prédicat</a> <code>traquenard</code>, puis option <code>--traquenard</code> pour l'attaque. Pour une utilisation pratique, le mieux est de faire une attaque d'arme en main avec l'option : <code>#Attaque -1 --traquenard</code>.</li>
                  <li><strong>Attaque éclair</strong> : <code>--plus [[@{selected|DEX}]] --bonusAttaque [[@{selected|DEX}]]</code></li>
                  <li><strong>Repli</strong> : simplement faire un jet en utilisant par exemple <code>!cof-jet DEX 10</code>, et décrire le résultat.</li>
                  <li><strong>Dextérité héroïque</strong> : reporter sur la fiche.</li>
                </ol>
                <h4 class="text-secondary">Voie de la survie</h4>
                <ol>
                  <li><strong>Endurant</strong> : ajouter une compétence <code>survie</code>, de caractéristique CON, avec le bonus 2xrang dans la Voie.</li>
                  <li><strong>Nature nourricière</strong> : pour la recherche d'herbes, ajouter un <a href=#predicats>prédicat</a> <code>voieDeLaSurvie</code> avec comme valeur le rang du personnage dans la voie. On peut utiliser <code>!cof-nature-nourriciere</code> pour lancer la recherche. Cela crée automatiquement les doses de plantes médicinales dans les consommables du personnage. Ces doses sont supprimées toutes les nuits. Pour les besoins d'un personnage, j'ai aussi donné la possibilité de trouver des baies magiques à la place des herbes médicinales. Pour cela, il faut un <a href=#predicats>prédicat</a> <code>natureNourriciereBaies</code>.</li>
                  <li><strong>Grand pas</strong> : ajouter les compétences <code>natation</code> et <code>escalade</code>, de valeur 5.</li>
                  <li><strong>Increvable</strong> : ajouter un <a href=#predicats>prédicat</a> <code>increvable</code>.</li>
                  <li><strong>Constitution héroïque</strong> : reporter les bonus sur la fiche</li>
                </ol>
                <h4 class="text-secondary">Voie du traqueur</h4>
                <ol>
                  <li><strong>Pas de loup</strong> : ajouter le bonus à une compétence <code>discrétion</code>.</li>
                  <li><strong>Ennemi juré</strong> : ajouter un attribut <code>ennemiJure</code> avec comme valeur la race des ennemis. Cette race doit se retrouver dans le champ race de l'ennemi. Le script reconnait aussi le type <code>mort-vivant</code> (tout en minuscules) et dans ce cas va déterminer si la cible est un mort-vivant (prédicat <code>mortVivant</code> ou race reconnue comme mort-vivant), ainsi que le type <code>géant</code> (pour les géants, ogres, trolls, etc.) et le type <code>gobelin</code>.</li>
                  <li><strong>Embuscade</strong> : en cas d'attaque sur les ennemis, les mettre tous surpris avec la commande <code>!cof-set-state surpris true</code></li>
                  <li><strong>Second ennemi juré</strong> : on peut renseigner une seconde race dans l'attribut <code>ennemiJure</code> en la séparant de la première par une virgule (exemple : <code>orque, araignée</code>)</li>
                  <li><strong>Perception héroïque</strong> : reporter les bonus sur la fiche</li>
                </ol>
              </div>
              <h3 class="text-info" id="Samouraï">Samouraï</h3>
              <div class="decalage">
                <h4 class="text-secondary">Voie de l'arc et du cheval</h4>
                <ol>
                  <li><strong>Monture loyale</strong> : ajouter un <a href=#predicats>prédicat</a> <code>montureLoyale</code>. Pour la monture, il faut faire un personnage avec un <a href=#predicats>prédicat</a> <code>monture</code>. Pour monter sur la monture, utiliser <code>!cof-en-selle @{selected|token_id} nom_de_la_monture</code>, et pour en descendre, il suffit de faire la même commande (utiliser une ability "token action" rend cela assez facile à l'usage).</li>
                  <li><strong>Tir en mouvement</strong> : pas de support particulier.</li>
                  <li><strong>Tir fatal</strong> : ajouter un prédicat <code>tirFatal</code>. Pour tenir compte du bonus supplémentaire avec le rang dans la voie, ajouter un <a href=#predicats>prédicat</a> <code>voieDeLArcEtDuCheval</code> de valeur le rang atteint dans cette voie. Si vous souhaitez que cette capacité s'applique à une autre classe d'arme que les arcs, vous pouvez associer ce nom au prédicat <code>tirfatal</code> (attention, sans accent). Par exemple, pour les arbalètes, <code>tirFatal:arbalete</code>.</li>
                </ol>
                <h4 class="text-secondary">Voie du dirigeant</h4>
                <ol>
                  <li><strong>Éduqué</strong> : simplement noter les bonus et compétences sur la fiche.</li>
                  <li><strong>Homme de cour</strong> : ajouter une compétence <code>étiquette</code>, de valeur 5.</li>
                  <li><strong>Lame de lignée</strong> : pas de support particulier pour l'arme, mais quand le samouraï perd l'arme, vous pouvez rajouter un attribut <code>lameDeLigneePerdue</code>, de valeur <code>true</code> (à effacer quand il la retrouve).</li>
                </ol>
                <h4 class="text-secondary">Voie de l'honneur</h4>
                <ol>
                  <li><strong>Chef né</strong> : ajouter un <a href=#predicats>prédicat</a> <code>immunite_peur</code>, et des compétences pour l'intimidation et commander.</li>
                  <li><strong>Défi</strong> : <code>!cof-defi-samourai @{selected|token_id} @{target|token_id} <i>bonus</i></code>. Le bonus en argument est optionnel. S'il n'est pas présent, le script utilise la valeur d'un <a href=#predicats>prédicat</a> <code>voieDeLHonneur</code>.</li>
                  <li><strong>Honorable</strong> : pas de support particulier. </li>
                </ol>
                <h4 class="text-secondary">Voie du ki</h4>
                <ol>
                  <li><strong>Esprit vide</strong> : ajouter un <a href=#predicats>prédicat</a> <code>espritVide</code>. Si vous voulez un boonus différent (par exemple à partir du rang 4 dans la voie), associez les bonus au prédicat.</li>
                  <li><strong>Main vide</strong> : faire l'attaque à mains nues correspondant à la capacité.</li>
                  <li><strong>Kiai</strong> : ajouter un <a href=#predicats>prédicat</a> <code>kiai</code>, de valeur <code>1</code>. Au rang 5, mettre cette valeur à <code>2</code>, le script se charge d'attendre 1d6 tours avant de proposer le deuxième kiai.</li>
                </ol>
                <h4 class="text-secondary">Voie du sabre</h4>
                <ol>
                  <li><strong>Technique du sabre</strong> : ajouter un <a href=#predicats>prédicat</a> <code>techniqueDuSabre</code>, de valeur le rang dans la Voie.</li>
                  <li><strong>Frappe du vide</strong> : ajouter un <a href=#predicats>prédicat</a> <code>frappeDuVide</code>.</li>
                  <li><strong>Lames Jumelles</strong> : faire les attaques avec le modificateur <code>lamesJumelles</code> permet de prendre en compte la force courante de l'attaquant pour les malus éventuels à l'attaque. Comme le samouraï va par défaut commencer le combat les mains vides, et qu'avec cette capacité il voudra certainement dégainer à la fois le katana et le wakizachi, on peut utiliser un prédicat pour lui faciliter la tâche : si le label du katana est <code>5</code> et celui du wakizachi par exemple <code>3</code>, ajouter un prédicat <code>actionDegainer1:5-3</code> (de cette façon, le fait de dégainer le katana et le wakizachi sera en tête de liste).</li>
                </ol>
              </div>
              <h3 class="text-info" id="Voleur">Voleur</h3>
              <div class="decalage">
                <h4 class="text-secondary">Voie de l'assassin</h4>
                <ol>
                  <li><strong>Discrétion</strong> : ajouter une compétence discrétion sur la fiche, avec le bon bonus. </li>
                  <li><strong>Attaque sournoise</strong> : Ajouter un <a href=#predicats>prédicat</a> <code>attaqueSournoise</code>, de valeur le nombre de dés de l'attaque sournoise. Ensuite, faire des versions des attaques avec <code>--sournoise</code>. Au MJ de vérifier que les conditions de l'attaque sournoise sont remplies. Le plus pratique pour l'utilisation avec différentes armes, est d'ajouter à la liste des <a href="#actions_du_tour">actions du tour</a> une action de titre <code>Attaque sournoise</code> et de code <code>#Attaque -1 --sournoise</code>.</li>
                  <li><strong>Ombre mouvante</strong> : utiliser la commande <code>!cof-ombre-mouvante --fx burst-smoke</code> (la partie <code>--fx burst-smoke</code> peut être omise ou changée, bien sûr). Le script ne gère pas encore l'attaque sournoise qui peut suivre, au MJ de surveiller l'initiative du voleur par rapport à sa cible.</li>
                  <li><strong>Surprise</strong> : ajouter un <a href=#predicats>prédicat</a> <code>immunite_surpris</code>. Pour le reste, à gérer par le MJ.</li>
                  <li><strong>Ouverture mortelle</strong> : ajouter les options <code>--ouvertureMortelle --limiteParCombat 1 ouvertureMortelle --sournoise</code>. Selon les <a href="https://www.black-book-editions.fr/forums.php?topic_id=4800&tid=477673#msg477673">indications de Kegron</a>, ne mettre la partie <code>--sournoise</code> que si les conditions s'y prêtent (dans le dos, surprise, acrobatie, etc).</li>
                </ol>
                <h4 class="text-secondary">Voie de l'aventurier</h4>
                <ol>
                  <li><strong>Sprint</strong> : Pour vérifier que ce n'est bien utilisé qu'une fois par combat, on pourra utiliser <code>!cof-lancer-sort pousse un sprint --limiteParCombat 1 sprint</code>.</li>
                  <li><strong>Provocation</strong> : <code>!cof-provocation @{selected|token_id} @{target|token_id}</code>. Au joueur ensuite de faire son attaque gratuite si la provocation est réussie et que l'adversaire l'attaque.</li>
                  <li><strong>Grâce féline</strong> : ajouter un <a href=#predicats>prédicat</a> <code>graceFeline</code>. Cela va affecter l'initiative et la DEF, mais sans se voir sur la fiche. Pour les tests de déplacement, ajouter un <a href=#predicats>prédicat</a> <code>graceFelineVoleur</code> (penser à proposer l'utilisation de compétences, en ajoutant les compétences <code>course</code>, <code>saut</code>, <code>acrobatie</code> et <code>escalade</code> au voleur ou sur le handout de compétences).</li>
                </ol>
                <h4 class="text-secondary">Voie du déplacement</h4>
                <ol>
                  <li><strong>Esquive</strong> : Ajouter un <a href=#predicats>prédicat</a> <code>esquiveVoleur</code>, de valeur le rang dans la voie. Ne pas modifier la DEF sur la fiche, le script fera les ajustements (et montrera le total avec <code>!cof-statut</code>).</li>
                  <li><strong>Chute</strong> : pas de support particulier.</li>
                  <li><strong>Acrobaties</strong> : faire <code>!cof-jet DEX 15 --nom acrobatie</code> pour le jet de dextérité, le reste est géré par le MJ. Il est possible d'automatiser quand le personnage décide de faire une attaque quel que soit le résultat du jet d'acrobatie grace à la commande <code>#Attaque -1 --attaqueAcrobatique</code>.</li>
                  <li><strong>Esquive de la magie :</strong> ajouter un <a href=#predicats>prédicat</a> <code>esquiveDeLaMagie</code>.</li>
                  <li><strong>Dextérité héroïque :</strong> ajouter les bonus sur la fiche</li>
                </ol>
                <h4 class="text-secondary">Voie du roublard</h4>
                <ol>
                  <li><strong>Doigts agiles</strong> : utiliser des compétences sur la fiche de personnage</li>
                  <li><strong>Détecter les pièges</strong> : faire le jet avec <code>!cof-jet INT ?{Piège normal?|Oui,10|Magique,15} --secret</code></li>
                  <li><strong>Croc-en-jambe</strong> : ajouter un <a href=#predicats>prédicat</a> <code>crocEnJambe</code>. Pour distinguer les adversaires quadrupèdes qui ne seraient pas connues du script, lui ajouter un <a href=#predicats>prédicat</a> <code>quadrupede</code>.</li>
                  <li><strong>Attaque paralysante</strong> : lancer une des attaques de contact du voleur en rajoutant les options <code>--limiteParCombat 1 attaqueParalysante --pasDeDmg --effet paralysieRoublard [[1d4]]</code>.</li>
                  <li><strong>Attaque en traître</strong> : Ajouter un <a href=#predicats>prédicat</a> <code>attaqueEnTraitre</code>. Les actions affichées en cas d'attaque en traître seront par défaut une attaque avec l'arme en main et les attaques naturelles de la fiche cochées. Si cela ne convient pas, vous pouvez créer une liste d'actions nommée <code>Attaques en traitre</code> contenant les attaques possibles pour l'attaque en traître.</li>
                </ol>
                <h4 class="text-secondary">Voie du spadassin</h4>
                <ol>
                  <li><strong>Attaque en finesse</strong> : faire les modifications sur la fiche</li>
                  <li><strong>Esquive fatale</strong> : Ajouter un <a href=#predicats>prédicat</a> <code>esquiveFatale</code> (on peut y associer un nombre pour permettre plus d'une utilisation par combat). En combat, si la situation s'y prête, un bouton permettre d'utiliser l'esquive. Ne pas oublier de définir les alliés du voleur pour que la vérification des cibles soit correcte.</li>
                  <li><strong>Frappe chirurgicale</strong> : ajouter un <a href=#predicats>prédicat</a> <code>frappeChirurgicale</code>.</li>
                  <li><strong>Ambidextrie</strong> : pas géré par le script.</li>
                  <li><strong>Botte secrète</strong> : ajouter un <a href=#predicats>prédicat</a> <code>botteSecrete</code>. Ne pas oublier le prédicat <code>attaqueSournoise</code> qui doit être associé au nombre de dés des attaques sournoises du voleur.</li>
                </ol>
              </div>
            </div>
            <h2 class="text-primary" id="Autres_capacités">4. Autres capacités</h2>
            <div class="decalage">
              <h3 class="text-info" id="Capacites_raciales">4.1 Voies et capacités raciales</h3>
              <div class="decalage">
                Quelques capacités communes à plusieurs races :
                <ul>
                  <li id="Vision_dans_le_noir"><strong>Vision dans le noir</strong> : ajoutez un <a href=#predicats>prédicat</a> <code>visionDansLeNoir</code> de valeur le nombre de metres à laquelle le personnage peut voir dans le noir. Le script va adapter la vison dans le noir à l'unité de mesure utilisée sur la page où le token du personnage est créé.</li>
                </ul>
                <h4 class="text-secondary">Âme forgée</h4>
                <p>Pour les capacités raciales, un <a href=#predicats>prédicat</a> <code>vieArtificielle</code> permet de diviser tous les soins par 2. Pour la résistance aux effets de drains, au feu et au froid, ajouter dans la RD sur la fiche <code>drain:5, feu:5, froid:5</code>. Pour l'immunité aux poisons et maladies, utiliser un <a href=#predicats>prédicat</a> <code>creatureArtificielle</code>. Enfin pour le saignement, ajouter un <a href=#predicats>prédicat</a> <code>immuniteSaignement</code>.</p>
                <ol>
                  <li><strong>Main lourde</strong> : ajuster les DM, et enlever l'option <code>--tempDmg</code> pour l'attaque à mains nues.</li>
                </ol>
                <h4 class="text-secondary">Demi-ogre</h4>
                <ul>
                  <li><a href="#Vision_dans_le_noir">Vision dans le noir</a>.</li>
                  <li><strong>Énorme</strong> : pas de support, ajuster les attaques</li>
                  <li><strong>Grande taille</strong> : quand le demi-ogre rentre dans une construction de taille humaine, utiliser <code>!cof-effet constructionTailleHumaine true</code>. À la sortie du bâtiment, <code>!cof-effet constructionTailleHumaine false</code>. Pour les espaces exigus, de même avec l'effet <code>espaceExigu</code>.</li>
                  <li><strong>Réaction violente</strong> : en cas de provocation, exécuter <code>!cof-effet-temp reactionViolente [[1d6]] --save SAG 10</code>. On peut par exemple mettre ce code en ability liée au token. Au MJ et au joueur de gérer les actions qui s'ensuivent. Le script propose une action à l'ogre pour prendre sur lui à chaque tour.</li>
                </ul>
                <ol>
                  <li><strong>Sang-froid</strong> : ajouter un prédicat <code>sangFroid</code>. Modifier la commande pour les provocations en <code>!cof-effet-temp reactionViolente [[1d4]] --save SAG 5</code>. </li>
                  <li><strong>Violence ciblée</strong> : ajouter un prédicat <code>violenceCiblee</code>.</li>
                </ol>
                <h4 class="text-secondary">Demi-orque</h4>
                <a href="#Vision_dans_le_noir">Vision dans le noir</a>.
                <ol>
                  <li><strong>Force de la nature</strong> : ajouter les bonus sur la fiche</li>
                  <li><strong>Talent pour la violence</strong> : voir les capacités choisies</li>
                  <li><strong>Critique brutal</strong> : pour l'instant, ajouter le modificateur <code>incrCritCoef</code> pour toutes les attaques au contact.</li>
                  <li><strong>Attaque sanglante</strong> : faire une attaque (ou liste d'attaques) avec les options <code>--effet blessureQuiSaigne --saveParTour CON [[12 + @{selected|FOR}]]</code></li>
                  <li><strong>Colosse</strong> : augmenter les caractéristiques sur la fiche.</li>
                </ol>
                <h4 class="text-secondary">Elfe sylvain</h4>
                <ol>
                  <li><strong>Grâce elfique</strong> : simplement reporter sur la fiche</li>
                  <li><strong>Enfant de la forêt</strong> : voir les capacités choisies</li>
                  <li><strong>Archer émérite</strong> : ajuster les chances de critique sur les attaques à l'arc</li>
                  <li><strong>Flèche sanglante</strong> : faire une attaque (ou liste d'attaques) avec les options <code>--effet blessureQuiSaigne --saveParTour CON [[12 + @{selected|DEX}]]</code></li>
                  <li><strong>Supériorité elfique</strong> : augmenter les caractéristiques sur la fiche.</li>
                </ol>
                <h4 class="text-secondary" id="fee_et_lutin">Fée et lutin</h4>
                <ul>
                  <li><a href="#Vision_dans_le_noir">Vision dans le noir</a>.</li>
                  <li><strong>Tout petit</strong> : ajouter un <a href=#predicats>prédicat</a> <code>toutPetit</code> qui va automatiquement ajuster la défense et les jets de discrétion.</li>
                  <li><strong>Vol</strong> et <strong>Téléportation</strong> : pas de support.</li>
                  <li><strong>Trop petit</strong> : ajouter un <a href=#predicats>prédicat</a> <code>tropPetit</code>. Cela va aussi changer les dégâts de base des armes (il vaut mieux laisser les vrais DM pour que la capacité Grande taille fonctionne).</li>
                </ul>
                <ol>
                  <li><strong>Langage des animaux</strong> : aucun support</li>
                  <li><strong>Invisibilité</strong> : <code>!cof-set-state invisible true --message se rend invisible --messageMJ l'invisibilité va durer [[1d6+@{selected|INT}]] minutes --limiteParJour <i>r</i></code> où <i>r</i> est le rang dans la Voie.</li>
                  <li><strong>Monture féérique</strong> : ajouter un ersonnage pour la monture. Ajoutez-lui le <a href=#predicats>prédicat</a> <code>monture</code>. Pour monter sur la monture, utiliser <code>!cof-en-selle @{selected|token_id} nom_de_la_monture</code>, et pour en descendre, il suffit de faire la même commande (utiliser une ability "token action" rend cela assez facile à l'usage). Si vous souhaitez que la monture rentre en combat à chaque fois que l'être féérique entre en combat, ajoutez à l'être féérique un attribut nommé <code>entrerEnCombatAvec</code>, de valeur le nom du token de la monture.</li>
                  <li><strong>Grande taille</strong> : <code>!cof-effet grandeTaille oui --lanceur @{selected|token_id} --limiteParJour 3 --messageMJ La taille humaine durera [[1d6+@{selected|CHA}]] minutes</code>. Le script ne gère pas les durées en minutes, le MJ devra penser à supprimer l'effet, par exemple depuis le statut (<code>!cof-statut</code>).</li>
                </ol>
                <h4 class="text-secondary">Félis</h4>
                <ol>
                  <li><strong>Âme féline :</strong> ajouter un prédicat <code>ameFeline</code>, de valeur le rang dans la voie. Pensez à ajouter des compétences pour le mouvement sur la fiche si ils ne sont pas déjà présent dans votre handout de compétences.</li>
                  <li><strong>Armes naturelles :</strong>
                    <ul>
                      <li>Créez une attaque "Griffes et crocs" naturelle de contact avec en DM 1d6 + Mod de FOR et les options <code>--si etat armesNaturelles --message Attaque de ses griffes et crocs !</code>.</li>
                      <li>Pour faire sortir les griffes, dans l'onglet script, ajouter une action "Sortir/rentrer les griffes" faisant <code>!cof-effet armesNaturelles</code>.</li>
                    </ul>
                  </li>
                </ol>
                <h4 class="text-secondary">Gnome</h4>
                <ol>
                  <li><strong>Petit pote</strong> : ajouter le bonus de CHA sur la fiche</li>
                  <li><strong>Don occulte</strong> : se reporter aux capacités choisies.</li>
                  <li><strong>Insignifiant</strong> :  ajouter un <a href=#predicats>prédicat</a> <code>insignifiant</code>.
                </ol>
                <h4 class="text-secondary">Halfelin</h4>
                <p>Petite taille : ajouter le bonus de DEF sur la ficher, et ajouter 2 à une compétence <code>discrétion</code>.</p>
                <ol>
                  <li><strong>Petit veinard</strong> : ajouter un <a href=#predicats>prédicat</a> <code>petitVeinard</code> (on peut y associer un nombre si on veut plus d'une utilisation par combat). Le script ne va automatiser que les relancer de dés d'attaque ou de jets de caractéristiques (et encore, pas tous). Il propose d'utiliser la chance à chaque attaque, même réussie, mais dans ce cas, c'est au joueur de relancer le dé concerné, et au MJ d'en appliquer les conséquences.</li>
                  <li><strong>Résistance légendaire</strong> : ajouter le bonus en CON sur la fiche, et ajouter un <a href=#predicats>prédicat</a> <code>DEF_magie</code> avec comme valeur 5.</li>
                </ol>
                <h4 class="text-secondary">Haut elfe</h4>
                <ol>
                  <li><strong>Grâce elfique</strong> : ajouter les bonus sur la fiche</li>
                  <li><strong>Talent pour la magie</strong> : voir les capacités choisies</li>
                  <li><strong>Force d'âme</strong> : ajouter des <a href=#predicats>prédicat</a> <code>immunite_peur</code> et <code>immunite_endormi</code>. Ajouter aussi des attributs <code>DEF_magie</code> et <code>bonusSagesseMagie</code> de valeur <code>5</code>.</li>
                </ol>
                <h4 class="text-secondary">Humain</h4>
                <p>Instinct de survie : créer un <a href=#predicats>prédicat</a> <code>instinctDeSurvieHumain</code>.</p>
                <ol>
                  <li><strong>Adaptable</strong> : ajouter un <a href=#predicats>prédicat</a> <code>adaptable</code>, de valeur le bonus en cas de test raté. Le script ne va appliquer le bonus que pour les tests avec difficulté identifiée. Le MJ devra l'appliquer dans les cas ratés par le script.</li>
                  <li><strong>Loup parmi les loups</strong> : ajouter un <a href=#predicats>prédicat</a> <code>loupParmiLesLoups</code> avec comme valeur 1 ou 2 selon le rang dans la voie. Une créature sera considérée comme humanoïde si elle a un <a href=#predicats>prédicat</a> <code>humanoide</code>, ou si sa race est reconnue comme humanoïde.</li>
                  <li><strong>Versatile</strong> : se reporter à la capacité choisie.</li>
                  <li><strong>Increvable</strong> : ajouter un <a href=#predicats>prédicat</a> <code>increvableHumain</code>.</li>
                </ol>
                <h4 class="text-secondary">Drakonide</h4>
                <ol>
                  <li><strong>Souffle</strong> : ajouter une attaque naturelle cochée, faisant des dégâts du type du drakonide, de portée 10 m, avec comme option <code>--cone 30 --psave DEX 12 --tempsRecharge rechargeSouffle [[1d4]]</code>.</li>
                  <li><strong>Intimidant</strong> : ajouter la compétence <code>intimidation</code> sur la fiche, avec un bonus de +5.</li>
                  <li><strong>Écailles robustes</strong> : ajouter le bonus sur la fiche.</li>
                  <li><strong>Fureur drakonide</strong> : ajouter un prédicat <code>fureurDrakonide</code>.</li>
                  <li><strong>Héritage draconique</strong> : ajuster les caractéristiques sur la fiche.</li>
                </ol>
                <h4 class="text-secondary">Lutin</h4>
                Voir les <a href="#fee_et_lutin">fées</a>.
                <h4 class="text-secondary">Minotaure</h4>
                <ul>
                  <li><a href="#Vision_dans_le_noir">Vision dans le noir</a>.</li>
                  <li><strong>Coup de corne :</strong> ajouter simplement l'attaque.</li>
                  <li><strong>Sens de l'orientation :</strong> utiliser une compétence/</li>
                  <li><strong>Grande taille</strong> : quand le minotaure rentre dans une construction de taille humaine, utiliser <code>!cof-effet constructionTailleHumaine true</code>. À la sortie du bâtiment, <code>!cof-effet constructionTailleHumaine false</code>. Pour les espaces exigus, de même avec l'effet <code>espaceExigu</code>. Si on veut un seul bouton, enlever simplement l'argument <code>true</code>.</li>
                </ul>
                <ol>
                  <li><strong>Charge :</strong> <code>#Attaque -1 --bonusAttaque 2 --plus 1d6</code>. Le déplacement n'est pas encore géré. Modifier les bonus si le minotaure possède la capacité Charge du barbare.</li>
                  <li><strong>Frénésie :</strong> On peut faire passer en frénésie avec la commande <code>!cof-effet-temp frenesieMinotaure [[1d6]]</code>. Quand j'aurai le temps, il devrait être possible de faire apparaître un bouton quand le minotaure est blessé.</li>
                  <li><strong>Orientation infaillible :</strong> pas de support particulier.</li>
                  <li><strong>Encorner :</strong> pas de support particulier.</li>
                  <li><strong>Colosse :</strong> reporter sur la fiche.</li>
                </ol>
                <h4 class="text-secondary">Nain</h4>
                <ul>
                  <li><a href="#Vision_dans_le_noir">Vision dans le noir</a>.</li>
                </ul>
                <ol>
                  <li><strong>Résistance</strong> : ajouter les bonus sur la fiche</li>
                  <li><strong>Solide comme un roc</strong> : ajouter le texte <code>2/1</code> dans la RD sur la fiche.</li>
                  <li><strong>Haches et marteaux</strong> : ajouter un <a href=#predicats>prédicat</a> <code>hachesEtMarteaux</code>. Ne pas oublier de mettre le modificateur <code>hache</code> ou <code>marteau</code> pour les attaques qui sont concernées.</li>
                </ol>
                <h4 class="text-secondary">Tieflin</h4>
                <ul>
                  <li><a href="#Vision_dans_le_noir">Vision dans le noir</a>.</li>
                  <li><strong>Résistance aux éléments</strong> : ajouter dans la RD sur la fiche <code>feu:5, electrique:5, froid:5</code></li>
                </ul>
                <ol>
                  <li><strong>Se faire discret</strong> : ajouter les jets sur la fiche, ou bien des attributs <code>mentir</code> et <code>deguisement</code> de valeur 5, à utiliser avec <code>!cof-jet</code>.</li>
                </ol>
              </div>
              <h3 class="text-info" id="Prestige">4.2 Voies de prestige et capacités épiques</h3>
              <div class="decalage">
                <h4 class="text-secondary">Voie d'Arwendée</h4>
                <ol>
                  <li><strong>Sens affutés</strong> : Créez un <a href=#predicats>prédicat</a> <code>sensAffutes</code>. Cela va ajuster l'initiative (ne se voit pas sur la fiche), ainsi que les dégâts des arcs. Ajoutez ensuite le bonus aux compétences <code>perception</code> et <code>vigilance</code> (ou créez-les).</li>
                  <li><strong>Arc de maître</strong> : Créez un <a href=#predicats>prédicat</a> <code>arcDeMaitre</code> pour automatiquement augmenter la portée des arcs de 20 m.</li>
                  <li><strong>Carquois magique</strong> : <code>!cof-effet-temp carquoisMagique [[5+@{selected|SAG}]] --valeur ?{Type de DM?|feu|froid|foudre} --mana 1</code>.</li>
                  <li><strong>Protection contre les projectiles</strong> : Créez un <a href=#predicats>prédicat</a> <code>protectionContreLesProjectiles</code>  de valeur 10. Puis, pour lancer le sort, utilisez <code>!cof-effet-temp protectionContreLesProjectiles [[6*(5+@{selected|SAG})]] --lanceur @{selected|token_id} --target @{target|token_id} --mana 2</code>.</li>
                </ol>
                <h4 class="text-secondary">Voie de l'archange</h4>
                <ol>
                  <li><strong>Forme d'ange</strong> : <code>!cof-effet-temp formeDAnge [[5+@{selected|SAG}]] --mana 0</code>. Le MJ devra gérer l'aspect en vol.</li>
                  <li><strong>Soins améliorés</strong> : utiliser un prédicat <code>voieDeLArchange</code> avec comme valeur le rang dans la voie.</li>
                  <li><strong>Épée céleste</strong> : rien à faire si le prédicat <code>voieDeLArchange</code> a la bonne valeur. Si le personnage n'a pas déjà la capacité Arme d'argent, ajouter une attaque pour cette arme, avec le modificateur <code>armeDArgent</code> et l'option <code>--si etat armeDArgent</code>.</li>
                </ol>
                <h4 class="text-secondary">Voie de l'expert</h4>
                Reporter les bonus sur la fiche et créer les compétences adéquates.
                <h4 class="text-secondary">Voie de l'expert du combat</h4>
                <ol>
                  <li><strong>Expertise du combat</strong> : créer un prédicat <code>expertDuCombat</code> avec comme valeur le rang dans la voie. La commande <code>!cof-statut</code> donne un état des lieux des dés dépensés pendant le combat/le tour. Les dés ne sont actifs qu'en combat et sont réinitialisés à l'utilisation de <code>!cof-fin-combat</code>. L'implémentation part du principe que l'augmentation de la DEF doit être décidée avant le jet de dommages, comme une esquive acrobatique par exemple.</li>
                  <li><strong>Bousculer</strong> : <code>!cof-expert-combat-bousculer @{selected|token_id} @{target|token_id}</code></li>
                  <li><strong>Expertise supérieure</strong> : il suffit de mettre à jour la valeur du prédicat <code>expertDuCombat</code> ; le script automatise la mise à jour des limites et la possibilité d'augmenter les DM.</li>
                  <li><strong>Déplacement tactique</strong> : pas de support spécifique pour le déplacement, mais on peut prévoir une action <code>!cof-expert-combat</code> pour le personnage, qui ne fera qu'une dépense simple de dé d'expertise.</li>
                  <li><strong>Expertise majeure</strong> : les limites de dés par tour sont automatiques avec la bonne valeur du prédicat <code>expertDuCombat</code>. Pour l'instant le cumul de dés sur le même jet n'est pas supporté.</li>
                </ol>
                <h4 class="text-secondary">Voie de l'homme du peuple</h4>
                Reporter les bonus sur la fiche et créer les compétences adéquates.
                <h4 class="text-secondary">Voie de Morn</h4>
                <ol>
                  <li><strong>Secrets de l'au-delà</strong> : <code>!cof-effet-temp secretsDeLAuDela 1 --mana 0</code></li>
                  <li><strong>Souffle de vie</strong> : <code>!cof-soin @{selected|token_id} @{target|token_id} souffleDeVie --portee 20 --mana 0</code></li>
                  <li><strong>Souffle de mort</strong> : faire une attaque magique, de portée 20 m (la portée par défaut pour les sorts, mais rien n'est spécifié dans le texte), de dégâts 2d8+INT. Ajoutez <code>auto</code> dans les modificateurs. Pour les options, <code>--disque 10 souffleDeMort --effet souffleDeMort 1 --save CON 10 --mana 1</code>.</li>
                </ol>
                <h4 class="text-secondary">Voie de Périndé</h4>
                <ol>
                  <li>Soutient</li>
                  <li>Présence réconfortante</li>
                  <li>Prendre sur soit</li>
                  <li>Défendre les siens</li>
                  <li><strong>Don de soi</strong> : <code>!cof-soin @{selected|token_id} ?{Nombre de dés?|1|2|3|4|5}d6 --allies 10 --sacrifierPV --mana 3</code></li>
                </ol>
                <h4 class="text-secondary">Voie des armes à deux mains</h4>
                <ol>
                  <li><strong>Allonge</strong> : reporter le bonus d'attaque sur la fiche. Par facilité, j'ai considéré que le bonus d'Init était permanent et nous l'avons reporté sur la fiche.</li>
                  <li><strong>Gros Monstre, grosse arme</strong> : ajouter un <a href=#predicats>prédicat</a> <code>grosMonstreGrosseArme</code>.</li>
                  <li><strong>Tenir à distance (L)</strong> : <code>!cof-effet-temp tenirADistance 1</code>.</li>
                  <li><strong>Attaque à outrance</strong> : <code>!cof-attaque-a-outrance ?{Attaque à outrance ?|Non,0|-2 DEF / +1D6 DM,2}</code>. Par facilité, cette "posture de combat" perdure jusqu'à la fin du combat ou jusqu'à ce que le guerrier en change. Au rang 5, on pourra utiliser <code>!cof-attaque-a-outrance ?{Attaque à outrance ?|Non,0|-2 DEF/+1D6 DM,2|-5 DEF/+2D6 DM,5}</code></li>
                  <li><strong>Critique destructeur</strong> : ajouter <code>--plusCrit 2d6</code> aux attaques d'armes à 2 mains</li>
                </ol>
                <h4 class="text-secondary">Voie des vermines</h4>
                <ol>
                  <li><strong>Nuée de criquets</strong> : ajouter une attaque magique, de portée 20 m, type Sortilege, modificateur <code>pasDeDmg</code> et options <code>--effet nueeDeCriquets [[5+@{selected|SAG}]]</code>. Pas de support particulier pour les DM de zone qui détruisent la nuée (enlever l'attribut <code>nueeDeCriquets</code> sur la cible dans ce cas).</li>
                </ol>
                <h4 class="text-secondary">Voie du chasseur de corruption</h4>
                <p>Pour savoir si une cible est corrompue, le script va utiliser un <a href=#predicats>prédicat</a> <code>corrompu</code> qu'il appartient au MJ d'ajouter pour les créatures selon ses critères.</p>
                <ol>
                  <li><strong>Sentir la corruption</strong> : <code>!cof-sentir-la-corruption @{selected|token_id} @{target|token_id}</code>.</li>
                  <li><strong>Combattre la corruption</strong> : ajouter un prédicat <code>combattreLaCorruption</code>. Y associer la valeur 2 au rang 4 dans la voie.</li>
                  <li><strong>Chasseur de sorcière</strong> : ajouter un prédicat <code>chasseurDeSorciere</code>. Pour reconnaître les nécromanciens et autres prêtres maléfiques, il faut aussi leur ajouter un prédicat <code>necromancien</code>.</li>
                  <li><strong>Frappe préventive</strong> : pas de support du script.</li>
                </ol>
                <h4 class="text-secondary">Voie du chevalier dragon</h4>
                <ol>
                  <li><strong>Ordre du chevalier dragon</strong> : créer les compétences Persuasion et Intimidation avec les bonus de base de +5. Ajouter un <a href=#predicats>prédicat</a> <code>ordreDuChevalierDragon</code>. Quand le personnage est monté, le script rajoutera automatiquement un bonus de +5 via <code>!cof-jet</code></li>
                  <li><strong>Épée de feu</strong> : <code>!cof-effet-temp armeEnflammee [[5+@{selected|CHA}]] --lanceur @{selected|token_id} --target @{selected|token_id}</code>. Ne se cumule pas avec l'Arme enflammée du Magicien.</li>
                  <li><strong>Résistance au feu</strong> : rajouter <code>feu:5</code> (ou 10 au rang 5) dans la partie RD de la fiche</li>
                  <li><strong>Monture puissante</strong> : modifier la fiche du Drake</li>
                  <li><strong>Souffle enflammé</strong> : ajouter une attaque au dragon, même jet pour touche, dm 2d6, portée 40, arme naturelle qui inflige des dégâts de feu, avec comme options <code>--disque 3 --dmSiRate 1d6 --dmCible 4d6</code></li>
                </ol>
                <h4 class="text-secondary">Voie du combat à deux armes</h4>
                <ol>
                  <li><strong>Combat à deux armes amélioré :</strong> mettre une des attaques de type arme gauche, et y ajouter le modificateur <code>avecd12crit</code>. Pas encore de support pour la capacité avancée : dans ce cas, ajoutez le +1 dans la barre 3 du token ou sur les attaques. </li>
                  <li><strong>Parade croisée :</strong> <code>!cof-effet-temp paradeCroisee 1 --valeur <i>rang</i> --montreActions</code> où <i>rang</i> est le rang dans la Voie. </li>
                </ol>
                <h4 class="text-secondary">Voie du danseur de guerre</h4>
                <ol>
                  <li><strong>Pirouettes</strong> : on peut rajouter les bonus sur la fiche, ou bien ajouter un <a href=#predicats>prédicat</a> <code>pirouettes</code>, de valeur le bonus en défense (qui ne s'applique que si le malus d'armure est inférieur à 4).</li>
                  <li><strong>Vent des lames</strong> : pas de support du script, simplement ajouter les attaques adaptées sur la fiche</li>
                  <li><strong>Attaque en mouvement</strong> : pas de support du script.</li>
                  <li><strong>Danse des lames</strong> : <code>!cof-effet-combat danseDesLames</code>. Pour l'attaque gratuite supplémentaire, on peut faire <code>#Attaque -1 --si etat danseDesLames --avecd12crit</code>.</li>
                </ol>
                <h4 class="text-secondary">Voie du familier fantastique</h4>
                <ol>
                  <li><strong>Familier fantastique</strong> : créer un personnage (de type PNJ) pour le familier, controlé par le joueur et avec un token lié ayant la capacité de voir. 
                    <ul>
                      <li>Pour le bonus en initiative, ajouter un attribut <code>familier</code> au personnage, avec comme valeur le nom du compagnon (doit être exactement le même que celui du token du compagnon). Cela automatise l'initiative quand le familier est présent.</li>
                      <li>Pour les points de vie partagés avec le familier, il faut mettre un attribut <code>PVPartagesAvec</code> de valeur le nom du familier (celui de la fiche, pas forcément le même que le token) pour le personnage, et un attribut similaire chez le familier, de valeur courante le nom du personnage. Le partage de PVs ne fonctionne pas avec des mooks, et il ne fait pas le partage de dégâts temporaires. En revanche, le script devrait gérer correctement les dégâts de zone.</li>
                      <li>Pour la défense du familier, ajouter lui un attribut <code>defDeriveeDe</code>, de valeur le nom du personnage (nom complet sur la fiche).</li>
                      <li>Pour l'initiative, ajoutez un attribut <code>initiativeDeriveeDe</code> de valeur le nom du personnage.</li>
                    </ul>
                  </li>
                  <li><strong>Pouvoir mineur</strong> : 
                    <ul>
                      <li><strong>Minimoi (Égocentrisme)</strong> : Téléportation, pas de support.</li>
                    </ul>
                  </li>
                  <li><strong>Canalisation</strong> : Lancer l'attaque avec l'option <code>--canaliseParFamilier</code>.</li>
                  <li><strong>Pouvoir supérieur</strong> :
                    <ul>
                      <li><strong>Minimoi (Clone)</strong> : à faire.</li>
                    </ul>
                  </li>
                </ol>
                <h4 class="text-secondary">Voie du gel</h4>
                <ol>
                  <li></li>
                  <li></li>
                  <li><strong>Cône de froid</strong> : faire une attaque portee 20m, dégâts 2d6+INT de froid, avec comme modificateur <code>auto</code> et comme options <code>--cone 30 --fx breath-frost --ifSaveFails CON 13 --effet ralenti 1 --else --diviseDmg 2 --endif</code>. Pour un objet de sort : <code>!cof-attack @{selected|token_id} @{target|token_id} Cône de froid --sortilege --auto --dm 2d6+[[@{selected|INT}]] --froid --portee 20 --cone 30 --fx breath-frost --ifSaveFails CON 13 --effet ralentiTemp 1 --else --diviseDmg 2 --endif</code></li>
                  <li><strong>Présence glaciale</strong> : <code>!cof-effet presenceGlaciale oui</code>. Utiliser <code>!cof-effet presenceGlaciale non</code> pour mettre fin à l'effet. On peut préciser un bonus de DEF et des dégâts différents avec l'option <code>--valeur</code>. Ainsi, la version grimoire sera <code>!cof-effet presenceGlaciale oui --valeur 3 1d4</code>.</li>
                </ol>
                <h4 class="text-secondary">Voie du guérisseur</h4>
                <ol>
                  <li><strong>Premiers soins</strong> : ajouter un <a href=#predicats>prédicat</a> <code>voieDuGuerisseur</code> de valeur le rang dans cette voie pour le bonus aux soins de la Voie des soins. Pas encore de support complet pour le sort, faire simplement <code>!cof-soin @{selected|token_id} @{target|token_id} 2d6+@{selected|SAG}</code>.</li>
                </ol>
                <h4 class="text-secondary">Voie du guerrier-mage</h4>
                <p>Penser à utiliser l'option <code>--magieEnArmure</code> pour le lancement des sorts affectés.</p>
                <ol>
                  <li><strong>Magie en armure</strong> : Ajouter un <a href=#predicats>prédicat</a> <code>magieEnArmure</code> de valeur la DEF totale à partir de laquelle le personnage peut lancer des sorts. Comme la fiche ne contient pas l'information de la DEF normale (sans magie) de l'armure portée, le script utilise la moyenne de la DEF et du malus d'armure. En ajoutant un prédicat <code>magieEnArmureFacilitee</code>, le script diminue aussi la difficulté des jets d'INT pour les armures avec une DEF trop grande de la valeur du prédicat de magie en armure.</li>
                  <li><strong>Rituel Assuré</strong> : <code>!cof-effet-temp rituelAssure 2</code>. Le script ne permet pas de préciser le sort, le premier qui sera lancé après le rituel assuré bénéficiera de l'effet.</li>
                  <li><strong>MagieDeCombat</strong> :  Ajouter un <a href=#predicats>prédicat</a> <code>magieDeCombat</code>.</li> 
                </ol>
                <h4 class="text-secondary">Voie du héro</h4>
                <ol>
                  <li><strong>Destin héroïque</strong> : ajouter le bonus au bonus de points de chances sur la fiche (utiliser la roue crantée à droite de la section CHANCE de la fiche).</li>
                  <li><strong>Ténacité</strong> : ajouter un <a href=#predicats>prédicat</a> <code>tenacite</code>.</li>
                  <li><strong>Homme de la situation</strong> : pas de support.</li>
                  <li><strong>Meneur d'hommes</strong> : Ajouter une action : <code>!cof-set-attribute meneurDHommesCible @{selected|token_id} --target @{target|token_id}</code>. Le personnage peut utiliser cette action pour désigner sa cible. Tous les alliés du personnage recevront automatiquement les bonus sur le reste du combat.</li>
                </ol>
                <h4 class="text-secondary">Voie du maître des poisons</h4>
                Rappel : pour appliquer un poison, utiliser <code>!cof-enduire-poison -1 type force save</code>.
                <ol>
                  <li><strong>Connaissance du poison</strong> : ajouter un <a href=#predicats>prédicat</a> <code>connaissanceDuPoison</code> pour éviter le test d'INT quand le voleur applique du poison.</li>
                  <li><strong>Poison rapide</strong> : faire les applications à la main (<code>!cof-enduire-poison <i>L</i> rapide 2d6 12</code>).</li>
                  <li><strong>Poison affaiblissant</strong> : faire les applications à la main (<code>!cof-enduire-poison <i>L</i> affaiblissant 0 15</code>).</li>
                </ol>
                <h4 class="text-secondary">Voie du porteur de bouclier</h4>
                <ol>
                  <li><strong>Expertise du bouclier</strong> : reporter le bonus sur la fiche dans le bonus de DEF conféré par le bouclier.</li>
                  <li><strong>Progresser à couvert</strong> : <code>!cof-effet-temp progresserACouvert 1 --lanceur @{selected|token_id} --target @{target|token_id} --self --portee 1</code>. A utiliser pour cibler un allié à portée si nécessaire. Au MJ de vérifier qu'elle reste bien près du chevalier pour profiter du bonus.</li>
                  <li><strong>Attaque au bouclier</strong> : Ajouter une arme avec son Bouclier en "Arme gauche" sur la fiche du personnage. Dans les modificateurs de l'arme, ajoutez <code>avecd12crit</code>. Pour que cette attaque soit proposée dans les listes d'action seulement quand le personnage porte son bouclier, ajouter un prédicat <code>attaqueAuBouclier</code> de valeur le label de l'attaque.</li>
                  <li><strong>Dévier les coups</strong> : Ajouter un prédicat <code>devierLesCoups</code> (on peut y associer un nombre, si on souhaite plus d'une utlisation par tour). Le script ajoute automatiquement un bouton sur les attaques sur lesquelles cette capacité peut-être utilisée.</li>
                  <li><strong>Parade au bouclier</strong> : Ajouter un <a href=#predicats>prédicat</a> <code>paradeAuBouclier</code>. Sur l'ability Coup de bouclier créé pour le rang 3, ajouter <code>--attaqueBouclierRenverse --decrLimitePredicatParTour paradeAuBouclier</code>. Le script ajoute automatiquement un bouton sur les attaques sur lesquelles cette capacité peut-être utilisée. Si le personnage possède un bouclier en arme gauche, le script utilisera le bonus éventuel de l'arme en question sur le jet opposé.</li>
                </ol>
                <h4 class="text-secondary">Voie du tueur de géant</h4>
                <ol>
                  <li><strong>Réduire la distance</strong> : ajouter un <a href=#predicats>prédicat</a> <code>reduireLaDistance</code>.</li>
                  <li><strong>Ventre mou</strong> : ajouter un <a href=#predicats>prédicat</a> <code>ventreMou</code>. Cela va diminuer la RD fixe de 3 maximum pour une créature grande, 6 maximum pour une créature énorme et 10 maximum pour une créature colossale.</li>
                  <li><strong>Bûcheron</strong> : ajouter un <a href=#predicats>prédicat</a> <code>bucheron</code>.</li>
                </ol>
                <h4 class="text-secondary">Capacités épiques</h4>
                <ul>
                  <li><strong>Libérateur de Dorn</strong> : ajouter un prédicat <code>liberateurDeDorn</code>.</li>
                  <li><strong>Libérateur de Kerserac</strong> : ajouter un prédicat <code>liberateurDeKerserac</code>.</li>
                  <li><strong>Libérateur d'Anathazerïn</strong> : ajouter un prédicat <code>liberateurDAnathazerin</code>. La capacité donne le bonus de +2 quel que soit le poison.</li>
                  <li><strong>Lien épique</strong>: ajouter pour chaque personnage un attribut <code>lienEpique</code>, qui contiennent la même chose dans le champ courant (pensez à un nom d'équipe, par exemple).</li>
                </ul>
              </div>
              <h3 class="text-info" id="Créatures">4.3 Voies de créatures</h3>
              <div class="decalage">
                <h4 class="text-secondary">Voie du champion</h4>
                <ol>
                  <li>
                    <strong>Imparable</strong>:
                    <ul>
                      <li>Utiliser l'option <code>--m2d20</code> pour l'action limitée.</li>
                      <li>Pour l'effet permanent, utiliser un <a href=#predicats>prédicat</a> <code>champion</code></li>
                    </ul>
                  </li>
                  <li><strong>Riposte</strong> : Ajouter un <a href=#predicats>prédicat</a> <code>riposte</code>. Les actions affichées en cas de riposte seront normalement une attaque avec l'arme en main si il y en a, plus les attaques naturelles cochées sur la liste d'attaque. Si ça ne convient pas, vous pouvez écrire une liste d'actions nommée<code>Ripostes</code> (voir les <a href="#actions_du_tour">actions du tour</a>).</li>
                  <li><strong>Hausser le ton</strong> : ajouter un <a href=#predicats>prédicat</a> <code>hausserLeTon</code>.</li>
                </ol>
                <h4 class="text-secondary">Voie du chef d'armée</h4>
                <ol>
                  <li><strong>Sergent</strong> : ne pas oublier l'action de plus donnée à un allié par tour. Utiliser un <a href=#predicats>prédicat</a> <code>sergent</code> (pour l'attaque ignorée par combat)</li>
                  <li><strong>Capitaine</strong> : pour désigner le capitaine d'un ensemble de tokens sélectionné (quelle que soit <a href="#methode_selection_groupes">la méthode</a>), on peut utiliser <code>!cof-capitaine @{selected|token_id} 2</code>, en ajoutant les options de sélection (comme <code>--target @{target|token_id}</code>). Au lieu de sélectionner une cible, on peut utiliser le nom d'un token. Si le capitaine fait parti de la sélection, il sera automatiquement exclu (on ne peut être son propre capitaine). Si à la place de <code>2</code>, le deuxième argument est <code>0</code>, cela enlève le capitaine. L'attribut généré est lié à un personnage, pas un token spécifique, il suffit donc de cibler un token représentant un personnage pour affecter tous les tokens qui représentent ce personnage. Pas de support particulier pour l'attaque supplémentaire en cas d'action limitée.</li>
                  <li><strong>Commandant</strong> : il faut ajouter un <a href=#predicats>prédicat</a> <code>commandant</code>. La méthode pour désigner les personnages sous les ordres du commandant est la même que pour le capitaine : <code>!cof-capitaine @{selected|token_id} 3</code> (notez que la valeur est <code>3</code> pour le commandant, et <code>2</code> pour le capitaine).</li>
                </ol>
                <h4 class="text-secondary">Voie du cogneur</h4>
                <ol>
                  <li><strong>Charge</strong> : Faire l'attaque avec les arguments <code>--m2d20 --pietine</code>.</li>
                  <li><strong>Enrager</strong> : ajouter un <a href=#predicats>prédicat</a> <code>peutEnrager</code>.</li>
                  <li><strong>Percuter</strong> : Remplacer <code>--pietine</code> par <code>--percute</code> dans l'attaque de Charge.</li>
                </ol>
                <h4 class="text-secondary">Voie du colosse</h4>
                <ol>
                  <li><strong>Fauchage</strong> : ajouter la RD, et ajouter un <a href=#predicats>prédicat</a> <code>fauchage</code>, qui va faire automatiquement le renversement si le dé d'attaque est entre 15 et 20. Il est possible de changer ce seuil associant au prédicat la valeur à laquelle le dé d'attaque provoque le renversement (15 par défaut). Par défaut, le fauchage est impossible si la taille du défenseur est supérieure ou égale à celle de l'attaquant. Vous pouvez spécifier un seuil de taille maximale dans un prédicat <code>tailleFauchage</code> (5 = grand, 6 énorme et 7 colossal).</li>
                  <li><strong>Balayage</strong> : faire une version de l'attaque avec <code>--target @{target|Cible 2|token_id}</code></li>
                  <li><strong>Projection</strong> : ajouter un <a href=#predicats>prédicat</a> <code>projection</code>.</li>
                </ol>
                <h4 class="text-secondary">Voie des créatures élémentaires</h4>
                <p style="margin-top:0px; margin-bottom:0px">Ajouter un <a href=#predicats>prédicat</a> <code>immunite_<i>type</i></code>, où <i>type</i> est le type de la créature élémentaire (feu, acide, froid, ...)</p>
                <ol>
                  <li><strong>Souffle</strong> : faire une attaque avec le bon nombre de d6 en DM, du type voulu, de portée la portée du souffle, à utiliser avec les modificateurs <code>auto cone</code> et les options  <code>--tempsRecharge rechargeSouffle [[1d4]] --psave DEX 13</code>. Ne pas oublier la possibilité d'utiliser un token cible temporaire pour le cone.</li>
                  <li><strong>Corps élémentaire</strong> : ajouter un <a href=#predicats>prédicat</a> <code>corpsElementaire</code>, de valeur l'élément (<code>feu</code>, <code>froid</code>,...). Cela va automatiquement ajouter les dégâts aux attaques de contact, et faire des dégâts à ceux qui l'attaquent au contact. Cela va aussi faire apparaître dans les actions du tour une action de régéneration, que le MJ peut utiliser chaque tour, à lui de voir si les conditions s'y prêtent (source élémentaire proche). Pas de support générique pour les victimes saisies ou agripper, à gérer au cas par cas.</li>
                  <li><strong>Explosion finale</strong> : ajouter un <a href=#predicats>prédicat</a> <code>explosionFinale</code> de valeur le label de l'attaque d'explosion. Cette attaque ne doit contenir aucune demande de valeur (de type <code>?{Munitions}</code>). Par exemple, pour une explosion finale qui fait 3d6 DM à tout le monde dans les 10 m et qui permettrait de diviser les dégâts par 2 par un test de DEX difficulte 13 (18 si au contact)&nbsp;: on crée une attaque Explosion, de dégâts 3d6 du type voulu, de portée 10, de modificateur <code>auto</code> et avec l'option <code>--psave DEX 13 contact 18</code>. Pour changer les dégâts du corps élémentaire, on peut utiliser un prédicat <code>nbCorpsElementaire</code> de valeur le nombre de d6 à utiliser (2 normalement pour cette capacité).</li> 
                </ol>
                <h4 class="text-secondary">Voie des créatures magique</h4>
                <ol>
                  <li><strong>Réduction des DM</strong> : Ajouter la RD sur la fiche <code>5/<i>genre</i></code>, où <i>genre</i> peut être <code>magique</code> ou un des types d'attaque (feu, acide, poison, etc...).</li>
                  <li><strong>Vitalité surnaturelle</strong> : ajouter un attribut <code>vitaliteSurnaturelle</code>, de valeur courante le nombre de PV régénéré par tour. Si la régénération doit continuer même à la mort du personnage, ajoutez un <code>+</code> à la fin de la valeur courante. Si un type de dégât empêche la régénération, inscrire ce type en valeur maximal de l'attribut (attention, ça ne peut pas être le type drain). Si plusieurs types de dégâts, les séparer par une virgule. Par exemple, un troll aura un attribut <code>vitaliteSurnaturelle</code>, de valeur courante <code>5+</code>, et de valeur maximale <code>feu,acide</code>. Si vous voulez réinitialiser les dégâts qui ne peuvent pas se régénérer sur un personnage, vous pouvez utiliser des soins normaux (<code>!cof-soin</code>), et si vous avez augmenté à la main les PVs, vous pouvez effacer les attributs <code>DMSuivis<em>type</em></code> qui ont été créés par le script.</li>
                </ol>
                <h4 class="text-secondary">Voie des créatures volantes</h4>
                <ol>
                  <li><strong>Vol rapide</strong> : simplement faire une variante de l'attaque avec les options <code>--bonusAttaque 5 --plus 1d6</code> à utiliser le premier tour de combat si a créature est en vol et attaque une créature au sol. Ne pas oublier l'action de mouvement supplémentaire en vol.</li>
                  <li><strong>Agripper</strong> : ajouter un <a href=#predicats>prédicat</a> <code>agripper</code> (ne fera agripper que sur les attaques de contact).</li>
                </ol>
                <h4 class="text-secondary">Voie de la magie de combat</h4>
                <ol>
                  <li><strong>Attaque magique</strong> : simplement une attaque, avec les options <code>--sortilege --magique --fx beam-magic</code>. Pour la version de zone, utiliser les options <code>--disque 5 --auto --psave DEX 10</code>.</li>
                  <li><strong>Armure magique</strong> : utiliser <code>!cof-effet-combat armureMagique</code></li>
                </ol>
                <h4 class="text-secondary">Voie de la magie de guérison</h4>
                <ol>
                  <li><strong>Soigner</strong> : <code>!cof-soin @{selected|token_id} @{target|target1|token_id} [[ceil(@{target|target1|PV|max}/2)]] --limiteCibleParJour 1</code></li>
                  <li><strong>Guérir</strong> : <code>!cof-guerir @{selected|token_id} @{target|token_id} --portee 0</code></li>
                </ol>
                <h4 class="text-secondary">Voie de la magie maléfique</h4>
                <ol>
                  <li><strong>Vampirisation</strong> :
                    <ul>
                      <li> Ajouter une attaque magique avec les DMs de vampirisation, faisant des dégâts de type drain. (En objet, on utilisera les options <code>--sortilege</code> et <code>--drain</code>).</li>
                      <li> Ajouter un prédicat <code>siphonDesAmes</code>, de valeur de NC de la créature (ou sans valeur, si le NC est 0). Si vous voulez que ce siphon empêche un autre siphon des âmes, rajoutez un prédicat <code>siphonDesAmesPrioritaire</code> de valeur un nombre positif et supérieur à ceux sur lequel il est prioritaire.</li>
                    </ul>
                  </li>
                  <li><strong>Animer un cadavre</strong> : <code>!cof-animer-cadavre @{selected|token_id} @{target|token_id}</code>. Au cas où vous auriez besoin d'enlever l'état de cadavre, il suffit d'enlever l'attribut nommé <code>cadavreAnime</code>.</li>
                  <li><strong>Injonction Mortelle</strong> : <code>!cof-injonction-mortelle @{selected|token_id} @{target|token_id}</code></li>
                </ol>
                <h4 class="text-secondary">Voie de la meute</h4>
                <ol>
                  <li><strong>Intergeanchables</strong> : Utiliser un <a href=#predicats>prédicat</a> <code>interchangeable</code>, avec comme valeur le nombre d'opposants à partir duquel les cibles peuvent être interverties. Par défaut, cela va donner un bonus de +2 en DEF et +3 an attaque. Pour retrouver la valeur normale de +5 en DEF, utilisez <code>!cof-options</code>.</li>
                  <li><strong>Attaque en traître</strong> : Au MJ de décider si une attaque est en traître ou pas. Pour une attaque en traître, rajouter les arguments <code>--sournoise 2 --bonusAttaque 5</code>.</li>
                </ol>
                <h4 class="text-secondary">Voie du PNJ récurrent</h4>
                <ol>
                  <li><strong>Instinct de survie</strong> : ajouter un <a href=#predicats>prédicat</a> <code>instinctDeSurvie</code> avec comme valeur le nombre de PV en-dessous duquel le PNJ gagne un bonus de DEF. les autres effets sont à faire par le MJ.</li>
                  <li><strong>Chair à canon</strong> : ajouter un <a href=#predicats>prédicat</a> <code>chairACanon</code>. Ajouter ensuite à tous ses sous-fifres un attribut <code>chairACanonDe</code> de valeur le nom exact du token du PNJ. On peut y mettre plusieurs noms séparés par des virgules.</li>
                </ol>
                <h4 class="text-secondary">Voie du prédateur</h4>
                <ol>
                  <li><strong>Embuscade</strong> : Sélectionner les ennemis du prédateurs, et utiliser <code>!cof-surprise</code>. Par exemple, contre une équipe de joueurs dans le <i>handout</i> <code>Equipe joueurs</code> (cf la <a href="#methode_selection_groupes">méthode de sélection de groupes</a>), on pourra utiliser l'ability <code>!cof-surprise [[15 + @{selected|DEX}]] --equipe joueurs</code>. Pour les bonus en discrétion et init, reporter sur la fiche (et à un prédicat <code>discrétion</code>), pour l'attaque en embuscade sur une cible surprise, rajouter à une attaque les options <code>--sournoise 1 --if moins FOR --etat renverse --endif</code>.</li>
                  <li><strong>Dévorer</strong> : ajouter un <a href=#predicats>prédicat</a> <code>devorer</code>.</li>
                  <li><strong>Gober</strong> : ajouter un <a href=#predicats>prédicat</a> <code>gober</code>. Le script ne vérifie pas que le personnage fait son jet de force avant d'attaquer (mais il propose un bouton pour le faire), ni que l'arme utilisée n'est pas plus grande qu'une dague.</li>
                </ol>
                <h4 class="text-secondary">Voie du tueur</h4>
                <ol>
                  <li><strong>Attaque mortelle</strong> : donner la possibilité de faire une attaque avec les options <code>--bonusAttaque 5 --sournoise <i>rang*2</i></code>. Rajouter un prédicat <code>discrétion</code> avec comme valeur 5.</li>
                  <li><strong>Disparition</strong> : donner la possibilité de faire une attaque avec les options <code>--disparition <i>rang*2</i></code>.</li>
                  <li><strong>Assassinat</strong> : rajouter <code>--if etatCible surpris --etat mort --save CON 15 --endif</code> à l'Attaque mortelle.</li>
                </ol>
              </div>
              <h3 class="text-info" id="Sorts">4.4 Autres sorts</h3>
              <div class="decalage">
                Sorts qui ne sont pas dans des voies, mais peuvent venir du grimoire (dans le compagnon) ou d'effets de parchemins.
                <ul>
                  <li><strong>Animation des objets</strong> : <code>!cof-animation-des-objets @{selected|token_id} ?{Taille d'objet|tabouret ou coffret,1|chaise ou coffre,2|meuble bas ou table,4|grande table,7|grosse armoire,10}</code> On peut ajouter un troisième argument, <code>@{target|token_id}</code> pour animer un token d'objet sur la carte.</li>
                  <li><strong>Armure d'eau</strong> : <code>!cof-effet-combat armureDEau</code>. Le script automatise l'immunité aux étreintes (pas aux enveloppements) et à la capacité Agripper des créatures volantes.</li>
                  <li><strong>Choc</strong> : Faire une attaque de portée 20 m, de type Sortilège, DM contondants, portée 20 m, et avec les options <code>--etat renverse --save FOR 10</code>.</li>
                  <li><strong>Coup au but</strong> : <code>!cof-effet-temp bonusAttaqueTemp 1 --valeur 10 --lanceur @{selected|token_id} --portee 10 --mana 0 --target @{target|token_id}</code>.</li>
                  <li><strong>Force de géant</strong> : <code>!cof-effet-temp forceDeGeant 10</code>. Le bonus est de 2 par défaut, mais peut être modifié en utilisant l'option <code>--valeur</code>.</li>
                  <li><strong>Mur de vent</strong> : <code>!cof-mur-de-force vent</code>. Par défaut, la durée sera de 5+mod. d'INT, mais on peut donner une autre valeur en argument, après <code>vent</code>. On peut aussi changer le rayon du mur en utilisant <code>--portee</code>. Cela ne gère ni les immunités, ni le jet de force pour passer le mur.</li>
                  <li><strong>Nuée de scorpions</strong> : ajouter une attaque magique, de portée 20 m, type Sortilège, modificateur <code>--pasDeDmg</code> et option  <code>--effet nueeDeScorpions 10</code>. Pas de support particulier pour les DM de zone qui détruisent la nuée (enlever l'attribut <code>nueeDeScorpions</code> sur la cible dans ce cas).</li>
                  <li><strong>Résistance à la magie</strong> : pour l'augmentation de la DEF contre la magie, utiliser un <a href=#predicats>prédicat</a> <code>DEF_magie</code> et pour le bonus aux tests, <code>resistanceALaMagie</code></li>
                  <li><strong>Simulacre de vie</strong> : <code>!cof-set-attribute PVTemporaires [[1d10 + @{selected|niveau}]] --message simulacre de vie</code></li>
                  <li><strong>Sixième sens</strong> : <code>!cof-effet sixiemeSens true</code>. Pour mettre fin à l'effet du sort (qui a une durée en heures), on peut effacer l'attribut <code>sixiemeSens</code>, ou mieux encore, sélectionner le token et faire <code>!cof-effet sixiemeSens false</code>.</li>
                  <li><strong>Toiles</strong> : <code>!cof-effet-temp toiles [[5+@{selected|SAG}]] --saveActifParTour FOR [[10+@{selected|SAG}]] --lanceur @{selected|token_id} --disque @{target|token_id} 5 20 --saufAllies --mana 0</code>.</li>
                </ul>
              </div>
              <h3 class="text-info" id="Capacites_diverses">4.5 Capacités diverses</h3>
              <div class="decalage">
                <ul>
                  <li><strong>Absorption d'énergie</strong> : ajouter un <a href=#predicats>prédicat</a> <code>absorptionEnergie</code> de valeur la valeur du soin accordé à l'attaquant à chaque fois qu'il endommage une cible.</li>
                  <li><strong>Action libre</strong> : ajouter un <a href=#predicats>prédicat</a> <code>actionLibre</code>.</li>
                  <li><strong>Agripper</strong> (démon dans Noirbois) : <code>!cof-agripper-de-demon @{selected|token_id} @{target|token_id}</code></li>
                  <li><strong>Apparition</strong> : un prédicat <code>apparition</code> immunise à tous les DMs, sauf ceux de canalisation (voir plus bas), ou les attaques avec l'option <code>energiePositive</code>.</li>
                  <li><strong>Attaque en meute</strong> : ajouter un <a href=#predicats>prédicat</a> <code>attaqueEnMeute</code> de valeur le bonus d'attaque (2 pour un gobelin). Cela confère le bonus pour toutes les attaques de personnages avec ce prédicat suivant une effectuée par un autre personnage avec ce prédicat, jusqu'au prochain tour de ce personnage. Ainsi, si 2 créatures continuent d'attaquer la même cible, elles bénéficieront du bonus tout le temps, sauf la toute première attaque.</li>
                  <li><strong>Auras</strong> : pour les capacités qui font un effet permanent à une certaine portée, comme l'aura glaciale des spectres, utiliser un attribut nommé <code>aura</code>, de valeur courante la portée en mètres de l'aura, et de valeur maximale l'effet à appliquer. Si cet effet contient la chaîne de caractère <code>$TOKEN</code>, cette chaîne sera remplacée par le nom du token à l'origine de l'aura. Pour un exemple d'utilisation, voyez la ligne <code>Aura glaciale</code> en dessous.</li>
                  <li><strong>Aura glaciale</strong> : ajouter un attribut <code>aura</code>, de valeur courante <code>5</code>, et de valeur maximale <code>!cof-effet-temp ralenti [[1d6]] --save CON 12 --magique --seulementVivant --message une aura de froid intense émane de $TOKEN</code>.</li>
                  <li><strong>Baroud d'honneur</strong> : ajouter un <a href=#predicats>prédicat</a> <code>baroudHonneur</code> (Quand le personnage arrive à 0 PV, il ne meurt pas jusqu'à sa prochaine attaque, qui se fait avec un bonus de +5)</li>
                  <li><strong>Canalisation</strong> : <code>!cof-canaliser <i>type</i></code> où <i>type</i> peut être <code>positif</code> ou <code>négatif</code>, selon le type d'énergie canalisée. Il faut au moins soit une option <code>--soin <i>expr</i></code> ou  <code>--dm <i>expr</i></code> (il est possible d'avoir les deux), pour exprimer le montant des soins ou des dégâts.</li>
                  <li><strong>Châtiment du mâle</strong> : utiliser un <a href=#predicats>prédicat</a> <code>chatimentDuMale</code>.</li>
                  <li><strong>Cibles multiples</strong> (nuées) : ajouter un <a href=#predicats>prédicat</a> <code>ciblesMultiples</code>.</li>
                  <li><strong>Clignotement</strong> : <code>!cof-effet-temp clignotement [[1d6+2]]</code>.</li>
                  <li><strong>Créature non-vivante</strong> : ajouter un <a href=#predicats>prédicat</a> <code>nonVivant</code>.</li>
                  <li><strong>Créature végétative</strong> : ajouter un <a href=#predicats>prédicat</a> <code>vegetatif</code>.</li>
                  <li><strong>Cyclone</strong> (pour les élementaires) : <code>!cof-effet-temp cyclone [[1d4+1]] --limiteParCombat 1</code>. Cela va proposer une attaque <code>Traverser</code> dans les actions de l'élémentaire, qui ne peut fonctionner que si le personnage a au moins une attaque sur sa fiche. Par défaut, l'attaque utilisée en traversant est l'attaque de label <code>1</code>, mais on peut préciser un autre label en utilisant l'option <code>--valeur</code>.</li>
                  <li><strong>Dégâts si touché au contact</strong> (élémentaire de feu,...) : ajouter un attribut nommé <code>dmSiToucheContact</code>, de valeur courante les dégâts, et de valeur maximale leur type. Par exemple, pour un élémentaire de feu, la valeur courant sera <code>1d6</code>, et la valeur maximale sera <code>feu</code>.</li>
                  <li><strong>Drain de force</strong> (pour la campagne Invincible) : ajouter un <a href=#predicats>prédicat</a> <code>auraDrainDeForce</code></li>
                  <li><strong>Écraser</strong> (pour la campagne Invincible) : ajouter un <a href=#predicats>prédicat</a> <code>ecraser</code> de valeur le label de l'attaque utilisée pour écraser.</li>
                  <li><strong>Énergie de la mort</strong> (pour la campagne Vengeance) : ajouter un <a href=#predicats>prédicat</a> <code>energieDeLaMort</code>. Le MJ devra être attentif au message indiquant le retour à la vie, car c'est lui qui devra enlever l'état mort et ajuster les PVs.</li>
                  <li><strong>Enveloppement</strong> (cube gélatineux) : ajouter l'option <code>--enveloppe</code>, puis quand le bouton apparaît si l'attaque réussit, cliquer dessus. En cas d'enveloppement, la cible ne peut plus bouger et se déplace avec le cube (déplacer le cube met la cible dans le cube), et au tour du cube, il faut presser les boutons de dégâts pour les infliger aux cibles enveloppées.</li>
                  <li><strong>Étreinte</strong> (serpents) : ajouter l'option <code>--etreinte <i>difficulte</i></code>, puis quand le bouton apparaît si l'attaque réussit, cliquer dessus. En cas d'étreinte réussie, la cible ne peut plus bouger et se déplace avec le serpent, et au tour du serpent, il faut presser les boutons de dégâts pour les infliger aux cibles étreintes.</li>
                  <li><strong>Étreinte</strong> (scorpions) : ajouter l'option <code>--etreinteScorpion</i></code>. Le script prend le parti de ne pas étourdir la cible, mais le -5 en DEF, le jet de FOR et les dégâts sont automatisés. La cible est libérée automatiquement à la mort du scorpion.</li>
                  <li><strong>Étreinte avec immolation</strong> (démon gardien) : pour l'attaque limitée qui immole, ajouter l'option <code>--etreinteImmole</code>. Cette attaque réussira automatiquement contre une cible qui est déjà étreinte.</li>
                  <li><strong>Faucheuse de géants</strong>: ajouter le modifcateur <code>tueurDeGrands</code> aux attaques.</li>
                  <li><strong>Fièvre du chêne</strong> : pour ajouter encore une RD de 5 contre le feu, ajouter un <a href=#predicats>prédicat</a> <code>fievreChene</code>.</li>
                  <li><strong>Fiévreux</strong> : <code>!cof-effet fievreux</code> donne -2 en attaque, au dégâts et aux tests.</li>
                  <li><strong>Foudres du temps</strong> : <code>!cof-foudre-du-temps</code> permet d'activer les foudres du temps. On peut donner un argument pour remplacer la valeur par défaut (13) par un autre jet de dés. Un deuxième argument permet de faire sortir la foudre pour tout jet entre les deux valeurs. Par exemple <code>!cof-foudre-du-temps 13 14</code> fait venir la foudre pour tout jet de 13 ou 14. Si votre jeu contient un son (ou playlist) nommé <code>Foudre</code> (avec la majuscule), le son sera joué à chaque fois que la foudre frappera. Finalement, <code>!cof-foudre-du-temps fin</code> met fin aux foudres du temps.</li>
                  <li><strong>Frénésie</strong> : Ajouter un <a href=#predicats>prédicat</a> <code>frenesie</code> avec comme valeur le nombre de PV en-dessous duquel la créature devient frénétique (+2 aus jets d'attaque).</li>
                  <li><strong>Hors de portée</strong> : ajouter un <a href=#predicats>prédicat</a> <code>horsDePortee</code></li>
                  <li><strong>Huile de fort assaut</strong> : <code>!cof-effet-temp dmgArme(<i>L</i>) 10 --valeur 1d6</code> où <i>L</i> est le label de l'arme qu'on veut enduire d'huile de fort assaut.</li>
                  <li><strong>Hurlement</strong> : Pour les chiens infernaux, <code>!cof-peur [[10+?{Nombre de chiens?}]] 2d4 --titre Hurlement --immuniseSiResiste hurlement --disque 50 --saufAllies</code>, et pour les fantômes, <code>!cof-peur 12 1d6 --titre Hurlement terrible --immuniseSiResiste hurlement --disque 10 --saufAllies</code>.</li>
                  <li><strong>Illusion</strong> : Pour les illusions qui disparaissent et réapparaissent un peu plus loin quand on essaie de les toucher, ajouter un <a href=#predicats>prédicat</a> <code>estUneIllusion</code>.</li>
                  <li><strong>Immunité aux armes</strong> : ajouter un <a href=#predicats>prédicat</a> <code>immuniteAuxArmes</code>. À noter qu'il est possible de spécifier le niveau de magie d'une attaque en donnant un argument à l'option <code>--magique</code>. Ainsi une arme de niveau magique 3 aura en argument <code>--magique 3</code>.</li>
                  <li><strong>Immunité aux attaques non magiques</strong> : ajouter un <a href=#predicats>prédicat</a> <code>immunite_nonMagique</code></li>
                  <li><strong>Immunité aux critiques</strong> : ajouter un <a href=#predicats>prédicat</a> <code>immuniteAuxCritiques</code>.</li>
                  <li><strong>Indéracinable</strong> : ajouter un <a href=#predicats>prédicat</a> <code>inderacinable</code>.</li>
                  <li><strong>Insensible</strong> : ajouter un <a href=#predicats>prédicat</a> <code>insensibleAffaibli</code>.</li>
                  <li><strong>Invisible</strong> : passer le personnage invisible (<code>!cof-set-state invisible true</code>, ou mettre directment le statut sur le token). Si il peut rester invisible en combat, lui ajouter un <a href=#predicats>prédicat</a> <code>invisibleEnCombat</code>. Si il est attaqué autrement qu'avec tir en aveugle par quelqu'un qui ne voit pas l'invisble (à vous de montrer au moins temporairement le token), un malus de +5 en DEF au contact et +10 à distance sera appliqué, de même que le bonus de +5 en attaque contre ceux qui ne voient pas l'invisible. Le script suppose toujours qu'un personnage qui dispose de tir aveugle utilise sa capacité contre les cibles invisibles: à vous de vérifier qu'il ne cumule pas ça avec une capacité limitée.</li>
                  <li><strong>Langage sombre</strong> : en plus de comprendre les elfes noirs, j'ai décidé d'octroyer un bonus de +1 en DEF et +1 aux DM contre les elfes noirs, bonus justifié par la meilleure compréhension de leur culture et de leurs tactiques. Pour cela, j'utiliser un <a href=#predicats>prédicat</a> <code>langageSombreHetre</code>.</li>
                  <li><strong>Message en cas de coup critique reçu</strong> : on peut utiliser un attribut <code>messageSiCritique</code> avec en valeur courante un message à afficher en cas d'echec critique subit.</li>
                  <li><strong>Mot de pouvoir</strong> qui immobilise : <code>!cof-mot-de-pouvoir-immobilise --lanceur @{selected|token_id} --enVue --saufAllies</code> </li>
                  <li><strong>N'abandonne jamais</strong> : ajouter un <a href=#predicats>prédicat</a> <code>nAbandonnejamais</code>.</li>
                  <li><strong>Noirbois</strong> : À l'entrée dans des ténèbres magiques, utiliser la commande <code>!cof-tenebres-magiques</code>. À la sortie ou la fin de ces ténèbres, faire <code>!cof-tenebres-magiques fin</code>. Pour allumer la fiole de lumière, sélectionner un token est faire <code>!cof-fiole-de-lumiere <i>d</i></code> où <i>d</i> est la distance à laquelle la fiole éclaire. On peut ajouter un troisième argument, qui est la distance à laquelle la lumière devient moins brillante (pas d'effet sur la mécanique de jeu). Pour éteindre la lumière, il faut mettre utiliser <code>!cof-fiole-de-lumiere fin</code>.</li>
                  <li><strong>Noyade (plante carnivore)</strong> : il existe un effet de combat nommé <code>noyade</code> (pas de durée, il dure par défaut tout le combat) qui fait perdre 1d6 PV par tour, sauf à réussir un test de CON difficulté 15, et qui impose un malus de -3 aux attaques et aux DMs.</li>
                  <li><strong>Ondes corruptrices</strong> : Pour simplement le premier effet, faire <code>!cof-effet ondesCorruptrices 2</code>, puis pour augmeter l'effet <code>!cof-effet ondesCorruptrices +2</code>. L'effet peut être annulé avec <code>!cof-effet ondesCorruptrices 0</code>. Pour le porteur du bouclier de Grabuge, on peut mettre un <a href=#predicats>prédicat</a> <code>porteurDuBouclierDeGrabuge</code>.</li>
                  <li><strong>Paralysie des goules</strong> : ajouter à l'attaque de morsure <code>--effet paralyseGoule [[1d6]] --save CON 10</code>.</li>
                  <li><strong>Perte de substance</strong> : Ajouter pour tous les personnages concernés un <a href=#predicats>prédicat</a> <code>perteDeSubstance</code> de valeur le nombre de jours. Le changement de jour n'est pas automatisé, il faudra faire faire le test de CHA et mettre le prédicat à jour à la main à chaque nouveau jour. Si le personnage porte une ancre, ajouter un prédicat <code>ancreInvincible</code>. Pour la réduction des dégâts, ajouter au dragon un prédicat <code>dragonInvincible</code>. Pour les DM indirects, il faudra gérer à la main la réduction de DM.</li>
                  <li><strong>Piqûres d'insectes</strong> : Rajouter un <a href=#predicats>prédicat</a> <code>piquresDInsectes</code> avec comme valeur la résistance aux dégâts à distance appropriée</li>
                  <li>
                    <strong>Poison</strong> : pour enduire une arme de label <i>L</i> de poison, utiliser <code>!cof-enduire-poison <i>L type force save</i></code>. Pour l'instant, <i>type</i> ne peut être que <code>rapide</code> ou <code>affaiblissant</code>. Pour un poison rapide, <i>force</i> est une expression pour les dégâts (typiquement, <code>2d6</code>), pour un poison affaiblissant c'est une expression indiquant au bout de combien de tours le poison fait effet (si c'est 0, alors l'affaiblissement ne dure que pendant un combat, sinon c'est une durée en heures, à gérer par le MJ). <i>save</i> est la difficulté du jet de CON pour résister au poison. On peut rajouter deux arguments optionnels :
                    <ul>
                      <li><code>--testINT</code> <i>n</i>: fixe la difficulté du jet d'INT pour réussir à poser le poison. La difficulté par défaut est 14.</li>
                      <li><code>--dose</code> <i>nom</i>: indique une ressource dans laquelle on puise pour enduire de poison (à la manière de munitions). Il faudra que le personnage ait un attribut de nom <code>dose_<i>nom</i></code> avec comme valeur le nombre de doses possédées.</li>
                    </ul>
                    Il est aussi possible d'enduire de poison des munitions. Pour ce faire, remplacer le label de l'attaque par le nom de l'attribut contenant les mutions (ce nom commence donc par <code>munition_</code>). Le script suppose que toute munition lancée perd son poison.
                  </li>
                  <li><strong>Potion de sang de l'Arbre-Coeur</strong> : <code>!cof-effet sangDeLArbreCoeur true</code>, à enlever quand les 24h sont passées.</li>
                  <li><strong>Protection contre les souffles</strong> et dégâts de zone : ajouter un <a href=#predicats>prédicat</a> <code>protectionDMZone</code>. Pour une protection contre un seul élément (feu, froid, etc), ajouter <code>_</code> et le nom de l'élément. Par exemple, contre le feu, on aura un prédicat <code>protectionDMZone_feu</code>.</li>
                  <li><strong>Putréfaction</strong> : ajouter à l'attaque <code>--effet putrefaction 5 --save CON 14</code> (pour les données des momies)</li>
                  <li><strong>Rage</strong> (pour la campagne Invincible) : pour entrer en rage, faire <code>!cof-effet-combat rage</code>. On peut par exemple mettre cette commande dans une ability.</li>
                  <li><strong>Réaction allergique</strong> : il existe un effet <code>reactionAllergique</code> qui fait le malus en DEX et CHA et disparaît en cas de soin magique. Pour une attaque, on peut par exemple mettre <code>--effet reactionAllergique --save CON 11</code>.</li>
                  <li><strong>Résistant (insectes)</strong> : ajouter un <a href=#predicats>prédicat</a> <code>durACuire</code>.</li>
                  <li><strong>Saisir et broyer</strong> : ajouter un <a href=#predicats>prédicat</a> <code>saisirEtBroyer</code></li>
                  <li><strong>Sang de fer</strong> : ajouter un <a href=#predicats>prédicat</a> <code>sangDeFerIf</code>.</li>
                  <li><strong>Sans esprit</strong> : ajouter un <a href=#predicats>prédicat</a> <code>sansEsprit</code> permet la réussite automatique des jets de résistance basés sur INT, SAG ou CHA.</li>
                  <li><strong>Sphère de feu</strong> : <code>!cof-sphere-de-feu</code>.</li>
                  <li><strong>Vulnérabilité aux coups critiques</strong> : si la créature possède un <a href=#predicats>prédicat</a> <code>vulnerableCritique</code>, le script interprète la valeur de ce prédicat comme les chances (sur 100) qu'un coup critique tue directment la créature. Par exemple, la valeur sera de 25 pour un esprit du givre.</li>
                </ul>
              </div>
            </div>
            <h2 class="text-primary" id="Terres_d_Arran">5. Terres d'Arran</h2>
            <p>Le script determine s'il doit utiliser les règles par défaut des Terres d'Arran ou celles de COF générique en fonction des fiches de personnages présentes sur la partie. Pour que toutes vox fiches soient bien adaptées au setting des Terres d'Arran, assurez-vous de bien sélectionner ce setting dans les réglages du jeu (accessibles avant de lancer la partie "Options de jeu" ou "Game Settings".</p>
            <p><img class="img-fluid" width="80%" src="images/Settings_arran.jpg"></p>
            <p>Le fait d'être dans ce mode de règles change le calcul de l'initiative et des mods d'attaque.</p>
            <h3 class="text-info" id="Peuples_d_Arran">5.1 Les peuples d'Arran</h3>
            <h4 class="text-info">5.1.1 Elfes</h4>
            <div class="decalage">
              <h5 class=text-secondary>Voie du peuple des Elfes</h5>
              <ol>
                <li><strong>Grâce Elfique :</strong> Ajouter le bonus au jets de charisme sur la fiche, et une compétence <code>discrétion</code> pour les déplacements silencieux.</li>
                <li><strong>Essence magique :</strong> ajouter un <a href=#predicats>prédicat</a> <code>DEF_magie</code> de valeur 2, et un <a href=#predicats>prédicat</a> <code>resistanceALaMagie</code> de valeur 2 aussi. Passer ces valeurs à 4 au rang 4 dans la voie.</li>
                <li><strong>Maîtrise des armes elfiques :</strong> Pas de support pour l'instant</li>
                <li><strong>Empathie elfique :</strong> Pas de support</li>
                <li><strong>Immortalité :</strong>TODO</li>
              </ol>
              <h5 class=text-secondary>Voie culturelle des elfes blancs</h5>
              <ol>
                <li><strong>Mémoire du monde :</strong> En Attente </li>
                <li><strong>Prédispositions magiques :</strong> En Attente </li>
                <li><strong>Lancier d’élite :</strong> En Attente </li>
                <li><strong>Blancheur immaculée :</strong> En Attente </li>
                <li><strong>Parangon elfe blanc :</strong> En Attente </li>
              </ol>
              <h5 class=text-secondary>Voie culturelle des elfes bleus</h5>
              <ol>
                <li><strong>Équilibre parfait :</strong> Ajouter une compétence équilibre avec le bonus. </li>
                <li><strong>Natif d’Elsémur :</strong> voir la capacité choisie. </li>
                <li><strong>Imperturbable :</strong> En Attente </li>
                <li><strong>Les enseignements de l’eau  :</strong> En Attente </li>
                <li><strong>Parangon elfe bleu :</strong> En Attente </li>
              </ol>
              <h5 class=text-secondary>Voie culturelle des elfes noirs</h5>
              <ol>
                <li><strong>Artiste de l’ombre :</strong> En Attente </li>
                <li><strong>Apprenti de Slurce :</strong> En Attente </li>
                <li><strong>Armes secrètes :</strong> En Attente </li>
                <li><strong>Noir comme le sang :</strong> En Attente </li>
                <li><strong>Parangon elfe noir :</strong> En Attente </li>
              </ol>
              <h5 class=text-secondary>Voie culturelle des elfes sylvains</h5>
              <ol>
                <li><strong>Le chant de la Terre :</strong> En Attente </li>
                <li><strong>Enfant de la forêt :</strong> voir la capacité choisie </li>
                <li><strong>Archer émérite :</strong> ajuster les chances de critique pour les attaques utilisant les arcs. </li>
                <li><strong>Compagnon animal supérieur :</strong> En Attente </li>
                <li><strong>Parangon elfe vert :</strong> En Attente </li>
              </ol>
            </div>
            <h4 class="text-info">5.1.2 Nains</h4>
            <div class="decalage">
              <h5 class=text-secondary>Voie du peuple des Nains</h5>
              <ol>
                <li><strong>Résistance :</strong> En Attente </li>
                <li><strong>Solide comme un roc :</strong> En Attente </li>
                <li><strong>Maîtrise des armes runiques :</strong> En Attente </li>
                <li><strong>Résistance à la magie :</strong> En Attente </li>
                <li><strong>Ténacité naine :</strong> En Attente </li>
              </ol>
              <h5 class=text-secondary>Voie culturelle de l’ordre de la Forge  </h5>
              <ol>
                <li><strong>Artisan de la forge :</strong> En Attente </li>
                <li><strong>Forgeron runique :</strong> En Attente </li>
                <li><strong>Marteler le métal :</strong> En Attente </li>
                <li><strong>Runes de défense :</strong> En Attente </li>
                <li><strong>Maître artisan :</strong> En Attente </li>
              </ol>
              <h5 class=text-secondary>Voie culturelle de l’ordre du Talion  </h5>
              <ol>
                <li><strong>Plein aux as :</strong> En Attente </li>
                <li><strong>Le sens des affaires :</strong> En Attente </li>
                <li><strong>Pot-de-vin :</strong> En Attente </li>
                <li><strong>La Loge noire  :</strong> En Attente </li>
                <li><strong>Seigneur du Talion :</strong> En Attente </li>
              </ol>
              <h5 class=text-secondary>Voie culturelle de l’ordre du Temple </h5>
              <ol>
                <li><strong>Grosse tête :</strong> En Attente </li>
                <li><strong>Enseigne du Temple :</strong> En Attente </li>
                <li><strong>Invention étrange :</strong> En Attente </li>
                <li><strong>Rites funéraires (L) :</strong> En Attente </li>
                <li><strong>Maître du temple :</strong> En Attente </li>
              </ol>
              <h5 class=text-secondary>Voie culturelle de l’ordre du Bouclier</h5>
              <ol>
                <li><strong>Combat en phalange :</strong> En Attente </li>
                <li><strong>Formation militaire :</strong> En Attente </li>
                <li><strong>Capitaine du Bouclier :</strong> En Attente </li>
                <li><strong>Fuite interdite :</strong> En Attente </li>
                <li><strong>Veilleur du roi :</strong> En Attente </li>
              </ol>
              <h5 class=text-secondary>Voie culturelle de l’ordre des Errants</h5>
              <ol>
                <li><strong>Moins que rien :</strong> En Attente </li>
                <li><strong>Passé révolu :</strong> En Attente </li>
                <li><strong>Paysan aguerri :</strong> En Attente </li>
                <li><strong>Solidarité des Errants :</strong> En Attente </li>
                <li><strong>Volonté héroïque :</strong> En Attente </li>
              </ol>

            </div>
            <h4 class="text-info">5.1.3 Humain</h4>
            <div class="decalage">
              <h5 class=text-secondary>Voie du peuple des Humains</h5>
              <ol>
                <li><strong>Adaptable :</strong> En Attente </li>
                <li><strong>Loup parmi les loups :</strong> En Attente </li>
                <li><strong>Enseignement exotique :</strong> En Attente </li>
                <li><strong>Versatile :</strong> En Attente </li>
                <li><strong>Dépassement :</strong> En Attente </li>
              </ol>
              <h5 class=text-secondary>Voie culturelle des ruines nordiques</h5>
              <ol>
                <li><strong>Pied marin :</strong> En Attente </li>
                <li><strong>Barbare :</strong> En Attente </li>
                <li><strong>Expertise des haches :</strong> En Attente </li>
                <li><strong>Homme des clans :</strong> En Attente </li>
                <li><strong>Conquéran:</strong> En Attente </li>
              </ol>
              <h5 class=text-secondary>Voie culturelle du Mitan</h5>
              <ol>
                <li><strong>Homme des cités :</strong> En Attente </li>
                <li><strong>Entre tradition et progrès :</strong> En Attente </li>
                <li><strong>Modernisme :</strong> En Attente </li>
                <li><strong>Conspirateur :</strong> En Attente </li>
                <li><strong>Maître marchand :</strong> En Attente </li>
              </ol>
              <h5 class=text-secondary>Voie culturelle des empires austraux</h5>
              <ol>
                <li><strong>Érudition :</strong> En Attente </li>
                <li><strong>Études arcaniques :</strong> En Attente </li>
                <li><strong>Autorité culturelle :</strong> En Attente </li>
                <li><strong>Prédispositions arcaniques :</strong> En Attente </li>
                <li><strong>Mage :</strong> En Attente </li>
              </ol>
              <h5 class=text-secondary>Voie culturelle des Terres orientales</h5>
              <ol>
                <li><strong>Connaissances cosmopolites :</strong> En Attente </li>
                <li><strong>Rejeton de la cité des Sang-mêlés :</strong> En Attente </li>
                <li><strong>Sentir la magie :</strong> En Attente </li>
                <li><strong>Chevaucheur de dragons :</strong> En Attente </li>
                <li><strong>Expert en filouterie :</strong> En Attente </li>
              </ol>
            </div>
            <h4 class="text-info">5.1.3 Peaux Vertes</h4>
            <div class="decalage">
              <h5 class=text-secondary>Voie du peuple des Peaux Vertes </h5>
              <ol>
                <li><strong>Pour l’honneur :</strong> En Attente </li>
                <li><strong>Frappe déloyale :</strong> En Attente </li>
                <li><strong>Maîtrise des armes sauvages :</strong> En Attente </li>
                <li><strong>Croyances païennes :</strong> En Attente </li>
                <li><strong>Héros tribal :</strong> En Attente </li>
              </ol>
              <h5 class=text-secondary>Voie culturelle des Ogres
              </h5>
              <ol>
                <li><strong>Énorme :</strong> En Attente </li>
                <li><strong>Brute :</strong> En Attente </li>
                <li><strong>Attaque massive (L) :</strong> En Attente </li>
                <li><strong>Intuable :</strong> En Attente </li>
                <li><strong>Monstre :</strong> En Attente </li>
              </ol>
              <h5 class=text-secondary>Voie culturelle des Orcs</h5>
              <ol>
                <li><strong>Force de la nature :</strong> En Attente </li>
                <li><strong>Talent pour la violence :</strong> En Attente </li>
                <li><strong>Critique brutal :</strong> En Attente </li>
                <li><strong>Attaque sanglante (L) :</strong> En Attente </li>
                <li><strong>Colosse :</strong> En Attente </li>
              </ol>
              <h5 class=text-secondary>Voie culturelle des Gobelins</h5>
              <ol>
                <li><strong>Insignifiant :</strong> En Attente </li>
                <li><strong>Agile et sournois :</strong> En Attente </li>
                <li><strong>Ombre mouvante (L) :</strong> En Attente </li>
                <li><strong>Rochassier :</strong> En Attente </li>
                <li><strong>Teigneux :</strong> En Attente </li>
              </ol>

              <div class="decalage">
              </div>
              <h3 class="text-info" id="Voies_de_la_famille_des_combattants">5.2 Voies de la famille des combattants</h3>
              <div class="decalage">
                <h4 class="text-secondary">Voie du bastion</h4>
                <ol>
                  <li><strong>Protéger un allié</strong> : <code>!cof-proteger-un-allie @{selected|token_id} @{target|token_id}</code>. Fonctionne aussi si on remplace le target par un nom de token. Le script ne vérifie pas que le combattant ne change pas d'allié plus d'une fois par tour. Pour la capacité avancée, ajouter un prédicat <code>protegerUnAllieAvance</code>.</li>
                  <li><strong>Absorber un coup (L) :</strong>
                    <ul>
                      <li>utiliser <code>!cof-effet-temp absorberUnCoup 1</code> pour se mettre en position. Attention, ça ne vérifie pas si le combattant porte son bouclier.</li>
                      <li>le script propose un bouton à activer en cas d'attaque réussie alors que le combattant est en position.</li>
                    </ul>
                  </li>
                  <li><strong>Coup de bouclier</strong> : faire une attaque de bouclier, de type <code>Arme gauche</code>, avec le modificateur <code>avecd12crit</code>. Pour que cette attaque soit proposée dans les listes d'action seulement quand le personnage porte son bouclier, ajouter un prédicat <code>attaqueAuBouclier</code> de valeur le label de l'attaque.</li>
                  <li><strong>Absorber un sort (L) :</strong>
                    <ul>
                      <li>utiliser <code>!cof-effet-temp absorberUnSort 1</code> pour se mettre en position. Attention, ça ne vérifie pas si le combattant porte son bouclier.</li>
                      <li>le script propose un bouton à activer en cas d'attaque réussie alors que le combattant est en position.</li>
                    </ul>
                  </li>
                  <li><strong>Armure lourde :</strong> Noter l'armure sur la feuille du personnage, et ajouter un <a href=#predicats>prédicat</a> <code>armureLourdeGuerrier</code> au personnage. L'annulation du critique ne se produira que si l'armure est portée et que la valeur totale du bonus de défense supérieure ou égale à 7 (le bonus de DEF d'une armure de plaques complète).</li>
                </ol>
                <h4 class="text-secondary">Voie de la bravoure</h4>
                <ol>
                  <li><strong>Robustesse :</strong> rajouter les PVs sur la fiche. </li>
                  <li><strong>Armure naturelle :</strong> rajouter la DEF sur la fiche </li>
                  <li><strong>Prouesse :</strong> ajouter un <a href=#predicats>prédicat</a> <code>prouesse</code> (on peut y associer un nombre, si on souhaite plus d'une utilisation par tour). Le script générera automatiquement les boutons Prouesse sur les test appropriés.</li>
                  <li><strong>Dernier rempart (L) :</strong> pas de support particulier, le MJ doit gérer les attaques supplémentaires. </li>
                  <li><strong>Constitution héroïque :</strong> reporter les bonus sur la fiche. </li>
                </ol>
                <h4 class="text-secondary">Voie du combat à deux armes</h4>
                <ol>
                  <li><strong>Combat à deux armes (L) :</strong> mettre une des attaques de type arme gauche, et y ajouter le modificateur <code>avecd12crit</code>. Pas encore de support pour la capacité avancée : dans ce cas, ajoutez le +1 dans la barre 3 du token ou sur les attaques. </li>
                  <li><strong>Parade croisée (L) :</strong> <code>!cof-effet-temp paradeCroisee 1 --valeur 2 --montreActions</code>. Pour la capacité avancée, <code>!cof-effet-temp paradeCroisee 1 --valeur 4 --montreActions</code>.</li>
                  <li><strong>Symétrie :</strong> En Attente </li>
                  <li><strong>Double peine :</strong> En Attente </li>
                  <li><strong>Combat à deux armes parfait :</strong> En Attente </li>
                </ol>
                <h4 class="text-secondary">Voie du combat monté  </h4>
                <ol>
                  <li><strong>Fidèle monture :</strong> Faire un personnage pour la monture, avec un <a href=#predicats>prédicat</a> <code>monture</code>. Pour monter sur la monture, on peut utiliser une ability de type token action, avec <code>!cof-en-selle @{selected|token_id} <i>nom_de_la_monture</i></code>. Pour en descendre, il suffit de cliquer à nouveau sur le bouton de l'ability. Si vous souhaitez éviter que la monture apparaisse dans le turn tracker, vous pouvez ajouter un <a href=#predicats>prédicat</a> <code>aucuneActionCombat</code> à la monture. </li>
                  <li><strong>Cavalier émérite</strong> : Ajouter au combattant un <a href=#predicats>prédicat</a> <code>cavalierEmerite:2</code>. Pour la défense de la monture, ajouter à cellle-ci un attribut <code>defDeriveeDe</code> de valeur le nom du combattant (exactement tel qu'il apparaît sur la fiche). Attention, cela suppose que le combattant a une meilleure DEF que sa monture. Si ce n'est pas le cas, faire les ajustements sur la fiche du combattant.</li>
                  <li><strong>Massacrer la piétaille :</strong> En Attente </li>
                  <li> <strong>Charge :</strong> pas de support pour le déplacement, mais
                    <ul>
                      <li>Pour l'attaque : utiliser <code>--m2d20 --plus 1d6</code></li>
                      <li>Pour les créatures sur la trajectoire, utiliser <code>!cof-jet FOR 18</code>, et en cas de succès, infliger les DM (<code>!cof-dmg 1d6</code>)</li>
                    </ul>
                  </li>
                  <li><strong>Monture fantastique :</strong> faire un personnage pour la monture, avec un <a href=#predicats>prédicat</a> <code>monture</code>.</li>
                </ol>
                <h4 class="text-secondary">Voie du commandement</h4>
                <ol>
                  <li><strong>Action concertée :</strong> utiliser <code>!cof-echange-init @{selected|token_id} @{target|token_id} <i>n</i></code> où <i>n</i> peut valoir 0, 1, 2 ou 3 selon le rang dans la voie et si la capacité est avancée.</li>
                  <li><strong>À couvert (L) :</strong> <code>!cof-a-couvert @{selected|token_id} @{target|token_id}</code> le target est l'allié qui se déplace avec l'arquebusier. Se sélectionner soi-même si pas d'allié. Pas encore de support pour la capacité avancée.</li>
                  <li><strong>Exemplaire :</strong> faire <code>!cof-exemplaire</code>, juste après l'attaque ratée.</li>
                  <li><strong>Ordre de bataille :</strong> pas de support </li>
                  <li><strong>Charge fantastique (L) :</strong> <code>!cof-charge-fantastique @{selected|token_id} --alliesEnVue --self --limiteParCombat 1</code></li>
                </ol>
                <h4 class="text-secondary">Voie de la férocité</h4>
                <ol>
                  <li><strong>Cri de guerre :</strong> <code>!cof-effet-combat criDeGuerre</code></li>
                  <li><strong>Charge (L) :</strong> <code>#Attaque -1 --bonusAttaque 2 --plus 1d6</code>. Le déplacement n'est pas encore géré.</li>
                  <li><strong>Rage du berserk (L) :</strong> utiliser <code>!cof-rage-du-berserk</code>, à la fois pour entrer en rage et pour tenter d'en sortir avant la fin du combat.</li>
                  <li><strong>Même pas mal :</strong> ajouter un <a href=#predicats>prédicat</a> <code>memePasMal</code>. Le joueur doit lui-même activer la rage ou le furie si il souhaite en profiter.</li>
                  <li><strong>Attaque tourbillon (L) :</strong> <code>!cof-explosion -1 --auto --disque 5 --saufAllies --limiteParCombat 1 tourbillon</code>.</li>
                </ol>
                <h4 class="text-secondary">Voie de la guerre</h4>
                <ol>
                  <li><strong>Posture de combat :</strong> <code>!cof-posture-de-combat <i>bonus attr1 attr2</i></code>, où les deux <i>attr</i> peuvent être soit <code>DEF</code> soit <code>ATT</code> soit <code>DM</code>, et le <i>bonus</i> est retiré au premier attribut pour être ajouté au second. Le bonus peut être limité si le combattant a un <a href=#predicats>prédicat</a> <code>voieDuSoldat</code> qui indique son rang dans la voie. Exemple d'utilisation&nbsp;: <code>!cof-posture-de-combat ?{Bonus|1|2|3|4|5} ?{Baisser|Défense,DEF|Attaque,ATT|Dégâts,DM} ?{Augmenter|Défense,DEF|Attaque,ATT|Dégâts,DM}</code>. Normalement, la règle fait décider de sa posture au combattant à chaque tour, mais en pratique, il en change assez rarement. Une posture de combat reste donc active jusqu'à la fin du combat ou jusqu'à ce qu'on en change (elle est neutre si on a le même attribut à buffer et débuffer).</li>
                  <li><strong>Désarmer (L) :</strong> <code>!cof-desarmer @{selected|token_id} @{target|token_id}</code>.</li>
                  <li><strong>Double attaque (L) :</strong> faire deux attaques, avec l'option supplémentaire <code>--bonusAttaque -2</code>.</li>
                  <li><strong>Attaque circulaire (L) :</strong> faire les attaques normalement, ce n'est pas considéré comme une aoe.</li>
                  <li><strong>Attaque puissante :</strong> <code>#Attaque -1 --avecd12crit --plus 2d6</code>.</li>
                </ol>
                <h4 class="text-secondary">Voie de la maîtrise des armes</h4>
                <ol>
                  <li><strong>Arme de prédilection :</strong> il est possible de préciser une famille d'armes de prédilection (un peu plus large que dans les règles), parmis <code>arc</code>, <code>arbalete</code>, <code>hache</code>, <code>epee</code>, <code>marteau</code>, <code>masse</code>, <code>sabre</code>, <code>epieu</code>, <code>poudre</code>, <code>baton</code> et <code>rapiere</code>. Si cela vous convient, ajoutez un prédicat <code>armeDePredilection</code> de valeur une de ces familles. Sinon, simplement ajouter le bonus sur les attaques dans la fiche.</li>
                  <li><strong>Science du critique :</strong> En Attente </li>
                  <li><strong>Spécialisation :</strong> En Attente </li>
                  <li><strong>Attaque parfaite (L) :</strong> En Attente </li>
                  <li><strong>Riposte :</strong> En Attente </li>
                </ol>
                <h4 class="text-secondary">Voie du pugilat</h4>
                <ol>
                  <li><strong>Poings de fer :</strong> En Attente </li>
                  <li><strong>Peau de pierre :</strong> En Attente </li>
                  <li><strong>Peau d’acier :</strong> En Attente </li>
                  <li><strong>Déluge de coups (L) :</strong> En Attente </li>
                  <li><strong>Force héroïque :</strong> En Attente </li>
                </ol>
                <h4 class="text-secondary">Voie de la puissance</h4>
                <ol>
                  <li><strong>Argument de taille :</strong> En Attente </li>
                  <li><strong>Tour de force :</strong> En Attente </li>
                  <li><strong>Attaque brutale (L) :</strong> En Attente </li>
                  <li><strong>Briseur d’os :</strong> En Attente </li>
                  <li><strong>Vitalité débordante :</strong> En Attente </li>
                </ol>

              </div>
              <h3 class="text-info" id="Voies_de_la_famille_des_aventuriers">5.3 Voies de la famille des aventuriers</h3>
              <div class="decalage">
                <h4 class="text-secondary">Voie de l’acrobatie</h4>
                <ol>
                  <li><strong>Acrobate :</strong> En Attente </li>
                  <li><strong>Grâce féline :</strong> En Attente </li>
                  <li><strong>Lanceur de couteau :</strong> En Attente </li>
                  <li><strong>Esquive acrobatique :</strong> En Attente </li>
                  <li><strong>Dextérité héroïque :</strong> En Attente </li>
                </ol>
                <h4 class="text-secondary">Voie de l’arbalètrie</h4>
                <ol>
                  <li><strong>Joli coup! :</strong> En Attente </li>
                  <li><strong>Cadence de tir :</strong> En Attente </li>
                  <li><strong>Tir double (L) :</strong> En Attente </li>
                  <li><strong>As de la gâchette :</strong> En Attente </li>
                  <li><strong>Tir mortel :</strong> En Attente </li>
                </ol>
                <h4 class="text-secondary">Voie de l’archerie</h4>
                <ol>
                  <li><strong>Sens affûtés :</strong> En Attente </li>
                  <li><strong>Tir aveugle (L) :</strong> En Attente </li>
                  <li><strong>Tir rapide (L) :</strong> En Attente </li>
                  <li><strong>Flèche de mort (L) :</strong> En Attente </li>
                  <li><strong>Dans le mille :</strong> En Attente </li>
                </ol>
                <h4 class="text-secondary">Voie de l’assassinat</h4>
                <ol>
                  <li><strong>Discrétion :</strong> En Attente </li>
                  <li><strong>Attaque sournoise (L) :</strong> En Attente </li>
                  <li><strong>Frappe chirurgicale :</strong> En Attente </li>
                  <li><strong>Surprise :</strong> En Attente </li>
                  <li><strong>Botte secrète :</strong> En Attente </li>
                </ol>
                <h4 class="text-secondary">Voie du bohème</h4>
                <ol>
                  <li><strong>Rumeurs et légendes :</strong> En Attente </li>
                  <li><strong>Argumenter :</strong> En Attente </li>
                  <li><strong>Débrouillard :</strong> En Attente </li>
                  <li><strong>Déguisement :</strong> En Attente </li>
                  <li><strong>Touche-à-tout :</strong> En Attente </li>
                </ol>
                <h4 class="text-secondary">Voie du charme</h4>
                <ol>
                  <li><strong>Charmant :</strong> En Attente </li>
                  <li><strong>Provocation (L) :</strong> En Attente </li>
                  <li><strong>Attaque flamboyante (L) :</strong> En Attente </li>
                  <li><strong>Suggestion (L) :</strong> En Attente </li>
                  <li><strong>Charisme héroïque  :</strong> En Attente </li>
                </ol>
                <h4 class="text-secondary">Voie de la chasse</h4>
                <ol>
                  <li><strong>Proche de la nature :</strong> En Attente </li>
                  <li><strong>Nature nourricière :</strong> En Attente </li>
                  <li><strong>Attaque éclair (L) :</strong> En Attente </li>
                  <li><strong>Ennemis jurés :</strong> En Attente </li>
                  <li><strong>Perception héroïque :</strong> En Attente </li>
                </ol>
                <h4 class="text-secondary">Voie du compagnon animal</h4>
                <ol>
                  <li><strong>Odorat :</strong> En Attente </li>
                  <li><strong>Surveillance :</strong> En Attente </li>
                  <li><strong>Combat :</strong> En Attente </li>
                  <li><strong>Empathie animale :</strong> En Attente </li>
                  <li><strong>Animal fabuleux :</strong> En Attente </li>
                </ol>
                <h4 class="text-secondary">Voie de l’escrime</h4>
                <ol>
                  <li><strong>Attaque en finesse :</strong> En Attente </li>
                  <li><strong>Intelligence du combat :</strong> En Attente </li>
                  <li><strong>Feinte (L) :</strong> En Attente </li>
                  <li><strong>Ambidextrie :</strong> En Attente </li>
                  <li><strong>Botte mortelle :</strong> En Attente </li>
                </ol>
                <h4 class="text-secondary">Voie de la fourberie</h4>
                <ol>
                  <li><strong>Doigts agiles :</strong> En Attente </li>
                  <li><strong>Détecter les pièges :</strong> En Attente </li>
                  <li><strong>Croc-en-jambe :</strong> En Attente </li>
                  <li><strong>Attaque paralysante (L) :</strong> En Attente </li>
                  <li><strong>Attaque en traître :</strong> En Attente </li>
                </ol>

              </div>
              <h3 class="text-info" id="Voies_de_la_famille_des_mystiques">5.4 Voies de la famille des mystiques</h3>
              <div class="decalage">
                <h4 class="text-secondary">Talents magiques</h4>
                <ul>
                  <li><strong>Détection de la magie :</strong> pas de support.</li>
                  <li><strong>Flamme :</strong> Faire une attaque magique de type feu pour l'attaque au contact. Pour l'illumination, <code>!cof-lumiere @{selected|token_id} 5 1 --mana 0</code>.</li>
                  <li><strong>Inspiration :</strong> <code>!cof-effet-temp inspiration [[2+@{selected|SAG}]] --target @{target|token_id} --lanceur @{selected|token_id} --portee 10</code>. Pour l'instant le script ne vérifie pas que le sort n'est pas actif sur trop de cibles à la fois.</li>
                  <li><strong>Lumières dansantes :</strong> <code>!cof-lumiere @{selected|token_id} 20 15 --mana 0</code>. Le script ne gère pas encore l'annulation de l'effet au moindre choc.</li>
                  <li><strong>Projectile de force : </strong>
                      Ajouter une attaque sur la fiche utilisant l'attaque magique, dommages 1d4, portée 50, type Sortilège, modificateur <code>auto</code> dégâts contondants, option <code>--mana 0</code>.
                  </li>
                </ul>
                <h4 class="text-secondary">Voie de l’alchimie</h4>
                <p style="margin-top:0px; margin-bottom:0px">Pour créer ou juste voir ses élixirs, utiliser la commande <code>!cof-elixirs</code>. Pour cela, il faut aussi un <a href=#predicats>prédicat</a> <code>voieDeLAlchimie</code> avec comme valeur le rang dans la voie. Noter que la commande <code>!cof-elixirs</code> affiche une liste d'élixirs, et que pour effectivement créer un élixir, il faut cliquer sur le bouton correspondant dans cette liste.</p>
                <ol>
                  <li><strong>Fortifiant :</strong> création à l'aide de <code>!cof-elixirs</code>, et utilisation avec la même commande, ou bien en utilisant <code>!cof-consommables</code>. Pour la version avancée, ajouter un prédicat <code>fortiviantAvance</code></li>
                  <li><strong>Feu grégeois :</strong> création à l'aide de <code>!cof-elixirs</code>, et utilisation avec la même commande, ou bien en utilisant <code>!cof-consommables</code>. Pas de support pour la version avancée pour l'instant : utiliser <code>!cof-dmg <i>rang</i> --feu</code> pour les personnages qui auraient raté leur jet de DEX.</li>
                  <li><strong>Huile instable :</strong> création à l'aide de <code>!cof-elixirs</code>, et utilisation avec la même commande, ou bien en utilisant <code>!cof-consommables</code>.</li>
                  <li><strong>Élixir de guérison :</strong> création à l'aide de <code>!cof-elixirs</code>, et utilisation avec la même commande, ou bien en utilisant <code>!cof-consommables</code>.</li>
                  <li><strong>Élixirs de Protection :</strong> création à l'aide de <code>!cof-elixirs</code>, et utilisation avec la même commande, ou bien en utilisant <code>!cof-consommables</code>.</li>
                </ol>
                <h4 class="text-secondary">Voie des arts druidiques</h4>
                <ol>
                  <li><strong>Langage des animaux :</strong> En Attente </li>
                  <li><strong>Nuée d’insectes* :</strong> En Attente </li>
                  <li><strong>Le guetteur :</strong> En Attente </li>
                  <li><strong>Masque du prédateur* :</strong> En Attente </li>
                  <li><strong>Sagesse héroïque :</strong> En Attente </li>
                </ol>
                <h4 class="text-secondary">Voie de la divination</h4>
                <ol>
                  <li><strong>Sixième sens :</strong> ajouter le bonus en DEF divers et initiative divers, ajouter une compétence <code>vigilance</code>, de valeur 5 (le bonus aux jet de surprise).</li>
                  <li><strong>Détection de l’invisible* :</strong> En Attente </li>
                  <li><strong>Clairvoyance* :</strong> En Attente </li>
                  <li><strong>Prescience* :</strong> En Attente </li>
                  <li><strong>Hyperconscience :</strong> En Attente </li>
                </ol>
                <h4 class="text-secondary">Voie de l’envoûtement</h4>
                <ol>
                  <li><strong>Injonction* :</strong> En Attente </li>
                  <li><strong>Sommeil* :</strong> En Attente </li>
                  <li><strong>Confusion* :</strong> En Attente </li>
                  <li><strong>Amitié* :</strong> En Attente </li>
                  <li><strong>Domination* :</strong> En Attente </li>
                </ol>
                <h4 class="text-secondary">Voie des forêts</h4>
                <ol>
                  <li><strong>Peau d’écorce* :</strong>
                    <code>!cof-effet-temp peauDEcorce [[5+@{selected|SAG}]] ?{Magie|Normale,--mana 1|Économe (L),--mana 0|Étendue (L),--puissant duree --mana 1}</code>. Si le personnage a un <a href=#predicats>prédicat</a> <code>voieDesForets</code> de valeur 4 ou plus, le bonus sera de +4 en DEF. Ajouter un prédicat <code>peauDEcorceAvancee</code> pour la version en capacité avancée.</li>
                  <li><strong>Prison végétale* :</strong> En Attente </li>
                  <li><strong>Baies magiques* :</strong> En Attente </li>
                  <li><strong>Animation d’un arbre* :</strong> En Attente </li>
                  <li><strong>Régénération* :</strong> En Attente </li>
                </ol>
                <h4 class="text-secondary">Voie des illusions</h4>
                <ol>
                  <li><strong>Image décalée* :</strong> <code>!cof-effet-temp imageDecalee [[5+@{selected|SAG}]] ?{Magie|Normale,--mana 1|Économe (L),--mana 0|Étendue (L),--puissant duree --mana 1}</code>. Pour la version avancée de la capacité, ajouter un prédicat <code>imageDecaleeAvancee</code>.</li>
                  <li><strong>Mirage* :</strong> En Attente </li>
                  <li><strong>Imitation* :</strong> En Attente </li>
                  <li><strong>Dédoublement* :</strong> En Attente </li>
                  <li><strong>Tueur fantasmagorique* :</strong> En Attente </li>
                </ol>
                <h4 class="text-secondary">Voie de la magie élémentaliste</h4>
                <ol>
                  <li><strong>Brumes* :</strong>
                  <code>!cof-tenebres @{selected|token_id} @{target|token_id} --brumes --mana 1</code>. La commande pose un token de brouillard pour visualiser la zone. Tous les tokens présents dans la zone au lancement du sort sont automatiquement dans l'état pénombre. Au MJ ensuite d'enlever l'état pénombre quand les cibles sortent de la zone. A la fin de la durée du sort, ou à la fin du combat, la zone et les états pénombre restant disparaissent automatiquement. Il est aussi possible de changer les valeurs par défaut du sort (portée 20m, rayon 20m) avec les options <code>--portee X</code> et <code>--rayon X</code>. En règle custom, l'option <code>puissant</code> permet de doubler la superficie couverte (le script calcule le rayon approprié si custom).</li>
                  <li><strong>Sous tension* :</strong>
                    <ul>
                      <li><code>!cof-effet-temp sousTension [[5+@{selected|SAG}]] ?{Magie|Normale,--mana 2|Économe (L),--mana 0|Étendue (L),--puissant duree --mana 2|Puissante (L),--puissant --mana 2}</code> pour lancer le sort et mettre le personnage sous tension</li>
                      <li>Ajouter une attaque sur la fiche utilisant l'attaque magique, dommages 1d6+INT, portée 10, type Sortilège, dégâts électriques, options <code>--si etat sousTension --fx beam-holy</code>.</li>
                      <li>Utiliser un prédicat <code>voieDeLaMagieElementaliste</code> de valeur le rang dans la voie pour le passage des dégâts à 2d6 quand le personnage est touché.</li>
                      <li>Pas de support particulier pour la version avancée.</li>
                    </ul>
                  </li>
                  <li><strong>Armure de terre* :</strong>
                  bien utiliser un <a href=#predicats>prédicat</a> <code>voieDeLaMagieElementaliste</code> avec comme valeur le rang dans la voie. Pour lancer le sort, faire <code>!cof-effet-temp protectionContreLesElements [[5+@{selected|SAG}]] ?{Magie|Normale,--mana 3|Économe (L),--mana 1|Étendue (L),--puissant duree --mana 3}</code>.</li>
                  <li><strong>Boule de feu* :</strong> En Attente </li>
                  <li><strong>Intelligence héroïque :</strong> En Attente </li>
                </ol>
                <h4 class="text-secondary">Voie de la magie runique</h4>
                <ol>
                  <li><strong>Forgeron* :</strong> Il faut un <a href=#predicats>prédicat</a> <code>voieDuMetal</code> pour connaître le rang (ou utiliser l'option <code>--valeur</code>). Lancer le sort avec <code>!cof-effet-temp forgeron(<i>L</i>) [[5+@{selected|SAG}]]</code> où <i>L</i> est le label d'une attaque. Ensuite, chaque fois que cette attaque sera utilisée, les dégâts seront ajoutés. Limitations : si deux attaques utilisent la même arme, il faut faire deux fois l'action, une pour chaque attaque.</li>
                  <li><strong>Rune d’énergie* :</strong> En Attente </li>
                  <li><strong>Rune de puissance* :</strong> En Attente </li>
                  <li><strong>Rune de garde* :</strong> En Attente </li>
                  <li><strong>Rune de tradition :</strong> En Attente </li>
                </ol>
                <h4 class="text-secondary">Voie du mysticisme</h4>
                <ol>
                  <li><strong>Bénédiction* :</strong> En Attente </li>
                  <li><strong>Protection contre le mal* :</strong> En Attente </li>
                  <li><strong>Délivrance* :</strong> En Attente </li>
                  <li><strong>Sanctuaire* :</strong> En Attente </li>
                  <li><strong>Rituel de puissance :</strong> En Attente </li>
                </ol>
                <h4 class="text-secondary">Voie des sombres savoirs</h4>
                <ol>
                  <li><strong>Saignements* :</strong> En Attente </li>
                  <li><strong>Malédiction* :</strong> En Attente </li>
                  <li><strong>Pacte sanglant* :</strong> En Attente </li>
                  <li><strong>Hémorragie* :</strong> En Attente </li>
                  <li><strong>Invocation d’un démon* :</strong> En Attente </li>
                </ol>

              </div>
              <h3 class="text-info" id="Voies_de_prestige_Arran">5.4 Voies de prestige</h3>
              <h2 class="text-primary" id="Markers_personnalisés">6. Markers Personnalisés</h2>
              <h3 class="text-info" id="Markers_presentation">6.1 Présentation</h3>
              <div class="decalage">
                <p>Roll20 peut être déroutant lors des premières utilisations pour des joueurs plus habitués au Jeu de Rôle sur table. Il introduit des notions peu courantes du fait que les combats vont se dérouler sur des "battlemaps" quadrillées ou non. Aussi on va prendre quelques minutes pour expliquer deux notions importantes : <strong>les tokens</strong> et <strong>les tokens markers</strong> (plus simplement appelés <strong>markers</strong> par la suite).</p>
                <p>Le token : Un token est la représentation graphique d'un personnage (PJ ou PNJ) sur la battlemap. Grâce au token on sait à tout moment où se trouve le personnage, s'il subit un sort à effet de zone ou si sa ligne de tir est dégagée par exemple.</p>
                <p>Le marker : Un marker est forcément attaché à un token. Il représente un "état" qui affecte le personnage (<a href="#etats">liste des états</a>). Il se matérialise par une icône dans le coin en haut à doite du token. Un token peut afficher plusieurs markers au même moment. Ils représentent plusieurs états qui se cumulent pour ce personnage.
                <p><img class="img-fluid" src="https://imgur.com/7aLlEL3.png" data-href="https://imgur.com/7aLlEL3.png"></p>
                <p>Dans l'image ci-dessus le token c'est le personnage à la cape bleue qui représente un PJ et le marker c'est le petit escargot qui signifie que ce même PJ est "ralenti". Le script gère les états des PJ et PNJ et il matérialisera leurs états grâce aux markers. Par exemple le MJ va demande un jet de surprise, le script effectue les jets de dés nécessaire et matérialise l'état "surpris" grâce à un marker pour les personnages qui ont raté leur jet de dé. Le script applique automatiquement le malus -5 à la DEF. Au bout d'un tour l'état "surpris" et le marker seront retirés automatiquement par le script. Le MJ peut aussi mettre directement un état à un personnage. Par exemple s'il considère que ses PJs voyagent trop chargés il peut ajouter le marker "encombré" qui lui rappelera que dorénavant les jets de DEX se font sur un d12 et plus sur un d20.</p>
                <p>Il existe des markers qui ne représentent pas un état mais ils sont rares. On peut souligner les ronds de couleurs qui permmettent au joueur de retrouver son token plus facilement. De la même manière dans les markers cof il y existent deux marqueurs <code>cof-init...</code> qui permettent de repérer le prochain joueur pendant les combats. Ce n'est pas un état.</p>
              </div>
              <h3 class="text-info" id="Markers_COF">6.2 Récupération des markers dédiés COF</h3>
              <div class="decalage">
                <p>Roll20 possède des markers par défaut mais ils ne sont pas toujours adaptés pour Chroniques Oubliées Fantasy. La communauté a voté pour choisir les tokens les plus pertinents dans le contexte COF. Voici le <a href="https://www.black-book-editions.fr/forums.php?topic_id=16514">lien vers le post dans le forum BBE</a>. N'hésitez pas à venir poser vos questions ou proposer vos talents de graphiste à la communauté.</p>
                <p>Avant de pouvoir créer votre propre jeu de markers sur Roll20, vous devez préalablement télécharger ceux mis à disposition par la communauté depuis <a href="https://github.com/Ulty/COFantasy">le repository GitHub du projet</a>. Procédez comme suit :</p>
                <p><img class="img-fluid" src="https://imgur.com/xEUDHaC.png" data-href="https://imgur.com/xEUDHaC.png"></p>
                <p>Une fois le fichier téléchargé sur votre PC dézippez le répertoire <code>cof-marker-set</code> et son sous-répertoire</p>
              </div>
              <h3 class="text-info" id="Markers_Import">6.3 Importation des markers dans Roll20</h3>
              <div class="decalage">
                <p>Dans le répertoire <code>cof-marker-set</code> vous trouverez tous les markers qui ont été choisis par la communauté. Dans le répertoire <code>markers-alternatifs</code> vous trouverez les glorieux seconds au vote que vous pouvez utiliser en lieu et place du marker choisi s'il vous plaît plus. Il vous suffit alors de glisser-déposer le fichier dans le répertoire principal et de confirmer l'écrasement de l'autre marker. Vous pouvez aussi choisir vos propres markers dans  <a href="https://game-icons.net/">cette géniale bibliothéque d'icônes</a>. Vous pouvez aussi déssiner vos propre marker. Les limites sont que la taille de l'image doit être exactement de 512x512 px. Un fichier PNG est préférable pour gérer la transparence. Enfin votre fichier doit porter exactement le même nom qu'indiqué <a href="#etats">dans cette documentation</a>.</p>
                <p>Dans Roll20 rendez-vous dans le menu "Outils" puis "Token Marker Library". Appuyez sur "Create Set". Puis renseignez le nom du marker set. "cof markers" par exemple. Appuyez sur "Create Set".</p>
                <p><img class="img-fluid" src="https://imgur.com/NrHZ5Q6.png" data-href="https://imgur.com/NrHZ5Q6.png"></p>
                <p>Vous arrivez alors sur la fenêtre suivante où il suffit de déposer les fichiers pour qu'ils soient uploadés sur Roll20</p>
                <p><img class="img-fluid" src="https://imgur.com/5TUTgWb.png" data-href="https://imgur.com/5TUTgWb.png"></p>
                <p>A ce moment il y a deux écoles de vie : ceux qui lâchent tous leurs markers en même temps et qui laisse le soin aux serveurs de Roll20 de décider dans quel ordre ils verront apparaître les markers dans leur interface pour le restant de leur jour. Et ceux qui posent les fichiers un par un pour que l'ordre qu'ils souhaitent soit respecté par Roll20. Quand tout est prêt cliquez sur "Upload". Vous avez un message "Fichiers en cours de traitement" pendant 1 à 2 minutes. Ensuite Roll20 vous propose de renommer vos tokens. Ne changez rien et faîtes "Save". Ca y est, vos markers personnalisés sont enfin prêts !</p>
              </div>
              <h3 class="text-info" id="Markers_Check">6.4 Activation et Vérification</h3>
              <div class="decalage">
                <p>Mais ce n'est pas fini il vous faut encore affecter vos markers à votre campagne. Cela se passe sur la page d'acceuil de votre campagne:</p>
                <p><img class="img-fluid" src="https://imgur.com/cE5OAga.png" data-href="https://imgur.com/cE5OAga.png"></p>
                <p>Lancez votre campagne et vérifiez que les nouveaux markers apparaissent bien. Lancez ensuite la commande <code>!cof-options</code> pour cocher "Markers Personnalises". Enfin comme dernier contrôle allez dans la console des API, faîtes "restart API sandbox" et vérifiez que le message "Markers personnalisés activés" est bien présent. Si ce n'est pas le cas vous avez probablement oublié des markers "obligatoires" et le script n'a pas pu activer les markers cof pour cette raison. La liste des markers manquants devrait apparaître dans la console.</p>
              </div>
              <h2 class="text-primary" id="Console">7. Console API</h2>
              <h3 class="text-info" id="Generalites_Console">7.1 Généralités sur la Console </h3>
              <div class="decalage">
                <p>Il est recommandé quand vous jouez de garder un onglet de votre navigateur ouvert sur la Console API de votre campagne (Paramètres -> Scripts API). En cas d'absence de réponse du jeu il vous permet de facilement prendre connaissance d'une éventuelle erreur et de prendre rapidement les actions correctives nécessaires.</p>
                <p>Un message bloquant est écrit dans un bloc rouge en dehors de la fenêtre API Output Console et ressemble à l'image suivante :</p>
                <p><img class="img-fluid" src="https://imgur.com/ydMKYLl.png" data-href="https://imgur.com/ydMKYLl.png"></p>
                <p>Lorsqu'un message rouge comme celui-ci interrompt votre partie vérifiez s'il possède une solution identifiée dans le paragraphe ci-dessous. "Restart API sandbox" permet de relancer le script mais les mêmes causes provoqueront la même erreur. Si le message d'erreur n'est pas encore référencé ou ne propose pas de solution, essayez de comprendre quelle est votre dernière action ou quel bouton provoque cette erreur et terminez votre séance en évitant de l'utiliser. Retestez plus tard et si l'erreur se reproduit expliquez-nous votre problème <a href="https://www.black-book-editions.fr/forums.php?topic_id=7842">sur ce post dans le forum BBE</a>. Essayez d'être le plus exhaustif possible dans vos explications car malheureusement les messages de Roll20 ne sont pas précis du tout quant au contexte de l'erreur. Par exemple le numéro de la ligne de code incriminée ne nous est pas connue et l'on a donc besoin de toutes les précisions possibles pour comprendre le problème et être en capacité de le reproduire afin de le corriger.</p>
                <p>Les messages qui sont à l'interieur de la fenêtre API Output Console sont des messages d'information ou d'alerte comme sur l'image suivante :</p>
                <p><img class="img-fluid" src="https://imgur.com/5N5xrXI.png" data-href="https://imgur.com/5N5xrXI.png"></p>
                <p>Malgré la gravité apparente de certains de ces messages (SyntaxError) ils n'empêchent jamais le bon fonctionnement du script. Seuls les messages bloquants apparaissants en rouge empêche le bon fonctionnement du script. Nous n'avons pas complétement la main sur l'apparition de ces messages d'alerte et nous travaillons activement avec Roll20 pour les éliminer. Des messages d'informations sont aussi présents comme par exemple le numéro de version du script que vous utilisez actuellement.</p>
              </div>
              <h3 class="text-info" id="Messages_Console">7.2 Principaux messages bloquants</h3>
              <div class="decalage">
                <ul>
                  <li><code>There was an error communicating with the QuantumRoll server</code> Erreur Roll20 courante. "Restart API Sandbox" règle normalement ce problème.</li>
                  <li><code>docker: Cannot connect to the Docker daemon. Is the docker daemon running on this host?</code> Erreur Roll20. "Restart API Sandbox" règle normalement ce problème.</li>
                  <li><code>SyntaxError: Invalid or unexpected token ... </code> Erreur dans le code. Pas de solution évidente. Le signaler uniquement si c'est un message bloquant (rouge).</li>
                  <li><code>SyntaxError: Unexpected token ... </code> Erreur dans le code. Pas de solution évidente. Le signaler uniquement si c'est un message bloquant (rouge).</li>
                  <li><code>TypeError: Cannot read property '...' of undefined </code> Erreur dans le code. Pas de solution évidente. Le signaler uniquement si c'est un message bloquant (rouge).</li>
                </ul>
              </div>
              <h3 class="text-info" id="Infos_Console">7.3 Principaux messages d'information et d'alerte</h3>
              <div class="decalage">
                <ul>
                  <li><code>COFantasy X.XX loaded</code> Information : Le script a correctement démarré. Vous indique le numéro de version utilisé.</li>
                  <li><code>Markers personnalisés activés</code> Information : Succès de l'activation des <a href="#Markers_personnalisés">Markers Personnalisés</a>.</li>
                  <li><code>API sandbox shutdown due to campaign inactivity</code> Information : "Restart API Sandbox" ou l'utilisation de la campagne remet en route la sandbox.</li>
                  <li><code>XXX dans l'équipe XXX est inconnu </code> Alerte : Erreur dans le <a href="#allie">handout servant de sélection d'équipe</a>. Vérifiez l'orthographe de vos personnages.</li>
                  <li><code>Markers personnalisés manquants -> Retour aux markers standards Roll20. Voir erreur(s) ci-dessus.</code> Alerte : Impossibilité d'activer les <a href="#Markers_personnalisés">Markers Personnalisés</a> pour cause d'un marker obligatoire absent.</li>
                  <li><code>Marker cof-XXX introuvable</code> Alerte : Erreur dans le nom d'un marker. Voir <a href="#Markers_personnalisés">Markers Personnalisés</a> ou <a href="#etats">liste des états</a>.</li>
                  <li><code>Compétences sans caractéristique associée</code>Alerte : Erreur de déclaration dans le <a href="#jet_caracteristiques">handout de jets de caractéristique</a>.</li>
                </ul>
              </div>
              <h2 class="text-primary" id="pathfinder">8. Utiliser des personnages Pathfinder</h2>
              <div class="decalage">
                <p>Il existe un support basique des fiches Roll20 venant du système Pathfinder 1. La fonction <code>!cof-pathfinder1</code> se lance en sélectionnant un ou plusieurs tokens liés à des fiches Pathfinder (par exemple obtenues en achetant des aventures Pathfinder sur le marketplace de Roll20). L'effet est d'une part de transformer une partie des attributs de la fiche en attributs compris par la fiche COF et le script COFantasy, de changer un peu le token associé à la fiche, mais surtout d'effacer les attributs inutiles pour COF. En effet, le script est relativement sensible au nombre total d'attributs en jeu, et les fiches Pathfinder ont tendence à en avoir vraiment beaucoup. Tout ce qui n'est pas compris par le script se retrouve dans un attribut <code>Attributs Pathfinder</code>. Mais le mieux est de compléter la fiche COF en se basant sur la fiche Pathfinder ouverte dans une autre partie.</p>
              </div>
              <h2 class="text-primary" id="statistiques">9. Statistiques</h2>
              <div class="decalage">
                <p>Il est possible d'activer la collecte de statistiques en utilisant la commande <code>!cof-demarrer-statistiques</code>.</p>
                <p>On peut arrêter la collecte avec <code>!cof-arreter-statistiques</code>, et la mettre en pause avec <code>!cof-pause-statistiques</code>.<br />
                Si on redémarre après une mise en pause, on reprend les statistiques comme elles étaient au moment de la pause. Si on redémarre des statistiques en court, cela remet les statistiques à zéro.
                </p>
              </div>
            </div>
          </div>
        </div>
  </body>
</html>
